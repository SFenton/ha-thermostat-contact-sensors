2026-01-03T21:55:23.5128520Z Current runner version: '2.330.0'
2026-01-03T21:55:23.5151258Z ##[group]Runner Image Provisioner
2026-01-03T21:55:23.5152061Z Hosted Compute Agent
2026-01-03T21:55:23.5152745Z Version: 20251211.462
2026-01-03T21:55:23.5153292Z Commit: 6cbad8c2bb55d58165063d031ccabf57e2d2db61
2026-01-03T21:55:23.5154048Z Build Date: 2025-12-11T16:28:49Z
2026-01-03T21:55:23.5154648Z Worker ID: {81b9cdea-54f6-47b1-8fee-feda99b2afe8}
2026-01-03T21:55:23.5155331Z ##[endgroup]
2026-01-03T21:55:23.5155869Z ##[group]Operating System
2026-01-03T21:55:23.5156485Z Ubuntu
2026-01-03T21:55:23.5156929Z 24.04.3
2026-01-03T21:55:23.5157395Z LTS
2026-01-03T21:55:23.5157834Z ##[endgroup]
2026-01-03T21:55:23.5158302Z ##[group]Runner Image
2026-01-03T21:55:23.5159016Z Image: ubuntu-24.04
2026-01-03T21:55:23.5159478Z Version: 20251215.174.1
2026-01-03T21:55:23.5160480Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20251215.174/images/ubuntu/Ubuntu2404-Readme.md
2026-01-03T21:55:23.5161992Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20251215.174
2026-01-03T21:55:23.5163093Z ##[endgroup]
2026-01-03T21:55:23.5164160Z ##[group]GITHUB_TOKEN Permissions
2026-01-03T21:55:23.5165908Z Contents: read
2026-01-03T21:55:23.5166516Z Metadata: read
2026-01-03T21:55:23.5166980Z Packages: read
2026-01-03T21:55:23.5167496Z ##[endgroup]
2026-01-03T21:55:23.5169512Z Secret source: Actions
2026-01-03T21:55:23.5170164Z Prepare workflow directory
2026-01-03T21:55:23.5485739Z Prepare all required actions
2026-01-03T21:55:23.5522173Z Getting action download info
2026-01-03T21:55:24.0444618Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2026-01-03T21:55:24.1373848Z Download action repository 'actions/setup-python@v5' (SHA:a26af69be951a213d495a4c3e4e4022e16d87065)
2026-01-03T21:55:24.2433643Z Download action repository 'codecov/codecov-action@v4' (SHA:b9fd7d16f6d7d1b5d2bec1a2887e65ceed900238)
2026-01-03T21:55:24.8700926Z Complete job name: test (3.12)
2026-01-03T21:55:24.9341373Z ##[group]Run actions/checkout@v4
2026-01-03T21:55:24.9342279Z with:
2026-01-03T21:55:24.9342948Z   repository: SFenton/ha-thermostat-contact-sensors
2026-01-03T21:55:24.9343756Z   token: ***
2026-01-03T21:55:24.9344173Z   ssh-strict: true
2026-01-03T21:55:24.9344602Z   ssh-user: git
2026-01-03T21:55:24.9345052Z   persist-credentials: true
2026-01-03T21:55:24.9345526Z   clean: true
2026-01-03T21:55:24.9345963Z   sparse-checkout-cone-mode: true
2026-01-03T21:55:24.9346466Z   fetch-depth: 1
2026-01-03T21:55:24.9346878Z   fetch-tags: false
2026-01-03T21:55:24.9347307Z   show-progress: true
2026-01-03T21:55:24.9347731Z   lfs: false
2026-01-03T21:55:24.9348141Z   submodules: false
2026-01-03T21:55:24.9348574Z   set-safe-directory: true
2026-01-03T21:55:24.9349445Z ##[endgroup]
2026-01-03T21:55:25.0434109Z Syncing repository: SFenton/ha-thermostat-contact-sensors
2026-01-03T21:55:25.0436088Z ##[group]Getting Git version info
2026-01-03T21:55:25.0437201Z Working directory is '/home/runner/work/ha-thermostat-contact-sensors/ha-thermostat-contact-sensors'
2026-01-03T21:55:25.0438485Z [command]/usr/bin/git version
2026-01-03T21:55:25.0530080Z git version 2.52.0
2026-01-03T21:55:25.0556241Z ##[endgroup]
2026-01-03T21:55:25.0570680Z Temporarily overriding HOME='/home/runner/work/_temp/f3a59880-97d1-4bac-881d-61c55786eae4' before making global git config changes
2026-01-03T21:55:25.0572148Z Adding repository directory to the temporary git global config as a safe directory
2026-01-03T21:55:25.0584426Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/ha-thermostat-contact-sensors/ha-thermostat-contact-sensors
2026-01-03T21:55:25.0624675Z Deleting the contents of '/home/runner/work/ha-thermostat-contact-sensors/ha-thermostat-contact-sensors'
2026-01-03T21:55:25.0627711Z ##[group]Initializing the repository
2026-01-03T21:55:25.0631836Z [command]/usr/bin/git init /home/runner/work/ha-thermostat-contact-sensors/ha-thermostat-contact-sensors
2026-01-03T21:55:25.0740257Z hint: Using 'master' as the name for the initial branch. This default branch name
2026-01-03T21:55:25.0742025Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2026-01-03T21:55:25.0743916Z hint: to use in all of your new repositories, which will suppress this warning,
2026-01-03T21:55:25.0745140Z hint: call:
2026-01-03T21:55:25.0746158Z hint:
2026-01-03T21:55:25.0747224Z hint: 	git config --global init.defaultBranch <name>
2026-01-03T21:55:25.0748517Z hint:
2026-01-03T21:55:25.0749747Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2026-01-03T21:55:25.0751809Z hint: 'development'. The just-created branch can be renamed via this command:
2026-01-03T21:55:25.0753790Z hint:
2026-01-03T21:55:25.0754625Z hint: 	git branch -m <name>
2026-01-03T21:55:25.0755584Z hint:
2026-01-03T21:55:25.0756797Z hint: Disable this message with "git config set advice.defaultBranchName false"
2026-01-03T21:55:25.0759418Z Initialized empty Git repository in /home/runner/work/ha-thermostat-contact-sensors/ha-thermostat-contact-sensors/.git/
2026-01-03T21:55:25.0763270Z [command]/usr/bin/git remote add origin https://github.com/SFenton/ha-thermostat-contact-sensors
2026-01-03T21:55:25.0792954Z ##[endgroup]
2026-01-03T21:55:25.0794355Z ##[group]Disabling automatic garbage collection
2026-01-03T21:55:25.0797826Z [command]/usr/bin/git config --local gc.auto 0
2026-01-03T21:55:25.0825750Z ##[endgroup]
2026-01-03T21:55:25.0827145Z ##[group]Setting up auth
2026-01-03T21:55:25.0833450Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-03T21:55:25.0864109Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-03T21:55:25.1184984Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-03T21:55:25.1216526Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-03T21:55:25.1431026Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-03T21:55:25.1461121Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-03T21:55:25.1686747Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2026-01-03T21:55:25.1719717Z ##[endgroup]
2026-01-03T21:55:25.1721171Z ##[group]Fetching the repository
2026-01-03T21:55:25.1730140Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +10dcec065861dc5ce540aab5a28447ef35477164:refs/remotes/origin/main
2026-01-03T21:55:25.6187195Z From https://github.com/SFenton/ha-thermostat-contact-sensors
2026-01-03T21:55:25.6190224Z  * [new ref]         10dcec065861dc5ce540aab5a28447ef35477164 -> origin/main
2026-01-03T21:55:25.6220441Z ##[endgroup]
2026-01-03T21:55:25.6221579Z ##[group]Determining the checkout info
2026-01-03T21:55:25.6223384Z ##[endgroup]
2026-01-03T21:55:25.6229615Z [command]/usr/bin/git sparse-checkout disable
2026-01-03T21:55:25.6275394Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2026-01-03T21:55:25.6300958Z ##[group]Checking out the ref
2026-01-03T21:55:25.6304637Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
2026-01-03T21:55:25.6402929Z Switched to a new branch 'main'
2026-01-03T21:55:25.6405728Z branch 'main' set up to track 'origin/main'.
2026-01-03T21:55:25.6411958Z ##[endgroup]
2026-01-03T21:55:25.6446041Z [command]/usr/bin/git log -1 --format=%H
2026-01-03T21:55:25.6467980Z 10dcec065861dc5ce540aab5a28447ef35477164
2026-01-03T21:55:25.6713253Z ##[group]Run actions/setup-python@v5
2026-01-03T21:55:25.6713800Z with:
2026-01-03T21:55:25.6714147Z   python-version: 3.12
2026-01-03T21:55:25.6714536Z   check-latest: false
2026-01-03T21:55:25.6715283Z   token: ***
2026-01-03T21:55:25.6715655Z   update-environment: true
2026-01-03T21:55:25.6716086Z   allow-prereleases: false
2026-01-03T21:55:25.6716492Z   freethreaded: false
2026-01-03T21:55:25.6716875Z ##[endgroup]
2026-01-03T21:55:25.8419244Z ##[group]Installed versions
2026-01-03T21:55:25.8532106Z Successfully set up CPython (3.12.12)
2026-01-03T21:55:25.8533791Z ##[endgroup]
2026-01-03T21:55:25.8667566Z ##[group]Run python -m pip install --upgrade pip
2026-01-03T21:55:25.8668363Z [36;1mpython -m pip install --upgrade pip[0m
2026-01-03T21:55:25.8669019Z [36;1mpip install -r requirements_test.txt[0m
2026-01-03T21:55:25.8818594Z shell: /usr/bin/bash -e {0}
2026-01-03T21:55:25.8819156Z env:
2026-01-03T21:55:25.8819670Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:55:25.8820509Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib/pkgconfig
2026-01-03T21:55:25.8821370Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:55:25.8822115Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:55:25.8823035Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:55:25.8823772Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib
2026-01-03T21:55:25.8824402Z ##[endgroup]
2026-01-03T21:55:27.8637329Z Requirement already satisfied: pip in /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages (25.3)
2026-01-03T21:55:28.5379269Z Collecting pytest>=7.0.0 (from -r requirements_test.txt (line 1))
2026-01-03T21:55:28.5982423Z   Downloading pytest-9.0.2-py3-none-any.whl.metadata (7.6 kB)
2026-01-03T21:55:28.6225761Z Collecting pytest-asyncio>=0.23.0 (from -r requirements_test.txt (line 2))
2026-01-03T21:55:28.6258699Z   Downloading pytest_asyncio-1.3.0-py3-none-any.whl.metadata (4.1 kB)
2026-01-03T21:55:28.7328167Z Collecting pytest-homeassistant-custom-component>=0.13.0 (from -r requirements_test.txt (line 3))
2026-01-03T21:55:28.7370973Z   Downloading pytest_homeassistant_custom_component-0.13.205-py3-none-any.whl.metadata (5.3 kB)
2026-01-03T21:55:28.7550187Z Collecting pytest-cov>=4.0.0 (from -r requirements_test.txt (line 4))
2026-01-03T21:55:28.7585252Z   Downloading pytest_cov-7.0.0-py3-none-any.whl.metadata (31 kB)
2026-01-03T21:55:28.7770945Z Collecting iniconfig>=1.0.1 (from pytest>=7.0.0->-r requirements_test.txt (line 1))
2026-01-03T21:55:28.7799497Z   Downloading iniconfig-2.3.0-py3-none-any.whl.metadata (2.5 kB)
2026-01-03T21:55:28.8070556Z Collecting packaging>=22 (from pytest>=7.0.0->-r requirements_test.txt (line 1))
2026-01-03T21:55:28.8101200Z   Downloading packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
2026-01-03T21:55:28.8238979Z Collecting pluggy<2,>=1.5 (from pytest>=7.0.0->-r requirements_test.txt (line 1))
2026-01-03T21:55:28.8267674Z   Downloading pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
2026-01-03T21:55:28.8498222Z Collecting pygments>=2.7.2 (from pytest>=7.0.0->-r requirements_test.txt (line 1))
2026-01-03T21:55:28.8530708Z   Downloading pygments-2.19.2-py3-none-any.whl.metadata (2.5 kB)
2026-01-03T21:55:28.8894959Z Collecting typing-extensions>=4.12 (from pytest-asyncio>=0.23.0->-r requirements_test.txt (line 2))
2026-01-03T21:55:28.8931348Z   Downloading typing_extensions-4.15.0-py3-none-any.whl.metadata (3.3 kB)
2026-01-03T21:55:29.1598833Z Collecting sqlalchemy (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:29.1637778Z   Downloading sqlalchemy-2.0.45-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (9.5 kB)
2026-01-03T21:55:29.5435108Z Collecting coverage==7.6.8 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:29.5503662Z   Downloading coverage-7.6.8-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (8.2 kB)
2026-01-03T21:55:29.5654438Z Collecting freezegun==1.5.1 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:29.5693192Z   Downloading freezegun-1.5.1-py3-none-any.whl.metadata (11 kB)
2026-01-03T21:55:29.5852364Z Collecting license-expression==30.4.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:29.5895376Z   Downloading license_expression-30.4.0-py3-none-any.whl.metadata (12 kB)
2026-01-03T21:55:29.6014597Z Collecting mock-open==1.4.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:29.6058098Z   Downloading mock-open-1.4.0.tar.gz (12 kB)
2026-01-03T21:55:29.6148245Z   Installing build dependencies: started
2026-01-03T21:55:30.4223342Z   Installing build dependencies: finished with status 'done'
2026-01-03T21:55:30.4228904Z   Getting requirements to build wheel: started
2026-01-03T21:55:30.8137216Z   Getting requirements to build wheel: finished with status 'done'
2026-01-03T21:55:30.8146726Z   Preparing metadata (pyproject.toml): started
2026-01-03T21:55:31.0072920Z   Preparing metadata (pyproject.toml): finished with status 'done'
2026-01-03T21:55:31.1191397Z Collecting pydantic==2.10.4 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.1223340Z   Downloading pydantic-2.10.4-py3-none-any.whl.metadata (29 kB)
2026-01-03T21:55:31.1370077Z Collecting pylint-per-file-ignores==1.3.2 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.1409890Z   Downloading pylint_per_file_ignores-1.3.2-py3-none-any.whl.metadata (2.0 kB)
2026-01-03T21:55:31.1624876Z Collecting pipdeptree==2.23.4 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.1665159Z   Downloading pipdeptree-2.23.4-py3-none-any.whl.metadata (15 kB)
2026-01-03T21:55:31.1757312Z Collecting pytest-asyncio>=0.23.0 (from -r requirements_test.txt (line 2))
2026-01-03T21:55:31.1809685Z   Downloading pytest_asyncio-0.24.0-py3-none-any.whl.metadata (3.9 kB)
2026-01-03T21:55:31.2000918Z Collecting pytest-aiohttp==1.0.5 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.2052931Z   Downloading pytest_aiohttp-1.0.5-py3-none-any.whl.metadata (2.6 kB)
2026-01-03T21:55:31.2133160Z Collecting pytest-cov>=4.0.0 (from -r requirements_test.txt (line 4))
2026-01-03T21:55:31.2171682Z   Downloading pytest_cov-6.0.0-py3-none-any.whl.metadata (27 kB)
2026-01-03T21:55:31.2307472Z Collecting pytest-freezer==0.4.8 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.2349156Z   Downloading pytest_freezer-0.4.8-py3-none-any.whl.metadata (2.4 kB)
2026-01-03T21:55:31.2491929Z Collecting pytest-github-actions-annotate-failures==0.2.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.2530243Z   Downloading pytest_github_actions_annotate_failures-0.2.0-py3-none-any.whl.metadata (3.1 kB)
2026-01-03T21:55:31.2671598Z Collecting pytest-socket==0.7.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.2709774Z   Downloading pytest_socket-0.7.0-py3-none-any.whl.metadata (6.7 kB)
2026-01-03T21:55:31.2845744Z Collecting pytest-sugar==1.0.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.2885545Z   Downloading pytest_sugar-1.0.0-py3-none-any.whl.metadata (4.4 kB)
2026-01-03T21:55:31.3009358Z Collecting pytest-timeout==2.3.1 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.3047314Z   Downloading pytest_timeout-2.3.1-py3-none-any.whl.metadata (20 kB)
2026-01-03T21:55:31.3178756Z Collecting pytest-unordered==0.6.1 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.3219596Z   Downloading pytest_unordered-0.6.1-py3-none-any.whl.metadata (6.4 kB)
2026-01-03T21:55:31.3410235Z Collecting pytest-picked==0.5.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.3454263Z   Downloading pytest_picked-0.5.0-py3-none-any.whl.metadata (4.1 kB)
2026-01-03T21:55:31.3635125Z Collecting pytest-xdist==3.6.1 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.3668220Z   Downloading pytest_xdist-3.6.1-py3-none-any.whl.metadata (4.3 kB)
2026-01-03T21:55:31.3835630Z Collecting pytest>=7.0.0 (from -r requirements_test.txt (line 1))
2026-01-03T21:55:31.3868602Z   Downloading pytest-8.3.4-py3-none-any.whl.metadata (7.5 kB)
2026-01-03T21:55:31.4024547Z Collecting requests-mock==1.12.1 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.4065776Z   Downloading requests_mock-1.12.1-py2.py3-none-any.whl.metadata (4.1 kB)
2026-01-03T21:55:31.4237791Z Collecting respx==0.21.1 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.4283268Z   Downloading respx-0.21.1-py2.py3-none-any.whl.metadata (4.1 kB)
2026-01-03T21:55:31.5211317Z Collecting syrupy==4.8.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.5253702Z   Downloading syrupy-4.8.0-py3-none-any.whl.metadata (36 kB)
2026-01-03T21:55:31.5636688Z Collecting tqdm==4.66.5 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.5680453Z   Downloading tqdm-4.66.5-py3-none-any.whl.metadata (57 kB)
2026-01-03T21:55:31.7885035Z Collecting homeassistant==2025.1.4 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.7926901Z   Downloading homeassistant-2025.1.4-py3-none-any.whl.metadata (4.8 kB)
2026-01-03T21:55:31.8127388Z Collecting sqlalchemy (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.8166648Z   Downloading SQLAlchemy-2.0.36-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.7 kB)
2026-01-03T21:55:31.8385489Z Collecting paho-mqtt==1.6.1 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:31.8424112Z   Downloading paho-mqtt-1.6.1.tar.gz (99 kB)
2026-01-03T21:55:31.8617582Z   Installing build dependencies: started
2026-01-03T21:55:32.5508810Z   Installing build dependencies: finished with status 'done'
2026-01-03T21:55:32.5514701Z   Getting requirements to build wheel: started
2026-01-03T21:55:32.8851595Z   Getting requirements to build wheel: finished with status 'done'
2026-01-03T21:55:32.8859866Z   Preparing metadata (pyproject.toml): started
2026-01-03T21:55:33.0712173Z   Preparing metadata (pyproject.toml): finished with status 'done'
2026-01-03T21:55:33.2818620Z Collecting numpy==2.2.0 (from pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.2879523Z   Downloading numpy-2.2.0-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (62 kB)
2026-01-03T21:55:33.3551185Z Collecting python-dateutil>=2.7 (from freezegun==1.5.1->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.3581076Z   Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
2026-01-03T21:55:33.3722291Z Collecting aiodns==3.2.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.3766060Z   Downloading aiodns-3.2.0-py3-none-any.whl.metadata (4.0 kB)
2026-01-03T21:55:33.3922465Z Collecting aiohasupervisor==0.2.2b5 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.3966108Z   Downloading aiohasupervisor-0.2.2b5-py3-none-any.whl.metadata (5.1 kB)
2026-01-03T21:55:33.8924706Z Collecting aiohttp==3.11.11 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.8966771Z   Downloading aiohttp-3.11.11-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (7.7 kB)
2026-01-03T21:55:33.9101023Z Collecting aiohttp-cors==0.7.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.9130274Z   Downloading aiohttp_cors-0.7.0-py3-none-any.whl.metadata (20 kB)
2026-01-03T21:55:33.9250113Z Collecting aiohttp-fast-zlib==0.2.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.9307010Z   Downloading aiohttp_fast_zlib-0.2.0-py3-none-any.whl.metadata (5.6 kB)
2026-01-03T21:55:33.9415538Z Collecting aiozoneinfo==0.2.1 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.9459290Z   Downloading aiozoneinfo-0.2.1-py3-none-any.whl.metadata (5.5 kB)
2026-01-03T21:55:33.9639886Z Collecting astral==2.2 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.9682526Z   Downloading astral-2.2-py2.py3-none-any.whl.metadata (1.5 kB)
2026-01-03T21:55:33.9798150Z Collecting async-interrupt==1.2.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:33.9837932Z   Downloading async_interrupt-1.2.0-py3-none-any.whl.metadata (4.9 kB)
2026-01-03T21:55:33.9995899Z Collecting attrs==24.2.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.0026577Z   Downloading attrs-24.2.0-py3-none-any.whl.metadata (11 kB)
2026-01-03T21:55:34.0203552Z Collecting atomicwrites-homeassistant==1.4.1 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.0243089Z   Downloading atomicwrites_homeassistant-1.4.1-py2.py3-none-any.whl.metadata (6.0 kB)
2026-01-03T21:55:34.0414086Z Collecting awesomeversion==24.6.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.0453177Z   Downloading awesomeversion-24.6.0-py3-none-any.whl.metadata (9.0 kB)
2026-01-03T21:55:34.1363595Z Collecting bcrypt==4.2.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.1396128Z   Downloading bcrypt-4.2.0-cp39-abi3-manylinux_2_28_x86_64.whl.metadata (9.6 kB)
2026-01-03T21:55:34.1605398Z Collecting certifi>=2021.5.30 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.1640703Z   Downloading certifi-2025.11.12-py3-none-any.whl.metadata (2.5 kB)
2026-01-03T21:55:34.1852488Z Collecting ciso8601==2.3.2 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.1893805Z   Downloading ciso8601-2.3.2-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (23 kB)
2026-01-03T21:55:34.2017379Z Collecting cronsim==2.6 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.2058349Z   Downloading cronsim-2.6-py3-none-any.whl.metadata (6.9 kB)
2026-01-03T21:55:34.2427691Z Collecting fnv-hash-fast==1.0.2 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.2473763Z   Downloading fnv_hash_fast-1.0.2-cp312-cp312-manylinux_2_17_x86_64.manylinux_2_5_x86_64.manylinux1_x86_64.manylinux2014_x86_64.whl.metadata (4.7 kB)
2026-01-03T21:55:34.2805997Z Collecting hass-nabucasa==0.87.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.2845953Z   Downloading hass_nabucasa-0.87.0-py3-none-any.whl.metadata (1.8 kB)
2026-01-03T21:55:34.3050230Z Collecting httpx==0.27.2 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.3080595Z   Downloading httpx-0.27.2-py3-none-any.whl.metadata (7.1 kB)
2026-01-03T21:55:34.3224507Z Collecting home-assistant-bluetooth==1.13.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.3264698Z   Downloading home_assistant_bluetooth-1.13.0-py3-none-any.whl.metadata (5.4 kB)
2026-01-03T21:55:34.3378866Z Collecting ifaddr==0.2.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.3416362Z   Downloading ifaddr-0.2.0-py3-none-any.whl.metadata (4.9 kB)
2026-01-03T21:55:34.3559416Z Collecting Jinja2==3.1.5 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.3594796Z   Downloading jinja2-3.1.5-py3-none-any.whl.metadata (2.6 kB)
2026-01-03T21:55:34.3869928Z Collecting lru-dict==1.3.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.3913681Z   Downloading lru_dict-1.3.0-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.5 kB)
2026-01-03T21:55:34.4079001Z Collecting PyJWT==2.10.1 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.4111746Z   Downloading PyJWT-2.10.1-py3-none-any.whl.metadata (4.0 kB)
2026-01-03T21:55:34.5843946Z Collecting cryptography==44.0.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.5874772Z   Downloading cryptography-44.0.0-cp39-abi3-manylinux_2_28_x86_64.whl.metadata (5.7 kB)
2026-01-03T21:55:34.7558663Z Collecting Pillow==11.0.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.7605602Z   Downloading pillow-11.0.0-cp312-cp312-manylinux_2_28_x86_64.whl.metadata (9.1 kB)
2026-01-03T21:55:34.8153423Z Collecting propcache==0.2.1 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.8196317Z   Downloading propcache-0.2.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.2 kB)
2026-01-03T21:55:34.8352177Z Collecting pyOpenSSL==24.3.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:34.8381119Z   Downloading pyOpenSSL-24.3.0-py3-none-any.whl.metadata (15 kB)
2026-01-03T21:55:35.1442505Z Collecting orjson==3.10.12 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.1486089Z   Downloading orjson-3.10.12-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (41 kB)
2026-01-03T21:55:35.1643183Z Collecting psutil-home-assistant==0.0.1 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.1679878Z   Downloading psutil_home_assistant-0.0.1-py3-none-any.whl.metadata (882 bytes)
2026-01-03T21:55:35.1813814Z Collecting python-slugify==8.0.4 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.1844040Z   Downloading python_slugify-8.0.4-py2.py3-none-any.whl.metadata (8.5 kB)
2026-01-03T21:55:35.2216011Z Collecting PyYAML==6.0.2 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.2253301Z   Downloading PyYAML-6.0.2-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)
2026-01-03T21:55:35.2497795Z Collecting requests==2.32.3 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.2529894Z   Downloading requests-2.32.3-py3-none-any.whl.metadata (4.6 kB)
2026-01-03T21:55:35.2659812Z Collecting securetar==2024.11.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.2698754Z   Downloading securetar-2024.11.0-py3-none-any.whl.metadata (2.0 kB)
2026-01-03T21:55:35.3125111Z Collecting ulid-transform==1.0.2 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.3169998Z   Downloading ulid_transform-1.0.2-cp312-cp312-manylinux_2_36_x86_64.whl.metadata (5.4 kB)
2026-01-03T21:55:35.3469224Z Collecting urllib3<2,>=1.26.5 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.3498650Z   Downloading urllib3-1.26.20-py2.py3-none-any.whl.metadata (50 kB)
2026-01-03T21:55:35.5805700Z Collecting uv==0.5.8 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.5850068Z   Downloading uv-0.5.8-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (11 kB)
2026-01-03T21:55:35.6028261Z Collecting voluptuous==0.15.2 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.6073574Z   Downloading voluptuous-0.15.2-py3-none-any.whl.metadata (20 kB)
2026-01-03T21:55:35.6193829Z Collecting voluptuous-serialize==2.6.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.6234441Z   Downloading voluptuous_serialize-2.6.0-py3-none-any.whl.metadata (316 bytes)
2026-01-03T21:55:35.6363636Z Collecting voluptuous-openapi==0.0.5 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.6414924Z   Downloading voluptuous_openapi-0.0.5-py3-none-any.whl.metadata (325 bytes)
2026-01-03T21:55:35.9723830Z Collecting yarl==1.18.3 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.9758315Z   Downloading yarl-1.18.3-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (69 kB)
2026-01-03T21:55:35.9917163Z Collecting webrtc-models==0.3.0 (from homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:35.9961176Z   Downloading webrtc_models-0.3.0-py3-none-any.whl.metadata (2.9 kB)
2026-01-03T21:55:36.0733452Z Collecting pycares>=4.0.0 (from aiodns==3.2.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.0886260Z   Downloading pycares-5.0.1-cp312-cp312-manylinux_2_26_x86_64.manylinux_2_28_x86_64.whl.metadata (4.1 kB)
2026-01-03T21:55:36.1174391Z Collecting mashumaro<4.0,>=3.11 (from aiohasupervisor==0.2.2b5->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.1220107Z   Downloading mashumaro-3.17-py3-none-any.whl.metadata (118 kB)
2026-01-03T21:55:36.1700909Z Collecting aiohappyeyeballs>=2.3.0 (from aiohttp==3.11.11->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.1732582Z   Downloading aiohappyeyeballs-2.6.1-py3-none-any.whl.metadata (5.9 kB)
2026-01-03T21:55:36.1871748Z Collecting aiosignal>=1.1.2 (from aiohttp==3.11.11->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.1899916Z   Downloading aiosignal-1.4.0-py3-none-any.whl.metadata (3.7 kB)
2026-01-03T21:55:36.2598355Z Collecting frozenlist>=1.1.1 (from aiohttp==3.11.11->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.2630560Z   Downloading frozenlist-1.8.0-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl.metadata (20 kB)
2026-01-03T21:55:36.4947460Z Collecting multidict<7.0,>=4.5 (from aiohttp==3.11.11->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.4983227Z   Downloading multidict-6.7.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (5.3 kB)
2026-01-03T21:55:36.5278572Z Collecting idna>=2.0 (from yarl==1.18.3->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.5309297Z   Downloading idna-3.11-py3-none-any.whl.metadata (8.4 kB)
2026-01-03T21:55:36.5777779Z Collecting tzdata>=2024.1 (from aiozoneinfo==0.2.1->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.5809316Z   Downloading tzdata-2025.3-py2.py3-none-any.whl.metadata (1.4 kB)
2026-01-03T21:55:36.6207657Z Collecting pytz (from astral==2.2->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.6237432Z   Downloading pytz-2025.2-py2.py3-none-any.whl.metadata (22 kB)
2026-01-03T21:55:36.7394516Z Collecting cffi>=1.12 (from cryptography==44.0.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.7427886Z   Downloading cffi-2.0.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (2.6 kB)
2026-01-03T21:55:36.7551634Z Collecting fnvhash<0.2.0,>=0.1.0 (from fnv-hash-fast==1.0.2->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:36.7588038Z   Downloading fnvhash-0.1.0.tar.gz (1.9 kB)
2026-01-03T21:55:36.7646504Z   Installing build dependencies: started
2026-01-03T21:55:37.4542388Z   Installing build dependencies: finished with status 'done'
2026-01-03T21:55:37.4548396Z   Getting requirements to build wheel: started
2026-01-03T21:55:37.7799615Z   Getting requirements to build wheel: finished with status 'done'
2026-01-03T21:55:37.7808909Z   Preparing metadata (pyproject.toml): started
2026-01-03T21:55:37.9650275Z   Preparing metadata (pyproject.toml): finished with status 'done'
2026-01-03T21:55:37.9964643Z Collecting acme==3.0.1 (from hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.0010479Z   Downloading acme-3.0.1-py3-none-any.whl.metadata (1.4 kB)
2026-01-03T21:55:38.0443307Z Collecting pycognito==2024.5.1 (from hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.0548883Z   Downloading pycognito-2024.5.1-py3-none-any.whl.metadata (24 kB)
2026-01-03T21:55:38.0805630Z Collecting snitun==0.39.1 (from hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.0851505Z   Downloading snitun-0.39.1-py3-none-any.whl.metadata (4.5 kB)
2026-01-03T21:55:38.1385606Z Collecting josepy<2,>=1.13.0 (from acme==3.0.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.1417903Z   Downloading josepy-1.15.0-py3-none-any.whl.metadata (1.7 kB)
2026-01-03T21:55:38.1634673Z Collecting pyrfc3339 (from acme==3.0.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.1664269Z   Downloading pyrfc3339-2.1.0-py3-none-any.whl.metadata (2.8 kB)
2026-01-03T21:55:38.3014540Z Collecting setuptools>=41.6.0 (from acme==3.0.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.3028788Z   Using cached setuptools-80.9.0-py3-none-any.whl.metadata (6.6 kB)
2026-01-03T21:55:38.6170952Z Collecting habluetooth>=3.0 (from home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.6214307Z   Downloading habluetooth-5.8.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (5.3 kB)
2026-01-03T21:55:38.6439512Z Collecting anyio (from httpx==0.27.2->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.6467623Z   Downloading anyio-4.12.0-py3-none-any.whl.metadata (4.3 kB)
2026-01-03T21:55:38.6667442Z Collecting httpcore==1.* (from httpx==0.27.2->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.6697529Z   Downloading httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
2026-01-03T21:55:38.6821011Z Collecting sniffio (from httpx==0.27.2->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.6851632Z   Downloading sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
2026-01-03T21:55:38.7399551Z Collecting MarkupSafe>=2.0 (from Jinja2==3.1.5->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.7431815Z   Downloading markupsafe-3.0.3-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (2.7 kB)
2026-01-03T21:55:38.7570373Z Collecting boolean.py>=4.0 (from license-expression==30.4.0->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.7597643Z   Downloading boolean_py-5.0-py3-none-any.whl.metadata (2.3 kB)
2026-01-03T21:55:38.7758007Z Requirement already satisfied: pip>=24.2 in /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages (from pipdeptree==2.23.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3)) (25.3)
2026-01-03T21:55:38.8436523Z Collecting psutil (from psutil-home-assistant==0.0.1->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:38.8469335Z   Downloading psutil-7.2.1-cp36-abi3-manylinux2010_x86_64.manylinux_2_12_x86_64.manylinux_2_28_x86_64.whl.metadata (22 kB)
2026-01-03T21:55:39.2078748Z Collecting boto3>=1.10.49 (from pycognito==2024.5.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:39.2110160Z   Downloading boto3-1.42.21-py3-none-any.whl.metadata (6.8 kB)
2026-01-03T21:55:39.2267625Z Collecting envs>=1.3 (from pycognito==2024.5.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:39.2303847Z   Downloading envs-1.4-py3-none-any.whl.metadata (842 bytes)
2026-01-03T21:55:39.2534744Z Collecting annotated-types>=0.6.0 (from pydantic==2.10.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:39.2564971Z   Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
2026-01-03T21:55:40.0237021Z Collecting pydantic-core==2.27.2 (from pydantic==2.10.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.0268800Z   Downloading pydantic_core-2.27.2-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.6 kB)
2026-01-03T21:55:40.2134276Z Collecting termcolor>=2.1.0 (from pytest-sugar==1.0.0->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.2166721Z   Downloading termcolor-3.3.0-py3-none-any.whl.metadata (6.5 kB)
2026-01-03T21:55:40.2374877Z Collecting execnet>=2.1 (from pytest-xdist==3.6.1->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.2404075Z   Downloading execnet-2.1.2-py3-none-any.whl.metadata (2.9 kB)
2026-01-03T21:55:40.2528052Z Collecting text-unidecode>=1.3 (from python-slugify==8.0.4->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.2557784Z   Downloading text_unidecode-1.3-py2.py3-none-any.whl.metadata (2.4 kB)
2026-01-03T21:55:40.3411683Z Collecting charset-normalizer<4,>=2 (from requests==2.32.3->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.3443443Z   Downloading charset_normalizer-3.4.4-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (37 kB)
2026-01-03T21:55:40.4165857Z Collecting async-timeout>=3.0.1 (from snitun==0.39.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.4195009Z   Downloading async_timeout-5.0.1-py3-none-any.whl.metadata (5.1 kB)
2026-01-03T21:55:40.5613313Z Collecting greenlet!=0.4.17 (from sqlalchemy->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.5649697Z   Downloading greenlet-3.3.0-cp312-cp312-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (4.1 kB)
2026-01-03T21:55:40.5949998Z Collecting h11>=0.16 (from httpcore==1.*->httpx==0.27.2->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:40.5977873Z   Downloading h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
2026-01-03T21:55:41.0494042Z Collecting botocore<1.43.0,>=1.42.21 (from boto3>=1.10.49->pycognito==2024.5.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.0525703Z   Downloading botocore-1.42.21-py3-none-any.whl.metadata (5.9 kB)
2026-01-03T21:55:41.0669072Z Collecting jmespath<2.0.0,>=0.7.1 (from boto3>=1.10.49->pycognito==2024.5.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.0699606Z   Downloading jmespath-1.0.1-py3-none-any.whl.metadata (7.6 kB)
2026-01-03T21:55:41.0871819Z Collecting s3transfer<0.17.0,>=0.16.0 (from boto3>=1.10.49->pycognito==2024.5.1->hass-nabucasa==0.87.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.0911514Z   Downloading s3transfer-0.16.0-py3-none-any.whl.metadata (1.7 kB)
2026-01-03T21:55:41.1270295Z Collecting six>=1.5 (from python-dateutil>=2.7->freezegun==1.5.1->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.1300769Z   Downloading six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
2026-01-03T21:55:41.2728318Z Collecting pycparser (from cffi>=1.12->cryptography==44.0.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.2759931Z   Downloading pycparser-2.23-py3-none-any.whl.metadata (993 bytes)
2026-01-03T21:55:41.3139399Z Collecting bleak>=1.0.1 (from habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.3184267Z   Downloading bleak-2.1.1-py3-none-any.whl.metadata (5.2 kB)
2026-01-03T21:55:41.3443009Z Collecting bleak-retry-connector>=4.2.0 (from habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.3480099Z   Downloading bleak_retry_connector-4.4.4-py3-none-any.whl.metadata (7.3 kB)
2026-01-03T21:55:41.3729595Z Collecting bluetooth-adapters>=2.1.0 (from habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.3769673Z   Downloading bluetooth_adapters-2.1.1-py3-none-any.whl.metadata (5.3 kB)
2026-01-03T21:55:41.3935294Z Collecting bluetooth-auto-recovery>=1.5.1 (from habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.3969706Z   Downloading bluetooth_auto_recovery-1.5.3-py3-none-any.whl.metadata (5.5 kB)
2026-01-03T21:55:41.4838929Z Collecting bluetooth-data-tools>=1.28.0 (from habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.4880935Z   Downloading bluetooth_data_tools-1.28.4-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (5.2 kB)
2026-01-03T21:55:41.5039783Z Collecting btsocket>=0.3.0 (from habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.5078593Z   Downloading btsocket-0.3.0-py2.py3-none-any.whl.metadata (7.0 kB)
2026-01-03T21:55:41.9510781Z Collecting dbus-fast>=2.30.2 (from habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:41.9554434Z   Downloading dbus_fast-3.1.2-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (10 kB)
2026-01-03T21:55:42.0208772Z Collecting aiooui>=0.1.1 (from bluetooth-adapters>=2.1.0->habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:42.0258795Z   Downloading aiooui-0.1.9-py3-none-any.whl.metadata (4.1 kB)
2026-01-03T21:55:42.0604890Z Collecting uart-devices>=0.1.0 (from bluetooth-adapters>=2.1.0->habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:42.0655625Z   Downloading uart_devices-0.1.1-py3-none-any.whl.metadata (4.9 kB)
2026-01-03T21:55:42.0762331Z Collecting usb-devices>=0.4.5 (from bluetooth-adapters>=2.1.0->habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:42.0803351Z   Downloading usb_devices-0.4.5-py3-none-any.whl.metadata (5.3 kB)
2026-01-03T21:55:42.0977464Z Collecting PyRIC>=0.1.6.3 (from bluetooth-auto-recovery>=1.5.1->habluetooth>=3.0->home-assistant-bluetooth==1.13.0->homeassistant==2025.1.4->pytest-homeassistant-custom-component>=0.13.0->-r requirements_test.txt (line 3))
2026-01-03T21:55:42.1017781Z   Downloading PyRIC-0.1.6.3.tar.gz (870 kB)
2026-01-03T21:55:42.1112082Z      â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 870.4/870.4 kB 118.8 MB/s  0:00:00
2026-01-03T21:55:42.1372164Z   Installing build dependencies: started
2026-01-03T21:55:42.8161696Z   Installing build dependencies: finished with status 'done'
2026-01-03T21:55:42.8167876Z   Getting requirements to build wheel: started
2026-01-03T21:55:43.1497708Z   Getting requirements to build wheel: finished with status 'done'
2026-01-03T21:55:43.1507366Z   Preparing metadata (pyproject.toml): started
2026-01-03T21:55:43.3364160Z   Preparing metadata (pyproject.toml): finished with status 'done'
2026-01-03T21:55:43.4734604Z Downloading pluggy-1.6.0-py3-none-any.whl (20 kB)
2026-01-03T21:55:43.4798138Z Downloading pytest_homeassistant_custom_component-0.13.205-py3-none-any.whl (60 kB)
2026-01-03T21:55:43.4871105Z Downloading pytest-8.3.4-py3-none-any.whl (343 kB)
2026-01-03T21:55:43.4944027Z Downloading pytest_asyncio-0.24.0-py3-none-any.whl (18 kB)
2026-01-03T21:55:43.5004077Z Downloading pytest_cov-6.0.0-py3-none-any.whl (22 kB)
2026-01-03T21:55:43.5059878Z Downloading coverage-7.6.8-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (239 kB)
2026-01-03T21:55:43.5130242Z Downloading freezegun-1.5.1-py3-none-any.whl (17 kB)
2026-01-03T21:55:43.5185754Z Downloading homeassistant-2025.1.4-py3-none-any.whl (40.0 MB)
2026-01-03T21:55:43.8278067Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 40.0/40.0 MB 130.5 MB/s  0:00:00
2026-01-03T21:55:43.8318127Z Downloading aiodns-3.2.0-py3-none-any.whl (5.7 kB)
2026-01-03T21:55:43.8375832Z Downloading aiohasupervisor-0.2.2b5-py3-none-any.whl (36 kB)
2026-01-03T21:55:43.8431712Z Downloading aiohttp-3.11.11-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.7 MB)
2026-01-03T21:55:43.8534344Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 1.7/1.7 MB 179.9 MB/s  0:00:00
2026-01-03T21:55:43.8571380Z Downloading orjson-3.10.12-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (131 kB)
2026-01-03T21:55:43.8670727Z Downloading yarl-1.18.3-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (336 kB)
2026-01-03T21:55:43.8741066Z Downloading aiohttp_cors-0.7.0-py3-none-any.whl (27 kB)
2026-01-03T21:55:43.8799878Z Downloading aiohttp_fast_zlib-0.2.0-py3-none-any.whl (8.4 kB)
2026-01-03T21:55:43.8852407Z Downloading aiozoneinfo-0.2.1-py3-none-any.whl (8.0 kB)
2026-01-03T21:55:43.8906094Z Downloading astral-2.2-py2.py3-none-any.whl (30 kB)
2026-01-03T21:55:43.8960469Z Downloading async_interrupt-1.2.0-py3-none-any.whl (8.9 kB)
2026-01-03T21:55:43.9020970Z Downloading atomicwrites_homeassistant-1.4.1-py2.py3-none-any.whl (7.1 kB)
2026-01-03T21:55:43.9066174Z Downloading attrs-24.2.0-py3-none-any.whl (63 kB)
2026-01-03T21:55:43.9124732Z Downloading awesomeversion-24.6.0-py3-none-any.whl (14 kB)
2026-01-03T21:55:43.9168191Z Downloading bcrypt-4.2.0-cp39-abi3-manylinux_2_28_x86_64.whl (273 kB)
2026-01-03T21:55:43.9251676Z Downloading ciso8601-2.3.2-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (40 kB)
2026-01-03T21:55:43.9309006Z Downloading cronsim-2.6-py3-none-any.whl (13 kB)
2026-01-03T21:55:43.9377459Z Downloading cryptography-44.0.0-cp39-abi3-manylinux_2_28_x86_64.whl (4.2 MB)
2026-01-03T21:55:43.9567633Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 4.2/4.2 MB 238.6 MB/s  0:00:00
2026-01-03T21:55:43.9605262Z Downloading fnv_hash_fast-1.0.2-cp312-cp312-manylinux_2_17_x86_64.manylinux_2_5_x86_64.manylinux1_x86_64.manylinux2014_x86_64.whl (154 kB)
2026-01-03T21:55:44.0037147Z Downloading hass_nabucasa-0.87.0-py3-none-any.whl (56 kB)
2026-01-03T21:55:44.0162532Z Downloading webrtc_models-0.3.0-py3-none-any.whl (7.5 kB)
2026-01-03T21:55:44.0217411Z Downloading acme-3.0.1-py3-none-any.whl (95 kB)
2026-01-03T21:55:44.0290871Z Downloading home_assistant_bluetooth-1.13.0-py3-none-any.whl (7.9 kB)
2026-01-03T21:55:44.0337173Z Downloading httpx-0.27.2-py3-none-any.whl (76 kB)
2026-01-03T21:55:44.0397378Z Downloading ifaddr-0.2.0-py3-none-any.whl (12 kB)
2026-01-03T21:55:44.0450220Z Downloading jinja2-3.1.5-py3-none-any.whl (134 kB)
2026-01-03T21:55:44.0513571Z Downloading license_expression-30.4.0-py3-none-any.whl (110 kB)
2026-01-03T21:55:44.0604891Z Downloading lru_dict-1.3.0-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (32 kB)
2026-01-03T21:55:44.0666520Z Downloading numpy-2.2.0-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (16.1 MB)
2026-01-03T21:55:44.2408124Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 16.1/16.1 MB 93.6 MB/s  0:00:00
2026-01-03T21:55:44.2452029Z Downloading pillow-11.0.0-cp312-cp312-manylinux_2_28_x86_64.whl (4.4 MB)
2026-01-03T21:55:44.2653054Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 4.4/4.4 MB 234.2 MB/s  0:00:00
2026-01-03T21:55:44.2711202Z Downloading pipdeptree-2.23.4-py3-none-any.whl (32 kB)
2026-01-03T21:55:44.2770962Z Downloading propcache-0.2.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (243 kB)
2026-01-03T21:55:44.2844479Z Downloading psutil_home_assistant-0.0.1-py3-none-any.whl (6.3 kB)
2026-01-03T21:55:44.2905706Z Downloading pycognito-2024.5.1-py3-none-any.whl (26 kB)
2026-01-03T21:55:44.2961198Z Downloading pydantic-2.10.4-py3-none-any.whl (431 kB)
2026-01-03T21:55:44.3044839Z Downloading pydantic_core-2.27.2-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)
2026-01-03T21:55:44.3163283Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 2.0/2.0 MB 184.9 MB/s  0:00:00
2026-01-03T21:55:44.3192858Z Downloading PyJWT-2.10.1-py3-none-any.whl (22 kB)
2026-01-03T21:55:44.3250432Z Downloading pylint_per_file_ignores-1.3.2-py3-none-any.whl (4.7 kB)
2026-01-03T21:55:44.3298098Z Downloading pyOpenSSL-24.3.0-py3-none-any.whl (56 kB)
2026-01-03T21:55:44.3354378Z Downloading pytest_aiohttp-1.0.5-py3-none-any.whl (8.5 kB)
2026-01-03T21:55:44.3410682Z Downloading pytest_freezer-0.4.8-py3-none-any.whl (3.2 kB)
2026-01-03T21:55:44.3471365Z Downloading pytest_github_actions_annotate_failures-0.2.0-py3-none-any.whl (5.5 kB)
2026-01-03T21:55:44.3523505Z Downloading pytest_picked-0.5.0-py3-none-any.whl (6.6 kB)
2026-01-03T21:55:44.3576171Z Downloading pytest_socket-0.7.0-py3-none-any.whl (6.8 kB)
2026-01-03T21:55:44.3635307Z Downloading pytest_sugar-1.0.0-py3-none-any.whl (10 kB)
2026-01-03T21:55:44.3695805Z Downloading pytest_timeout-2.3.1-py3-none-any.whl (14 kB)
2026-01-03T21:55:44.3741291Z Downloading pytest_unordered-0.6.1-py3-none-any.whl (6.0 kB)
2026-01-03T21:55:44.3788987Z Downloading pytest_xdist-3.6.1-py3-none-any.whl (46 kB)
2026-01-03T21:55:44.3837125Z Downloading python_slugify-8.0.4-py2.py3-none-any.whl (10 kB)
2026-01-03T21:55:44.3882199Z Downloading PyYAML-6.0.2-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (767 kB)
2026-01-03T21:55:44.3965514Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 767.5/767.5 kB 115.2 MB/s  0:00:00
2026-01-03T21:55:44.3994466Z Downloading requests-2.32.3-py3-none-any.whl (64 kB)
2026-01-03T21:55:44.4043637Z Downloading requests_mock-1.12.1-py2.py3-none-any.whl (27 kB)
2026-01-03T21:55:44.4105032Z Downloading respx-0.21.1-py2.py3-none-any.whl (25 kB)
2026-01-03T21:55:44.4161663Z Downloading securetar-2024.11.0-py3-none-any.whl (9.4 kB)
2026-01-03T21:55:44.4217392Z Downloading snitun-0.39.1-py3-none-any.whl (39 kB)
2026-01-03T21:55:44.4275178Z Downloading SQLAlchemy-2.0.36-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.2 MB)
2026-01-03T21:55:44.4522781Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 3.2/3.2 MB 134.3 MB/s  0:00:00
2026-01-03T21:55:44.4569794Z Downloading syrupy-4.8.0-py3-none-any.whl (49 kB)
2026-01-03T21:55:44.4628068Z Downloading tqdm-4.66.5-py3-none-any.whl (78 kB)
2026-01-03T21:55:44.4684676Z Downloading ulid_transform-1.0.2-cp312-cp312-manylinux_2_36_x86_64.whl (170 kB)
2026-01-03T21:55:44.4763044Z Downloading uv-0.5.8-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (14.8 MB)
2026-01-03T21:55:44.5694847Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 14.8/14.8 MB 164.7 MB/s  0:00:00
2026-01-03T21:55:44.5737679Z Downloading voluptuous-0.15.2-py3-none-any.whl (31 kB)
2026-01-03T21:55:44.5797442Z Downloading voluptuous_openapi-0.0.5-py3-none-any.whl (8.6 kB)
2026-01-03T21:55:44.5852975Z Downloading voluptuous_serialize-2.6.0-py3-none-any.whl (6.8 kB)
2026-01-03T21:55:44.5958186Z Downloading charset_normalizer-3.4.4-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (153 kB)
2026-01-03T21:55:44.6026054Z Downloading httpcore-1.0.9-py3-none-any.whl (78 kB)
2026-01-03T21:55:44.6099139Z Downloading idna-3.11-py3-none-any.whl (71 kB)
2026-01-03T21:55:44.6175455Z Downloading josepy-1.15.0-py3-none-any.whl (32 kB)
2026-01-03T21:55:44.6231689Z Downloading mashumaro-3.17-py3-none-any.whl (94 kB)
2026-01-03T21:55:44.6284118Z Downloading multidict-6.7.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (256 kB)
2026-01-03T21:55:44.6338202Z Downloading typing_extensions-4.15.0-py3-none-any.whl (44 kB)
2026-01-03T21:55:44.6393486Z Downloading urllib3-1.26.20-py2.py3-none-any.whl (144 kB)
2026-01-03T21:55:44.6454649Z Downloading aiohappyeyeballs-2.6.1-py3-none-any.whl (15 kB)
2026-01-03T21:55:44.6501847Z Downloading aiosignal-1.4.0-py3-none-any.whl (7.5 kB)
2026-01-03T21:55:44.6554270Z Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
2026-01-03T21:55:44.6604640Z Downloading async_timeout-5.0.1-py3-none-any.whl (6.2 kB)
2026-01-03T21:55:44.6652947Z Downloading boolean_py-5.0-py3-none-any.whl (26 kB)
2026-01-03T21:55:44.6701841Z Downloading boto3-1.42.21-py3-none-any.whl (140 kB)
2026-01-03T21:55:44.6756253Z Downloading botocore-1.42.21-py3-none-any.whl (14.6 MB)
2026-01-03T21:55:44.7316007Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 14.6/14.6 MB 267.2 MB/s  0:00:00
2026-01-03T21:55:44.7347915Z Downloading jmespath-1.0.1-py3-none-any.whl (20 kB)
2026-01-03T21:55:44.7399885Z Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
2026-01-03T21:55:44.7455798Z Downloading s3transfer-0.16.0-py3-none-any.whl (86 kB)
2026-01-03T21:55:44.7509376Z Downloading certifi-2025.11.12-py3-none-any.whl (159 kB)
2026-01-03T21:55:44.7563302Z Downloading cffi-2.0.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (219 kB)
2026-01-03T21:55:44.7638347Z Downloading envs-1.4-py3-none-any.whl (10 kB)
2026-01-03T21:55:44.7686249Z Downloading execnet-2.1.2-py3-none-any.whl (40 kB)
2026-01-03T21:55:44.7737718Z Downloading frozenlist-1.8.0-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl (242 kB)
2026-01-03T21:55:44.7794895Z Downloading greenlet-3.3.0-cp312-cp312-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (609 kB)
2026-01-03T21:55:44.7863465Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 609.9/609.9 kB 99.8 MB/s  0:00:00
2026-01-03T21:55:44.7893176Z Downloading h11-0.16.0-py3-none-any.whl (37 kB)
2026-01-03T21:55:44.7953705Z Downloading habluetooth-5.8.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (700 kB)
2026-01-03T21:55:44.8029316Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 700.1/700.1 kB 111.9 MB/s  0:00:00
2026-01-03T21:55:44.8068134Z Downloading bleak-2.1.1-py3-none-any.whl (141 kB)
2026-01-03T21:55:44.8131540Z Downloading bleak_retry_connector-4.4.4-py3-none-any.whl (18 kB)
2026-01-03T21:55:44.8189600Z Downloading bluetooth_adapters-2.1.1-py3-none-any.whl (20 kB)
2026-01-03T21:55:44.8273632Z Downloading aiooui-0.1.9-py3-none-any.whl (367 kB)
2026-01-03T21:55:44.8435507Z Downloading bluetooth_auto_recovery-1.5.3-py3-none-any.whl (11 kB)
2026-01-03T21:55:44.8499871Z Downloading bluetooth_data_tools-1.28.4-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (414 kB)
2026-01-03T21:55:44.8582071Z Downloading btsocket-0.3.0-py2.py3-none-any.whl (14 kB)
2026-01-03T21:55:44.8647554Z Downloading dbus_fast-3.1.2-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (839 kB)
2026-01-03T21:55:44.8740341Z    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 839.7/839.7 kB 132.5 MB/s  0:00:00
2026-01-03T21:55:44.8772770Z Downloading markupsafe-3.0.3-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (22 kB)
2026-01-03T21:55:44.8824260Z Downloading packaging-25.0-py3-none-any.whl (66 kB)
2026-01-03T21:55:44.8882778Z Downloading pycares-5.0.1-cp312-cp312-manylinux_2_26_x86_64.manylinux_2_28_x86_64.whl (223 kB)
2026-01-03T21:55:44.8946753Z Downloading pytz-2025.2-py2.py3-none-any.whl (509 kB)
2026-01-03T21:55:44.8995358Z Using cached setuptools-80.9.0-py3-none-any.whl (1.2 MB)
2026-01-03T21:55:44.9042219Z Downloading six-1.17.0-py2.py3-none-any.whl (11 kB)
2026-01-03T21:55:44.9088670Z Downloading termcolor-3.3.0-py3-none-any.whl (7.7 kB)
2026-01-03T21:55:44.9136292Z Downloading text_unidecode-1.3-py2.py3-none-any.whl (78 kB)
2026-01-03T21:55:44.9187606Z Downloading tzdata-2025.3-py2.py3-none-any.whl (348 kB)
2026-01-03T21:55:44.9261294Z Downloading uart_devices-0.1.1-py3-none-any.whl (4.8 kB)
2026-01-03T21:55:44.9327843Z Downloading usb_devices-0.4.5-py3-none-any.whl (5.3 kB)
2026-01-03T21:55:44.9376642Z Downloading anyio-4.12.0-py3-none-any.whl (113 kB)
2026-01-03T21:55:44.9457872Z Downloading iniconfig-2.3.0-py3-none-any.whl (7.5 kB)
2026-01-03T21:55:44.9503384Z Downloading psutil-7.2.1-cp36-abi3-manylinux2010_x86_64.manylinux_2_12_x86_64.manylinux_2_28_x86_64.whl (154 kB)
2026-01-03T21:55:44.9554561Z Downloading pycparser-2.23-py3-none-any.whl (118 kB)
2026-01-03T21:55:44.9607940Z Downloading pyrfc3339-2.1.0-py3-none-any.whl (6.8 kB)
2026-01-03T21:55:44.9655567Z Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
2026-01-03T21:55:45.3421132Z Building wheels for collected packages: mock-open, paho-mqtt, fnvhash, PyRIC
2026-01-03T21:55:45.3429561Z   Building wheel for mock-open (pyproject.toml): started
2026-01-03T21:55:45.5705091Z   Building wheel for mock-open (pyproject.toml): finished with status 'done'
2026-01-03T21:55:45.5711009Z   Created wheel for mock-open: filename=mock_open-1.4.0-py3-none-any.whl size=14643 sha256=cbb92a5b79f70f676923d210a33aed57adfdcf604643bc0d410116d38bc88d9a
2026-01-03T21:55:45.5713347Z   Stored in directory: /home/runner/.cache/pip/wheels/2d/cb/42/30f8e7ef326ebeeaac3942801463bafb76fb6573e8327eab99
2026-01-03T21:55:45.5738957Z   Building wheel for paho-mqtt (pyproject.toml): started
2026-01-03T21:55:45.8074041Z   Building wheel for paho-mqtt (pyproject.toml): finished with status 'done'
2026-01-03T21:55:45.8080679Z   Created wheel for paho-mqtt: filename=paho_mqtt-1.6.1-py3-none-any.whl size=62199 sha256=0fab52f5f3c6eeb8f2262d0a15c9a1bec119d02fda5e4ac2c9cf83abd7cadbd1
2026-01-03T21:55:45.8083009Z   Stored in directory: /home/runner/.cache/pip/wheels/23/d5/af/1f3cbcc350dec9d8e95040f388e0163d132eff0c9a453db659
2026-01-03T21:55:45.8132157Z   Building wheel for fnvhash (pyproject.toml): started
2026-01-03T21:55:46.0322024Z   Building wheel for fnvhash (pyproject.toml): finished with status 'done'
2026-01-03T21:55:46.0329211Z   Created wheel for fnvhash: filename=fnvhash-0.1.0-py3-none-any.whl size=2180 sha256=72ea9c5f7b2519bdb5bb5e4a9ab805fd116dd2396ac7c1303e48f8025fd8c629
2026-01-03T21:55:46.0331020Z   Stored in directory: /home/runner/.cache/pip/wheels/f3/f2/c9/9d2b575fa41b9c1f8b35131e1db072490bc6ff034ceb66eaca
2026-01-03T21:55:46.0353760Z   Building wheel for PyRIC (pyproject.toml): started
2026-01-03T21:55:46.3182377Z   Building wheel for PyRIC (pyproject.toml): finished with status 'done'
2026-01-03T21:55:46.3190795Z   Created wheel for PyRIC: filename=pyric-0.1.6.3-py2.py3-none-any.whl size=407978 sha256=42ba6d939bacef0280e9c28730a63fccfc51b6b3bac71d8b4e1819928be1ee8d
2026-01-03T21:55:46.3192858Z   Stored in directory: /home/runner/.cache/pip/wheels/71/5f/b2/33e36e10ea0e6b0dda30e364900611b0d428c72f9be83c3e38
2026-01-03T21:55:46.3213424Z Successfully built mock-open paho-mqtt fnvhash PyRIC
2026-01-03T21:55:46.7302309Z Installing collected packages: text-unidecode, pytz, PyRIC, paho-mqtt, mock-open, ifaddr, fnvhash, ciso8601, btsocket, boolean.py, voluptuous, uv, usb-devices, urllib3, ulid-transform, uart-devices, tzdata, typing-extensions, tqdm, termcolor, sniffio, six, setuptools, PyYAML, python-slugify, pyrfc3339, pylint-per-file-ignores, PyJWT, pycparser, psutil, propcache, pluggy, Pillow, packaging, orjson, numpy, multidict, MarkupSafe, lru-dict, license-expression, jmespath, iniconfig, idna, h11, greenlet, frozenlist, fnv-hash-fast, execnet, envs, dbus-fast, cronsim, coverage, charset-normalizer, certifi, bcrypt, awesomeversion, attrs, atomicwrites-homeassistant, async-timeout, async-interrupt, astral, annotated-types, aiooui, aiohappyeyeballs, yarl, voluptuous-serialize, voluptuous-openapi, sqlalchemy, requests, python-dateutil, pytest, pydantic-core, psutil-home-assistant, pipdeptree, mashumaro, Jinja2, httpcore, cffi, bleak, anyio, aiozoneinfo, aiosignal, webrtc-models, syrupy, requests-mock, pytest-xdist, pytest-unordered, pytest-timeout, pytest-sugar, pytest-socket, pytest-picked, pytest-github-actions-annotate-failures, pytest-cov, pytest-asyncio, pydantic, pycares, httpx, freezegun, cryptography, botocore, bluetooth-adapters, aiohttp, snitun, securetar, s3transfer, respx, pytest-freezer, pytest-aiohttp, pyOpenSSL, bluetooth-data-tools, bluetooth-auto-recovery, bleak-retry-connector, aiohttp-fast-zlib, aiohttp-cors, aiohasupervisor, aiodns, josepy, habluetooth, boto3, pycognito, home-assistant-bluetooth, acme, hass-nabucasa, homeassistant, pytest-homeassistant-custom-component
2026-01-03T21:56:09.5048699Z 
2026-01-03T21:56:09.5162124Z Successfully installed Jinja2-3.1.5 MarkupSafe-3.0.3 Pillow-11.0.0 PyJWT-2.10.1 PyRIC-0.1.6.3 PyYAML-6.0.2 acme-3.0.1 aiodns-3.2.0 aiohappyeyeballs-2.6.1 aiohasupervisor-0.2.2b5 aiohttp-3.11.11 aiohttp-cors-0.7.0 aiohttp-fast-zlib-0.2.0 aiooui-0.1.9 aiosignal-1.4.0 aiozoneinfo-0.2.1 annotated-types-0.7.0 anyio-4.12.0 astral-2.2 async-interrupt-1.2.0 async-timeout-5.0.1 atomicwrites-homeassistant-1.4.1 attrs-24.2.0 awesomeversion-24.6.0 bcrypt-4.2.0 bleak-2.1.1 bleak-retry-connector-4.4.4 bluetooth-adapters-2.1.1 bluetooth-auto-recovery-1.5.3 bluetooth-data-tools-1.28.4 boolean.py-5.0 boto3-1.42.21 botocore-1.42.21 btsocket-0.3.0 certifi-2025.11.12 cffi-2.0.0 charset-normalizer-3.4.4 ciso8601-2.3.2 coverage-7.6.8 cronsim-2.6 cryptography-44.0.0 dbus-fast-3.1.2 envs-1.4 execnet-2.1.2 fnv-hash-fast-1.0.2 fnvhash-0.1.0 freezegun-1.5.1 frozenlist-1.8.0 greenlet-3.3.0 h11-0.16.0 habluetooth-5.8.0 hass-nabucasa-0.87.0 home-assistant-bluetooth-1.13.0 homeassistant-2025.1.4 httpcore-1.0.9 httpx-0.27.2 idna-3.11 ifaddr-0.2.0 iniconfig-2.3.0 jmespath-1.0.1 josepy-1.15.0 license-expression-30.4.0 lru-dict-1.3.0 mashumaro-3.17 mock-open-1.4.0 multidict-6.7.0 numpy-2.2.0 orjson-3.10.12 packaging-25.0 paho-mqtt-1.6.1 pipdeptree-2.23.4 pluggy-1.6.0 propcache-0.2.1 psutil-7.2.1 psutil-home-assistant-0.0.1 pyOpenSSL-24.3.0 pycares-5.0.1 pycognito-2024.5.1 pycparser-2.23 pydantic-2.10.4 pydantic-core-2.27.2 pylint-per-file-ignores-1.3.2 pyrfc3339-2.1.0 pytest-8.3.4 pytest-aiohttp-1.0.5 pytest-asyncio-0.24.0 pytest-cov-6.0.0 pytest-freezer-0.4.8 pytest-github-actions-annotate-failures-0.2.0 pytest-homeassistant-custom-component-0.13.205 pytest-picked-0.5.0 pytest-socket-0.7.0 pytest-sugar-1.0.0 pytest-timeout-2.3.1 pytest-unordered-0.6.1 pytest-xdist-3.6.1 python-dateutil-2.9.0.post0 python-slugify-8.0.4 pytz-2025.2 requests-2.32.3 requests-mock-1.12.1 respx-0.21.1 s3transfer-0.16.0 securetar-2024.11.0 setuptools-80.9.0 six-1.17.0 sniffio-1.3.1 snitun-0.39.1 sqlalchemy-2.0.36 syrupy-4.8.0 termcolor-3.3.0 text-unidecode-1.3 tqdm-4.66.5 typing-extensions-4.15.0 tzdata-2025.3 uart-devices-0.1.1 ulid-transform-1.0.2 urllib3-1.26.20 usb-devices-0.4.5 uv-0.5.8 voluptuous-0.15.2 voluptuous-openapi-0.0.5 voluptuous-serialize-2.6.0 webrtc-models-0.3.0 yarl-1.18.3
2026-01-03T21:56:10.7639600Z ##[group]Run pytest tests/ -v --tb=short --cov=custom_components/thermostat_contact_sensors --cov-report=xml
2026-01-03T21:56:10.7640311Z [36;1mpytest tests/ -v --tb=short --cov=custom_components/thermostat_contact_sensors --cov-report=xml[0m
2026-01-03T21:56:10.7675736Z shell: /usr/bin/bash -e {0}
2026-01-03T21:56:10.7675963Z env:
2026-01-03T21:56:10.7676207Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:56:10.7676605Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib/pkgconfig
2026-01-03T21:56:10.7676986Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:56:10.7677328Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:56:10.7677670Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-03T21:56:10.7678003Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib
2026-01-03T21:56:10.7678477Z ##[endgroup]
2026-01-03T21:56:14.0394575Z ============================= test session starts ==============================
2026-01-03T21:56:14.0395581Z platform linux -- Python 3.12.12, pytest-8.3.4, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.12.12/x64/bin/python
2026-01-03T21:56:14.0396400Z cachedir: .pytest_cache
2026-01-03T21:56:14.0397049Z rootdir: /home/runner/work/ha-thermostat-contact-sensors/ha-thermostat-contact-sensors
2026-01-03T21:56:14.0397766Z configfile: pytest.ini
2026-01-03T21:56:14.0399421Z plugins: github-actions-annotate-failures-0.2.0, asyncio-0.24.0, socket-0.7.0, requests-mock-1.12.1, cov-6.0.0, xdist-3.6.1, anyio-4.12.0, respx-0.21.1, timeout-2.3.1, aiohttp-1.0.5, pytest_freezer-0.4.8, homeassistant-custom-component-0.13.205, picked-0.5.0, unordered-0.6.1, syrupy-4.8.0, sugar-1.0.0
2026-01-03T21:56:14.0401313Z asyncio: mode=Mode.AUTO, default_loop_scope=function
2026-01-03T21:56:16.0208931Z collecting ... collected 376 items
2026-01-03T21:56:16.0209340Z 
2026-01-03T21:56:16.2924055Z tests/test_binary_sensor.py::test_binary_sensor_creation PASSED          [  0%]
2026-01-03T21:56:16.3521909Z tests/test_binary_sensor.py::test_binary_sensor_unique_id PASSED         [  0%]
2026-01-03T21:56:17.4143197Z tests/test_binary_sensor.py::test_binary_sensor_state_when_paused PASSED [  0%]
2026-01-03T21:56:17.4731621Z tests/test_binary_sensor.py::test_binary_sensor_attributes PASSED        [  1%]
2026-01-03T21:56:18.5350480Z tests/test_binary_sensor.py::test_binary_sensor_triggered_by_attribute PASSED [  1%]
2026-01-03T21:56:18.5937062Z tests/test_binary_sensor.py::test_binary_sensor_device_info PASSED       [  1%]
2026-01-03T21:56:18.6522585Z tests/test_binary_sensor.py::test_binary_sensor_restores_state PASSED    [  1%]
2026-01-03T21:56:18.7709078Z tests/test_config_flow.py::test_config_flow_user_init PASSED             [  2%]
2026-01-03T21:56:18.8350034Z tests/test_config_flow.py::test_config_flow_user_success PASSED          [  2%]
2026-01-03T21:56:18.8645942Z tests/test_config_flow.py::test_config_flow_no_thermostat_error PASSED   [  2%]
2026-01-03T21:56:18.9285826Z tests/test_config_flow.py::test_config_flow_duplicate_thermostat PASSED  [  2%]
2026-01-03T21:56:18.9938895Z tests/test_config_flow.py::test_config_flow_default_values PASSED        [  3%]
2026-01-03T21:56:19.0584590Z tests/test_config_flow.py::test_config_flow_with_notification_service PASSED [  3%]
2026-01-03T21:56:19.1245416Z tests/test_config_flow.py::test_config_flow_auto_discovers_areas PASSED  [  3%]
2026-01-03T21:56:19.2301203Z tests/test_coordinator.py::TestCoordinatorSetup::test_coordinator_setup PASSED [  3%]
2026-01-03T21:56:19.2518557Z tests/test_coordinator.py::TestCoordinatorSetup::test_coordinator_shutdown PASSED [  4%]
2026-01-03T21:56:19.2737661Z tests/test_coordinator.py::TestCoordinatorSetup::test_coordinator_initial_open_sensors PASSED [  4%]
2026-01-03T21:56:19.2961209Z tests/test_coordinator.py::TestSensorStateChanges::test_sensor_open_starts_timer PASSED [  4%]
2026-01-03T21:56:19.3204723Z tests/test_coordinator.py::TestSensorStateChanges::test_sensor_close_before_timeout_cancels_timer PASSED [  5%]
2026-01-03T21:56:19.3432867Z tests/test_coordinator.py::TestSensorStateChanges::test_multiple_sensors_open PASSED [  5%]
2026-01-03T21:56:19.3651818Z tests/test_coordinator.py::TestSensorStateChanges::test_sensor_unavailable_ignored PASSED [  5%]
2026-01-03T21:56:20.3904195Z tests/test_coordinator.py::TestThermostatPausing::test_thermostat_pauses_after_timeout PASSED [  5%]
2026-01-03T21:56:21.4178624Z tests/test_coordinator.py::TestThermostatPausing::test_thermostat_stores_previous_mode PASSED [  6%]
2026-01-03T21:56:21.4418977Z tests/test_coordinator.py::TestThermostatPausing::test_no_pause_if_sensor_closes_before_timeout PASSED [  6%]
2026-01-03T21:56:23.4709712Z tests/test_coordinator.py::TestThermostatResuming::test_thermostat_resumes_after_all_closed PASSED [  6%]
2026-01-03T21:56:24.4995927Z tests/test_coordinator.py::TestThermostatResuming::test_close_timer_cancelled_if_sensor_reopens PASSED [  6%]
2026-01-03T21:56:26.5307125Z tests/test_coordinator.py::TestThermostatResuming::test_resume_restores_previous_mode PASSED [  7%]
2026-01-03T21:56:27.5568873Z tests/test_coordinator.py::TestNotifications::test_notification_sent_on_pause PASSED [  7%]
2026-01-03T21:56:29.5867253Z tests/test_coordinator.py::TestNotifications::test_notification_sent_on_resume PASSED [  7%]
2026-01-03T21:56:30.6136723Z tests/test_coordinator.py::TestNotifications::test_no_notification_when_disabled PASSED [  7%]
2026-01-03T21:56:30.6391977Z tests/test_coordinator.py::TestOpenSensorCounts::test_open_count PASSED  [  8%]
2026-01-03T21:56:30.6619840Z tests/test_coordinator.py::TestOpenSensorCounts::test_open_doors_count PASSED [  8%]
2026-01-03T21:56:30.6846663Z tests/test_coordinator.py::TestOpenSensorCounts::test_open_windows_count PASSED [  8%]
2026-01-03T21:56:30.7067040Z tests/test_coordinator.py::TestOptionsUpdate::test_update_options PASSED [  9%]
2026-01-03T21:56:31.7341183Z tests/test_coordinator.py::TestManualOverride::test_manual_on_while_paused_clears_paused_state PASSED [  9%]
2026-01-03T21:56:32.7618863Z tests/test_coordinator.py::TestManualOverride::test_manual_on_while_paused_cancels_close_timer PASSED [  9%]
2026-01-03T21:56:34.7938928Z tests/test_coordinator.py::TestManualOverride::test_manual_off_while_paused_updates_previous_mode PASSED [  9%]
2026-01-03T21:56:34.8175105Z tests/test_coordinator.py::TestManualOverride::test_tracks_last_known_hvac_mode PASSED [ 10%]
2026-01-03T21:56:35.8474110Z tests/test_coordinator.py::TestManualOverride::test_respects_user_mode_change_for_restore PASSED [ 10%]
2026-01-03T21:56:35.9057959Z tests/test_coordinator.py::TestTemperatureSensorStateChange::test_temp_sensor_listener_subscribed PASSED [ 10%]
2026-01-03T21:56:35.9640586Z tests/test_coordinator.py::TestTemperatureSensorStateChange::test_temp_sensor_listener_cleanup PASSED [ 10%]
2026-01-03T21:56:36.0323550Z tests/test_coordinator.py::TestTemperatureSensorStateChange::test_temp_sensor_change_triggers_update PASSED [ 11%]
2026-01-03T21:56:36.0924159Z tests/test_coordinator.py::TestTemperatureSensorStateChange::test_temp_sensor_unavailable_ignored PASSED [ 11%]
2026-01-03T21:56:36.2198379Z tests/test_coordinator.py::TestTimerRecalculation::test_triggering_sensor_closes_others_open_recalculates_timer PASSED [ 11%]
2026-01-03T21:56:36.2461219Z tests/test_coordinator.py::TestTimerRecalculation::test_all_sensors_close_before_timeout_cancels_timer PASSED [ 11%]
2026-01-03T21:56:36.3220916Z tests/test_coordinator.py::TestTimerRecalculation::test_non_triggering_sensor_closes_no_recalculation PASSED [ 12%]
2026-01-03T21:56:37.4519780Z tests/test_coordinator.py::TestTimerRecalculation::test_recalculation_triggers_immediate_if_already_expired PASSED [ 12%]
2026-01-03T21:56:37.5774297Z tests/test_coordinator.py::TestTimerRecalculation::test_open_sensor_timestamps_preserved_on_update PASSED [ 12%]
2026-01-03T21:56:37.7356603Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_returns_data PASSED [ 13%]
2026-01-03T21:56:37.7978223Z 
2026-01-03T21:56:37.8009245Z ##[error]TestDiagnostics.test_diagnostics_config_entry_info

assert 3 == 2
2026-01-03T21:56:37.8137201Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_config_entry_info FAILED [ 13%]
2026-01-03T21:56:37.8722890Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_coordinator_state PASSED [ 13%]
2026-01-03T21:56:37.9297943Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_thermostat_info PASSED [ 13%]
2026-01-03T21:56:37.9888267Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_contact_sensors PASSED [ 14%]
2026-01-03T21:56:38.0454876Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_entities_list PASSED [ 14%]
2026-01-03T21:56:38.1038941Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_redacts_notify_service PASSED [ 14%]
2026-01-03T21:56:38.1629021Z tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_occupancy_state PASSED [ 14%]
2026-01-03T21:56:38.3155889Z tests/test_init.py::test_setup_entry PASSED                              [ 15%]
2026-01-03T21:56:38.3731476Z tests/test_init.py::test_unload_entry PASSED                             [ 15%]
2026-01-03T21:56:38.4507620Z tests/test_init.py::test_reload_entry PASSED                             [ 15%]
2026-01-03T21:56:38.5072397Z tests/test_init.py::test_runtime_data_created PASSED                     [ 15%]
2026-01-03T21:56:38.5650087Z tests/test_init.py::test_platforms_setup PASSED                          [ 16%]
2026-01-03T21:56:38.6224217Z tests/test_init.py::test_device_created PASSED                           [ 16%]
2026-01-03T21:56:38.7026685Z tests/test_init.py::test_options_update_listener PASSED                  [ 16%]
2026-01-03T21:56:38.7243387Z 
2026-01-03T21:56:38.7246208Z ##[error]test_multiple_config_entries

NameError: name 'CONF_AREA_ID' is not defined
2026-01-03T21:56:38.7293274Z tests/test_init.py::test_multiple_config_entries FAILED                  [ 17%]
2026-01-03T21:56:38.7870576Z tests/test_init.py::test_coordinator_cleanup_on_unload PASSED            [ 17%]
2026-01-03T21:56:38.9014068Z tests/test_integration.py::TestContactSensorEffects::test_contact_open_pauses_thermostat_after_timeout PASSED [ 17%]
2026-01-03T21:56:38.9568606Z 
2026-01-03T21:56:38.9572134Z ##[error]TestContactSensorEffects.test_contact_close_resumes_thermostat_after_timeout

AssertionError: assert 'off' == <HVACMode.HEAT: 'heat'>
  
  - heat
  + off
2026-01-03T21:56:38.9951721Z tests/test_integration.py::TestContactSensorEffects::test_contact_close_resumes_thermostat_after_timeout FAILED [ 17%]
2026-01-03T21:56:38.9955054Z tests/test_integration.py::TestContactSensorEffects::test_contact_close_resumes_thermostat_after_timeout ERROR [ 17%]
2026-01-03T21:56:39.0281288Z tests/test_integration.py::TestContactSensorEffects::test_multiple_contacts_open_one_close_stays_paused PASSED [ 18%]
2026-01-03T21:56:39.0566824Z tests/test_integration.py::TestOccupancyVentEffects::test_occupied_room_opens_vents_after_delay PASSED [ 18%]
2026-01-03T21:56:39.0836016Z tests/test_integration.py::TestOccupancyVentEffects::test_occupied_room_below_delay_keeps_vents_closed PASSED [ 18%]
2026-01-03T21:56:39.1102483Z tests/test_integration.py::TestOccupancyVentEffects::test_inactive_room_closes_vents PASSED [ 18%]
2026-01-03T21:56:39.1386664Z tests/test_integration.py::TestTemperatureEffects::test_satiated_room_closes_vents PASSED [ 19%]
2026-01-03T21:56:39.1669833Z tests/test_integration.py::TestTemperatureEffects::test_unsatiated_room_keeps_vents_open PASSED [ 19%]
2026-01-03T21:56:39.1943409Z tests/test_integration.py::TestContactSensorPausePrecedence::test_pause_prevents_thermostat_turn_on_even_when_unsatiated PASSED [ 19%]
2026-01-03T21:56:39.2245018Z tests/test_integration.py::TestContactSensorPausePrecedence::test_resume_immediately_evaluates_thermostat_state PASSED [ 19%]
2026-01-03T21:56:39.2559379Z tests/test_integration.py::TestContactSensorPausePrecedence::test_satiated_room_stays_off_after_resume PASSED [ 20%]
2026-01-03T21:56:39.3870099Z tests/test_integration.py::TestTimerRecalculationIntegration::test_garage_opens_theater_opens_garage_closes_timer_recalculates PASSED [ 20%]
2026-01-03T21:56:39.5198590Z tests/test_integration.py::TestTimerRecalculationIntegration::test_multiple_sensors_close_in_sequence PASSED [ 20%]
2026-01-03T21:56:39.5462540Z tests/test_integration.py::TestCriticalTemperatureEffects::test_critical_cold_room_opens_vents PASSED [ 21%]
2026-01-03T21:56:39.5719994Z tests/test_integration.py::TestCriticalTemperatureEffects::test_critical_room_counts_toward_minimum_vents PASSED [ 21%]
2026-01-03T21:56:39.5989378Z tests/test_integration.py::TestMinimumVentsOpen::test_minimum_vents_kept_open_when_all_inactive PASSED [ 21%]
2026-01-03T21:56:39.6255166Z tests/test_integration.py::TestMinimumVentsOpen::test_vent_group_counts_as_multiple_vents PASSED [ 21%]
2026-01-03T21:56:39.6524617Z tests/test_integration.py::TestFullSystemIntegration::test_scenario_morning_wakeup PASSED [ 22%]
2026-01-03T21:56:39.6804387Z tests/test_integration.py::TestFullSystemIntegration::test_scenario_window_opened_during_heating PASSED [ 22%]
2026-01-03T21:56:39.7122798Z tests/test_integration.py::TestFullSystemIntegration::test_scenario_all_rooms_reach_temperature PASSED [ 22%]
2026-01-03T21:56:39.7383859Z tests/test_integration.py::TestFullSystemIntegration::test_scenario_mixed_room_states PASSED [ 22%]
2026-01-03T21:56:39.7648210Z tests/test_integration.py::TestEdgeCases::test_thermostat_unavailable PASSED [ 23%]
2026-01-03T21:56:39.7920538Z tests/test_integration.py::TestEdgeCases::test_temperature_sensor_unavailable PASSED [ 23%]
2026-01-03T21:56:39.8185933Z tests/test_integration.py::TestEdgeCases::test_vent_unavailable PASSED   [ 23%]
2026-01-03T21:56:39.8436514Z tests/test_integration.py::TestEdgeCases::test_empty_areas_config PASSED [ 23%]
2026-01-03T21:56:39.8746877Z tests/test_integration.py::TestEdgeCases::test_rapid_occupancy_changes PASSED [ 24%]
2026-01-03T21:56:39.9843085Z tests/test_occupancy.py::TestIsBinarySensorOccupied::test_none_state_returns_false PASSED [ 24%]
2026-01-03T21:56:40.0013306Z tests/test_occupancy.py::TestIsBinarySensorOccupied::test_on_state_returns_true PASSED [ 24%]
2026-01-03T21:56:40.0183111Z tests/test_occupancy.py::TestIsBinarySensorOccupied::test_off_state_returns_false PASSED [ 25%]
2026-01-03T21:56:40.0350432Z tests/test_occupancy.py::TestIsBinarySensorOccupied::test_unavailable_state_returns_false PASSED [ 25%]
2026-01-03T21:56:40.0529476Z tests/test_occupancy.py::TestIsBinarySensorOccupied::test_unknown_state_returns_false PASSED [ 25%]
2026-01-03T21:56:40.0691059Z tests/test_occupancy.py::TestIsSensorOccupied::test_none_state_returns_false PASSED [ 25%]
2026-01-03T21:56:40.0855065Z tests/test_occupancy.py::TestIsSensorOccupied::test_previous_valid_state_on_returns_true PASSED [ 26%]
2026-01-03T21:56:40.1019906Z tests/test_occupancy.py::TestIsSensorOccupied::test_previous_valid_state_off_returns_false PASSED [ 26%]
2026-01-03T21:56:40.1186074Z tests/test_occupancy.py::TestIsSensorOccupied::test_no_previous_valid_state_attribute_returns_false PASSED [ 26%]
2026-01-03T21:56:40.1351084Z tests/test_occupancy.py::TestIsSensorOccupied::test_unavailable_state_returns_false PASSED [ 26%]
2026-01-03T21:56:40.1531669Z tests/test_occupancy.py::TestIsSensorOccupied::test_unknown_state_returns_false PASSED [ 27%]
2026-01-03T21:56:40.1701730Z tests/test_occupancy.py::TestGetSensorOccupancyState::test_binary_sensor_on PASSED [ 27%]
2026-01-03T21:56:40.1868028Z tests/test_occupancy.py::TestGetSensorOccupancyState::test_binary_sensor_off PASSED [ 27%]
2026-01-03T21:56:40.2036748Z tests/test_occupancy.py::TestGetSensorOccupancyState::test_sensor_with_previous_valid_state_on PASSED [ 27%]
2026-01-03T21:56:40.2206118Z tests/test_occupancy.py::TestGetSensorOccupancyState::test_sensor_with_previous_valid_state_off PASSED [ 28%]
2026-01-03T21:56:40.2371178Z tests/test_occupancy.py::TestGetSensorOccupancyState::test_none_state_returns_false PASSED [ 28%]
2026-01-03T21:56:40.2554020Z tests/test_occupancy.py::TestAreaOccupancyState::test_is_occupied_with_no_sensors PASSED [ 28%]
2026-01-03T21:56:40.2717764Z tests/test_occupancy.py::TestAreaOccupancyState::test_is_occupied_with_binary_sensor PASSED [ 28%]
2026-01-03T21:56:40.2879687Z tests/test_occupancy.py::TestAreaOccupancyState::test_is_occupied_with_regular_sensor PASSED [ 29%]
2026-01-03T21:56:40.3044280Z tests/test_occupancy.py::TestAreaOccupancyState::test_is_occupied_with_both_sensor_types PASSED [ 29%]
2026-01-03T21:56:40.3208910Z tests/test_occupancy.py::TestAreaOccupancyState::test_all_sensors PASSED [ 29%]
2026-01-03T21:56:40.3372204Z tests/test_occupancy.py::TestAreaOccupancyState::test_occupied_sensor_count PASSED [ 30%]
2026-01-03T21:56:40.3551950Z tests/test_occupancy.py::TestAreaOccupancyState::test_total_sensor_count PASSED [ 30%]
2026-01-03T21:56:40.3715311Z tests/test_occupancy.py::TestAreaOccupancyState::test_get_occupancy_duration_when_not_occupied PASSED [ 30%]
2026-01-03T21:56:40.3878499Z tests/test_occupancy.py::TestAreaOccupancyState::test_get_occupancy_duration_when_occupied PASSED [ 30%]
2026-01-03T21:56:40.4041962Z tests/test_occupancy.py::TestAreaOccupancyState::test_get_occupancy_minutes PASSED [ 31%]
2026-01-03T21:56:40.4204154Z tests/test_occupancy.py::TestAreaOccupancyState::test_get_occupancy_minutes_when_not_occupied PASSED [ 31%]
2026-01-03T21:56:40.4387509Z tests/test_occupancy.py::TestRoomOccupancyTrackerInit::test_init_with_default_min_occupancy PASSED [ 31%]
2026-01-03T21:56:40.4588345Z tests/test_occupancy.py::TestRoomOccupancyTrackerInit::test_init_with_custom_min_occupancy PASSED [ 31%]
2026-01-03T21:56:40.4769260Z tests/test_occupancy.py::TestRoomOccupancyTrackerInit::test_min_occupancy_minutes_setter PASSED [ 32%]
2026-01-03T21:56:40.4950312Z tests/test_occupancy.py::TestRoomOccupancyTrackerInit::test_disabled_areas_are_not_tracked PASSED [ 32%]
2026-01-03T21:56:40.5134660Z tests/test_occupancy.py::TestRoomOccupancyTrackerInit::test_all_tracked_sensors PASSED [ 32%]
2026-01-03T21:56:40.5326260Z tests/test_occupancy.py::TestRoomOccupancyTrackerSetupShutdown::test_setup_subscribes_to_state_changes PASSED [ 32%]
2026-01-03T21:56:40.5535115Z tests/test_occupancy.py::TestRoomOccupancyTrackerSetupShutdown::test_shutdown_unsubscribes PASSED [ 33%]
2026-01-03T21:56:40.5745045Z tests/test_occupancy.py::TestRoomOccupancyTrackerSetupShutdown::test_setup_scans_initial_sensor_states PASSED [ 33%]
2026-01-03T21:56:40.5939816Z tests/test_occupancy.py::TestRoomOccupancyTrackerOccupancy::test_binary_sensor_on_makes_area_occupied PASSED [ 33%]
2026-01-03T21:56:40.6136046Z tests/test_occupancy.py::TestRoomOccupancyTrackerOccupancy::test_sensor_previous_valid_state_on_makes_area_occupied PASSED [ 34%]
2026-01-03T21:56:40.6344297Z tests/test_occupancy.py::TestRoomOccupancyTrackerOccupancy::test_multiple_sensors_or_logic PASSED [ 34%]
2026-01-03T21:56:40.7569104Z tests/test_occupancy.py::TestRoomOccupancyTrackerOccupancy::test_continuous_occupancy_with_sensor_handoff PASSED [ 34%]
2026-01-03T21:56:40.7791129Z tests/test_occupancy.py::TestRoomOccupancyTrackerOccupancy::test_all_sensors_off_clears_occupancy PASSED [ 34%]
2026-01-03T21:56:40.7990282Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_newly_occupied_area_is_not_active PASSED [ 35%]
2026-01-03T21:56:40.8184284Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_area_becomes_active_after_threshold PASSED [ 35%]
2026-01-03T21:56:40.8375994Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_area_not_active_before_threshold PASSED [ 35%]
2026-01-03T21:56:40.8567053Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_changing_min_occupancy_updates_active_status PASSED [ 35%]
2026-01-03T21:56:40.8751305Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_init_with_default_grace_period PASSED [ 36%]
2026-01-03T21:56:40.8936165Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_init_with_custom_grace_period PASSED [ 36%]
2026-01-03T21:56:40.9136141Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_grace_period_minimum_enforced_on_init PASSED [ 36%]
2026-01-03T21:56:40.9319332Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_grace_period_minimum_enforced_on_setter PASSED [ 36%]
2026-01-03T21:56:40.9502770Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_grace_period_setter_updates_value PASSED [ 37%]
2026-01-03T21:56:40.9697381Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_custom_grace_period_used_for_expiration PASSED [ 37%]
2026-01-03T21:56:40.9892412Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_grace_period_independent_of_min_occupancy PASSED [ 37%]
2026-01-03T21:56:41.0097416Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_active_enters_grace_period_when_unoccupied PASSED [ 38%]
2026-01-03T21:56:41.0304473Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_grace_period_expires_after_threshold PASSED [ 38%]
2026-01-03T21:56:41.0513301Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_reoccupancy_during_grace_period_remains_active PASSED [ 38%]
2026-01-03T21:56:41.0714348Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_non_active_area_no_grace_period_when_unoccupied PASSED [ 38%]
2026-01-03T21:56:41.0904448Z tests/test_occupancy.py::TestRoomOccupancyTrackerActiveStatus::test_grace_period_not_expired_before_threshold PASSED [ 39%]
2026-01-03T21:56:41.1109059Z tests/test_occupancy.py::TestRoomOccupancyTrackerProperties::test_occupied_areas_property PASSED [ 39%]
2026-01-03T21:56:41.1310067Z tests/test_occupancy.py::TestRoomOccupancyTrackerProperties::test_active_areas_property PASSED [ 39%]
2026-01-03T21:56:41.1506973Z tests/test_occupancy.py::TestRoomOccupancyTrackerProperties::test_any_area_occupied_property PASSED [ 39%]
2026-01-03T21:56:41.1696837Z tests/test_occupancy.py::TestRoomOccupancyTrackerProperties::test_any_area_active_property PASSED [ 40%]
2026-01-03T21:56:41.1890053Z tests/test_occupancy.py::TestRoomOccupancyTrackerProperties::test_inactive_areas_property PASSED [ 40%]
2026-01-03T21:56:41.2094041Z tests/test_occupancy.py::TestRoomOccupancyTrackerCallbacks::test_register_update_callback PASSED [ 40%]
2026-01-03T21:56:41.2289275Z tests/test_occupancy.py::TestRoomOccupancyTrackerCallbacks::test_multiple_callbacks PASSED [ 40%]
2026-01-03T21:56:41.2496360Z tests/test_occupancy.py::TestRoomOccupancyTrackerConfigUpdate::test_update_config_rebuilds_tracking PASSED [ 41%]
2026-01-03T21:56:41.2692953Z tests/test_occupancy.py::TestRoomOccupancyTrackerSummary::test_get_summary PASSED [ 41%]
2026-01-03T21:56:41.2896433Z tests/test_occupancy.py::TestRoomOccupancyTrackerEdgeCases::test_sensor_state_unavailable PASSED [ 41%]
2026-01-03T21:56:41.3081584Z tests/test_occupancy.py::TestRoomOccupancyTrackerEdgeCases::test_get_area_returns_none_for_unknown_area PASSED [ 42%]
2026-01-03T21:56:41.3251568Z tests/test_occupancy.py::TestRoomOccupancyTrackerEdgeCases::test_empty_areas_config PASSED [ 42%]
2026-01-03T21:56:41.3419740Z tests/test_occupancy.py::TestRoomOccupancyTrackerEdgeCases::test_area_with_no_occupancy_sensors PASSED [ 42%]
2026-01-03T21:56:41.3599483Z tests/test_occupancy.py::TestAreaOccupancyStateSerialization::test_to_storage_dict_empty_state PASSED [ 42%]
2026-01-03T21:56:41.3761593Z tests/test_occupancy.py::TestAreaOccupancyStateSerialization::test_to_storage_dict_active_state PASSED [ 43%]
2026-01-03T21:56:41.3923653Z tests/test_occupancy.py::TestAreaOccupancyStateSerialization::test_to_storage_dict_grace_period_state PASSED [ 43%]
2026-01-03T21:56:41.4085361Z tests/test_occupancy.py::TestAreaOccupancyStateSerialization::test_restore_from_storage_empty_data PASSED [ 43%]
2026-01-03T21:56:41.4248667Z tests/test_occupancy.py::TestAreaOccupancyStateSerialization::test_restore_from_storage_active_state PASSED [ 43%]
2026-01-03T21:56:41.4414420Z tests/test_occupancy.py::TestAreaOccupancyStateSerialization::test_restore_from_storage_grace_period_state PASSED [ 44%]
2026-01-03T21:56:41.4595335Z tests/test_occupancy.py::TestAreaOccupancyStateSerialization::test_restore_from_storage_invalid_timestamp PASSED [ 44%]
2026-01-03T21:56:41.4779812Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_tracker_with_entry_id_has_store PASSED [ 44%]
2026-01-03T21:56:41.4964255Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_tracker_without_entry_id_no_store PASSED [ 44%]
2026-01-03T21:56:41.5157701Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_save_state_creates_data PASSED [ 45%]
2026-01-03T21:56:41.5355611Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_restore_state_loads_data PASSED [ 45%]
2026-01-03T21:56:41.5543548Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_restore_state_no_data PASSED [ 45%]
2026-01-03T21:56:41.5780288Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_setup_restores_state PASSED [ 46%]
2026-01-03T21:56:41.5997906Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_shutdown_saves_state PASSED [ 46%]
2026-01-03T21:56:41.6190563Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_restore_ignores_unknown_areas PASSED [ 46%]
2026-01-03T21:56:41.6411015Z tests/test_occupancy.py::TestRoomOccupancyTrackerPersistence::test_persist_grace_period_state PASSED [ 46%]
2026-01-03T21:56:41.7919055Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_sensor_creation_per_area PASSED [ 47%]
2026-01-03T21:56:41.8488590Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_sensor_unique_id PASSED [ 47%]
2026-01-03T21:56:41.9060019Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_initial_state_inactive PASSED [ 47%]
2026-01-03T21:56:41.9670313Z 
2026-01-03T21:56:41.9673744Z ##[error]TestRoomOccupancySensor.test_state_becomes_occupied

AssertionError: assert 'inactive' == 'occupied'
  
  - occupied
  + inactive
2026-01-03T21:56:41.9813796Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_state_becomes_occupied FAILED [ 47%]
2026-01-03T21:56:42.0528627Z 
2026-01-03T21:56:42.0531776Z ##[error]TestRoomOccupancySensor.test_occupied_sensors_attribute

assert 0 >= 1
 +  where 0 = len([])
2026-01-03T21:56:42.0709489Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_occupied_sensors_attribute FAILED [ 48%]
2026-01-03T21:56:42.1328148Z 
2026-01-03T21:56:42.1329989Z ##[error]TestRoomOccupancySensor.test_time_until_active_attribute

assert None is not None
2026-01-03T21:56:42.1470555Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_time_until_active_attribute FAILED [ 48%]
2026-01-03T21:56:42.2094871Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_state_becomes_inactive_when_unoccupied PASSED [ 48%]
2026-01-03T21:56:42.2681366Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_area_attributes PASSED [ 48%]
2026-01-03T21:56:42.3559222Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_min_occupancy_minutes_attribute PASSED [ 49%]
2026-01-03T21:56:42.4164360Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_grace_period_minutes_attribute PASSED [ 49%]
2026-01-03T21:56:42.4741463Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_grace_period_attributes_when_not_in_grace_period PASSED [ 49%]
2026-01-03T21:56:42.5403022Z 
2026-01-03T21:56:42.5424015Z ##[error]TestRoomOccupancySensor.test_active_area_enters_grace_period_when_unoccupied

AssertionError: assert False is True
 +  where False = <built-in method get of ReadOnlyDict object at 0x7efde4594aa0>('is_in_grace_period')
 +    where <built-in method get of ReadOnlyDict object at 0x7efde4594aa0> = {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'}.get
 +      where {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'} = <state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>.attributes
2026-01-03T21:56:42.5552850Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_active_area_enters_grace_period_when_unoccupied FAILED [ 50%]
2026-01-03T21:56:42.6180794Z 
2026-01-03T21:56:42.6195126Z ##[error]TestRoomOccupancySensor.test_reoccupancy_during_grace_period_clears_grace_period

AssertionError: assert False is True
 +  where False = <built-in method get of ReadOnlyDict object at 0x7efde45dcc80>('is_in_grace_period')
 +    where <built-in method get of ReadOnlyDict object at 0x7efde45dcc80> = {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'}.get
 +      where {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'} = <state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.602209-08:00>.attributes
2026-01-03T21:56:42.6360305Z tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_reoccupancy_during_grace_period_clears_grace_period FAILED [ 50%]
2026-01-03T21:56:42.6946244Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_sensor_creation PASSED [ 50%]
2026-01-03T21:56:42.7514837Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_sensor_unique_id PASSED [ 50%]
2026-01-03T21:56:42.8090785Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_initial_state_idle PASSED [ 51%]
2026-01-03T21:56:42.8664850Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_thermostat_entity_id_attribute PASSED [ 51%]
2026-01-03T21:56:42.9299780Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_paused_state PASSED [ 51%]
2026-01-03T21:56:42.9887333Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_hvac_mode_attribute PASSED [ 51%]
2026-01-03T21:56:43.0457115Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_room_count_attributes PASSED [ 52%]
2026-01-03T21:56:43.1035046Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_cycle_protection_attributes PASSED [ 52%]
2026-01-03T21:56:43.1597110Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_recommended_action_attribute PASSED [ 52%]
2026-01-03T21:56:43.2163059Z tests/test_occupancy_and_control_sensors.py::TestThermostatControlSensor::test_room_summary_attribute PASSED [ 52%]
2026-01-03T21:56:43.2743823Z tests/test_occupancy_and_control_sensors.py::TestSensorIntegration::test_all_sensors_created PASSED [ 53%]
2026-01-03T21:56:43.3322124Z tests/test_occupancy_and_control_sensors.py::TestSensorIntegration::test_sensors_share_device PASSED [ 53%]
2026-01-03T21:56:43.4881134Z tests/test_options_flow.py::test_options_flow_shows_menu PASSED          [ 53%]
2026-01-03T21:56:43.5769027Z tests/test_options_flow.py::test_options_flow_global_settings PASSED     [ 53%]
2026-01-03T21:56:43.6644303Z tests/test_options_flow.py::test_options_flow_global_settings_grace_period PASSED [ 54%]
2026-01-03T21:56:43.7276428Z tests/test_options_flow.py::test_options_flow_thermostat PASSED          [ 54%]
2026-01-03T21:56:43.7893558Z tests/test_options_flow.py::test_options_flow_manage_areas_checkboxes PASSED [ 54%]
2026-01-03T21:56:43.8525728Z tests/test_options_flow.py::test_options_flow_configure_area_sensors_menu PASSED [ 55%]
2026-01-03T21:56:43.9936991Z 
2026-01-03T21:56:43.9940145Z ##[error]test_options_flow_area_config

homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:44.0086412Z tests/test_options_flow.py::test_options_flow_area_config FAILED         [ 55%]
2026-01-03T21:56:44.1491264Z 
2026-01-03T21:56:44.1494631Z ##[error]test_options_flow_disable_area

homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:44.1639340Z tests/test_options_flow.py::test_options_flow_disable_area FAILED        [ 55%]
2026-01-03T21:56:44.2264458Z tests/test_options_flow.py::test_options_flow_thermostat_required PASSED [ 55%]
2026-01-03T21:56:44.3668047Z 
2026-01-03T21:56:44.3670558Z ##[error]test_options_flow_sensor_count_updates_after_adding

homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:44.3829555Z tests/test_options_flow.py::test_options_flow_sensor_count_updates_after_adding FAILED [ 56%]
2026-01-03T21:56:44.5362814Z 
2026-01-03T21:56:44.5365151Z ##[error]test_options_flow_sensor_count_updates_after_removing

homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:44.5519254Z tests/test_options_flow.py::test_options_flow_sensor_count_updates_after_removing FAILED [ 56%]
2026-01-03T21:56:44.6921829Z 
2026-01-03T21:56:44.6924243Z ##[error]test_options_flow_enable_disable_areas_shows_correct_count

homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:44.7078600Z tests/test_options_flow.py::test_options_flow_enable_disable_areas_shows_correct_count FAILED [ 56%]
2026-01-03T21:56:44.8563218Z tests/test_sensor.py::test_sensor_creation PASSED                        [ 56%]
2026-01-03T21:56:44.9130165Z tests/test_sensor.py::test_sensor_unique_id PASSED                       [ 57%]
2026-01-03T21:56:44.9788002Z tests/test_sensor.py::test_sensor_count_updates PASSED                   [ 57%]
2026-01-03T21:56:45.0405198Z tests/test_sensor.py::test_sensor_attributes_open_sensors PASSED         [ 57%]
2026-01-03T21:56:45.1026001Z tests/test_sensor.py::test_sensor_attributes_door_window_counts PASSED   [ 57%]
2026-01-03T21:56:45.1588782Z tests/test_sensor.py::test_sensor_attributes_monitored_sensors PASSED    [ 58%]
2026-01-03T21:56:45.2157447Z tests/test_sensor.py::test_sensor_unit_of_measurement PASSED             [ 58%]
2026-01-03T21:56:45.2737753Z tests/test_sensor.py::test_sensor_device_info PASSED                     [ 58%]
2026-01-03T21:56:45.4193926Z tests/test_services.py::TestServiceRegistration::test_services_registered PASSED [ 59%]
2026-01-03T21:56:45.4956797Z tests/test_services.py::TestServiceRegistration::test_services_registered_once PASSED [ 59%]
2026-01-03T21:56:45.5574206Z tests/test_services.py::TestPauseService::test_pause_service_pauses_thermostat PASSED [ 59%]
2026-01-03T21:56:45.6200965Z tests/test_services.py::TestPauseService::test_pause_service_already_paused PASSED [ 59%]
2026-01-03T21:56:45.6766723Z tests/test_services.py::TestPauseService::test_pause_service_invalid_entry_id PASSED [ 60%]
2026-01-03T21:56:45.7402175Z tests/test_services.py::TestResumeService::test_resume_service_resumes_thermostat PASSED [ 60%]
2026-01-03T21:56:45.7983279Z tests/test_services.py::TestResumeService::test_resume_service_not_paused PASSED [ 60%]
2026-01-03T21:56:45.8548464Z tests/test_services.py::TestResumeService::test_resume_service_invalid_entry_id PASSED [ 60%]
2026-01-03T21:56:45.9155415Z tests/test_services.py::TestRecalculateService::test_recalculate_service PASSED [ 61%]
2026-01-03T21:56:45.9727469Z tests/test_services.py::TestRecalculateService::test_recalculate_service_invalid_entry_id PASSED [ 61%]
2026-01-03T21:56:46.0904876Z tests/test_switch.py::TestRespectUserOffSwitch::test_switch_default_state_is_off ERROR [ 61%]
2026-01-03T21:56:46.1152037Z tests/test_switch.py::TestRespectUserOffSwitch::test_switch_turn_on ERROR [ 61%]
2026-01-03T21:56:46.1397505Z tests/test_switch.py::TestRespectUserOffSwitch::test_switch_turn_off ERROR [ 62%]
2026-01-03T21:56:46.1654881Z tests/test_switch.py::TestRespectUserOffBehavior::test_thermostat_off_resumes_when_respect_off_disabled ERROR [ 62%]
2026-01-03T21:56:46.1900517Z tests/test_switch.py::TestRespectUserOffBehavior::test_thermostat_stays_off_when_respect_off_enabled ERROR [ 62%]
2026-01-03T21:56:46.2144290Z tests/test_switch.py::TestRespectUserOffBehavior::test_active_thermostat_always_resumes ERROR [ 63%]
2026-01-03T21:56:46.2391849Z tests/test_switch.py::TestRespectUserOffBehavior::test_switch_extra_state_attributes ERROR [ 63%]
2026-01-03T21:56:46.3433369Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_valid_temperature PASSED [ 63%]
2026-01-03T21:56:46.3600976Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_integer_temperature PASSED [ 63%]
2026-01-03T21:56:46.3767636Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_unavailable_state PASSED [ 64%]
2026-01-03T21:56:46.3935264Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_unknown_state PASSED [ 64%]
2026-01-03T21:56:46.4114267Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_none_state PASSED [ 64%]
2026-01-03T21:56:46.4277646Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_invalid_string_state PASSED [ 64%]
2026-01-03T21:56:46.4441498Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_empty_string_state PASSED [ 65%]
2026-01-03T21:56:46.4606274Z tests/test_thermostat_control.py::TestGetTemperatureFromState::test_negative_temperature PASSED [ 65%]
2026-01-03T21:56:46.4769702Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_satiated_when_at_target PASSED [ 65%]
2026-01-03T21:56:46.4934264Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_satiated_within_deadband PASSED [ 65%]
2026-01-03T21:56:46.5112918Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_satiated_exactly_at_deadband_boundary PASSED [ 66%]
2026-01-03T21:56:46.5274959Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_not_satiated_below_deadband PASSED [ 66%]
2026-01-03T21:56:46.5435765Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_satiated_when_above_target PASSED [ 66%]
2026-01-03T21:56:46.5601264Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_multiple_sensors_warmest_satiated PASSED [ 67%]
2026-01-03T21:56:46.5764271Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_multiple_sensors_none_satiated PASSED [ 67%]
2026-01-03T21:56:46.5926917Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_empty_readings PASSED [ 67%]
2026-01-03T21:56:46.6105675Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeat::test_zero_deadband PASSED [ 67%]
2026-01-03T21:56:46.6268463Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_satiated_when_at_target PASSED [ 68%]
2026-01-03T21:56:46.6431204Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_satiated_within_deadband PASSED [ 68%]
2026-01-03T21:56:46.6613945Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_satiated_exactly_at_deadband_boundary PASSED [ 68%]
2026-01-03T21:56:46.6817380Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_not_satiated_above_deadband PASSED [ 68%]
2026-01-03T21:56:46.6990546Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_satiated_when_below_target PASSED [ 69%]
2026-01-03T21:56:46.7179755Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_multiple_sensors_coolest_satiated PASSED [ 69%]
2026-01-03T21:56:46.7348203Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_multiple_sensors_none_satiated PASSED [ 69%]
2026-01-03T21:56:46.7527359Z tests/test_thermostat_control.py::TestIsRoomSatiatedForCool::test_empty_readings PASSED [ 69%]
2026-01-03T21:56:46.7696096Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeatCool::test_satiated_when_in_range PASSED [ 70%]
2026-01-03T21:56:46.7863596Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeatCool::test_satiated_near_low_boundary PASSED [ 70%]
2026-01-03T21:56:46.8030678Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeatCool::test_satiated_near_high_boundary PASSED [ 70%]
2026-01-03T21:56:46.8217488Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeatCool::test_not_satiated_too_cold PASSED [ 71%]
2026-01-03T21:56:46.8405239Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeatCool::test_not_satiated_too_hot PASSED [ 71%]
2026-01-03T21:56:46.8599604Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeatCool::test_multiple_sensors_one_satiated PASSED [ 71%]
2026-01-03T21:56:46.8811422Z tests/test_thermostat_control.py::TestIsRoomSatiatedForHeatCool::test_empty_readings PASSED [ 71%]
2026-01-03T21:56:46.8946480Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_has_valid_readings_true PASSED [ 72%]
2026-01-03T21:56:46.9112861Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_has_valid_readings_false PASSED [ 72%]
2026-01-03T21:56:46.9304598Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_available_sensor_count PASSED [ 72%]
2026-01-03T21:56:46.9472305Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_get_closest_to_target_heat_mode PASSED [ 72%]
2026-01-03T21:56:46.9641690Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_get_closest_to_target_cool_mode PASSED [ 73%]
2026-01-03T21:56:46.9814128Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_get_closest_to_target_no_readings PASSED [ 73%]
2026-01-03T21:56:46.9987902Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_target_temperature_field PASSED [ 73%]
2026-01-03T21:56:47.0165804Z tests/test_thermostat_control.py::TestRoomTemperatureState::test_target_temperature_default_none PASSED [ 73%]
2026-01-03T21:56:47.0383876Z tests/test_thermostat_control.py::TestThermostatController::test_initialization PASSED [ 74%]
2026-01-03T21:56:47.0565416Z tests/test_thermostat_control.py::TestThermostatController::test_update_cycle_time_on PASSED [ 74%]
2026-01-03T21:56:47.0744410Z tests/test_thermostat_control.py::TestThermostatController::test_update_cycle_time_off PASSED [ 74%]
2026-01-03T21:56:47.0922955Z tests/test_thermostat_control.py::TestThermostatController::test_can_turn_off_without_prior_on_time PASSED [ 75%]
2026-01-03T21:56:47.1104533Z tests/test_thermostat_control.py::TestThermostatController::test_can_turn_off_after_min_on_time PASSED [ 75%]
2026-01-03T21:56:47.1296529Z tests/test_thermostat_control.py::TestThermostatController::test_can_turn_off_before_min_on_time PASSED [ 75%]
2026-01-03T21:56:47.1472502Z tests/test_thermostat_control.py::TestThermostatController::test_can_turn_on_without_prior_off_time PASSED [ 75%]
2026-01-03T21:56:47.1649902Z tests/test_thermostat_control.py::TestThermostatController::test_can_turn_on_after_min_off_time PASSED [ 76%]
2026-01-03T21:56:47.1826668Z tests/test_thermostat_control.py::TestThermostatController::test_can_turn_on_before_min_off_time PASSED [ 76%]
2026-01-03T21:56:47.2009784Z tests/test_thermostat_control.py::TestContactSensorPriority::test_evaluate_returns_none_when_paused PASSED [ 76%]
2026-01-03T21:56:47.2206665Z tests/test_thermostat_control.py::TestEdgeCases::test_no_rooms_configured_returns_none PASSED [ 76%]
2026-01-03T21:56:47.2392131Z tests/test_thermostat_control.py::TestEdgeCases::test_rooms_configured_but_none_active_turns_off PASSED [ 77%]
2026-01-03T21:56:47.2574566Z tests/test_thermostat_control.py::TestEdgeCases::test_no_active_rooms_already_off_returns_none PASSED [ 77%]
2026-01-03T21:56:47.2756848Z tests/test_thermostat_control.py::TestEdgeCases::test_room_with_no_temp_sensors_ignored PASSED [ 77%]
2026-01-03T21:56:47.2957665Z tests/test_thermostat_control.py::TestEdgeCases::test_unavailable_sensors_ignored PASSED [ 77%]
2026-01-03T21:56:47.3137522Z tests/test_thermostat_control.py::TestEdgeCases::test_thermostat_off_mode_returns_none PASSED [ 78%]
2026-01-03T21:56:47.3323062Z tests/test_thermostat_control.py::TestHVACModes::test_heat_mode_not_satiated PASSED [ 78%]
2026-01-03T21:56:47.3509146Z tests/test_thermostat_control.py::TestHVACModes::test_heat_mode_satiated PASSED [ 78%]
2026-01-03T21:56:47.3709882Z tests/test_thermostat_control.py::TestHVACModes::test_cool_mode_not_satiated PASSED [ 78%]
2026-01-03T21:56:47.3894900Z tests/test_thermostat_control.py::TestHVACModes::test_cool_mode_satiated PASSED [ 79%]
2026-01-03T21:56:47.4081038Z tests/test_thermostat_control.py::TestHVACModes::test_heat_cool_mode_uses_target_high_low PASSED [ 79%]
2026-01-03T21:56:47.4266727Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_heat_mode_critical PASSED [ 79%]
2026-01-03T21:56:47.4466720Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_heat_mode_not_critical PASSED [ 80%]
2026-01-03T21:56:47.4650236Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_cool_mode_critical PASSED [ 80%]
2026-01-03T21:56:47.4836902Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_cool_mode_not_critical PASSED [ 80%]
2026-01-03T21:56:47.5020121Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_heat_cool_mode_too_cold PASSED [ 80%]
2026-01-03T21:56:47.5205517Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_heat_cool_mode_too_hot PASSED [ 81%]
2026-01-03T21:56:47.5400209Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_no_sensors PASSED [ 81%]
2026-01-03T21:56:47.5586719Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_uses_warmest_sensor_for_heat PASSED [ 81%]
2026-01-03T21:56:47.5770110Z tests/test_thermostat_control.py::TestCriticalTemperatureLogic::test_evaluate_room_critical_uses_coolest_sensor_for_cool PASSED [ 81%]
2026-01-03T21:56:47.5960786Z tests/test_thermostat_control.py::TestEvaluateThermostatActionWithCriticalRooms::test_critical_room_keeps_thermostat_on PASSED [ 82%]
2026-01-03T21:56:47.6164962Z tests/test_thermostat_control.py::TestEvaluateThermostatActionWithCriticalRooms::test_critical_room_with_satiated_active_room PASSED [ 82%]
2026-01-03T21:56:47.6354231Z tests/test_thermostat_control.py::TestEvaluateThermostatActionWithCriticalRooms::test_no_critical_rooms_when_within_threshold PASSED [ 82%]
2026-01-03T21:56:47.6548168Z tests/test_thermostat_control.py::TestEvaluateThermostatActionWithCriticalRooms::test_critical_room_count_in_state PASSED [ 82%]
2026-01-03T21:56:47.6738695Z tests/test_thermostat_control.py::TestEvaluateThermostatActionWithCriticalRooms::test_room_states_include_critical_info PASSED [ 83%]
2026-01-03T21:56:47.6916469Z tests/test_thermostat_control.py::TestUnoccupiedThresholdConfiguration::test_default_thresholds PASSED [ 83%]
2026-01-03T21:56:47.7108276Z tests/test_thermostat_control.py::TestUnoccupiedThresholdConfiguration::test_custom_thresholds PASSED [ 83%]
2026-01-03T21:56:47.7286211Z tests/test_thermostat_control.py::TestUnoccupiedThresholdConfiguration::test_threshold_setter PASSED [ 84%]
2026-01-03T21:56:47.7470691Z tests/test_thermostat_control.py::TestUnoccupiedThresholdConfiguration::test_larger_threshold_changes_critical_detection PASSED [ 84%]
2026-01-03T21:56:47.7651874Z tests/test_thermostat_control.py::TestWeTurnedOffFlag::test_we_turned_off_initially_false PASSED [ 84%]
2026-01-03T21:56:47.7840524Z tests/test_thermostat_control.py::TestWeTurnedOffFlag::test_thermostat_off_treated_as_user_choice_when_flag_false PASSED [ 84%]
2026-01-03T21:56:47.8049021Z tests/test_thermostat_control.py::TestWeTurnedOffFlag::test_thermostat_off_continues_evaluation_when_we_turned_off PASSED [ 85%]
2026-01-03T21:56:47.8248846Z tests/test_thermostat_control.py::TestWeTurnedOffFlag::test_execute_turn_off_sets_flag PASSED [ 85%]
2026-01-03T21:56:47.8444978Z tests/test_thermostat_control.py::TestWeTurnedOffFlag::test_execute_turn_on_clears_flag PASSED [ 85%]
2026-01-03T21:56:47.8630454Z tests/test_thermostat_control.py::TestWeTurnedOffFlag::test_we_turned_off_in_diagnostics PASSED [ 85%]
2026-01-03T21:56:47.8814772Z tests/test_thermostat_control.py::TestThermostatControllerPersistence::test_controller_without_entry_id_has_no_store PASSED [ 86%]
2026-01-03T21:56:47.8983749Z tests/test_thermostat_control.py::TestThermostatControllerPersistence::test_controller_with_entry_id_has_store PASSED [ 86%]
2026-01-03T21:56:47.9161671Z tests/test_thermostat_control.py::TestThermostatControllerPersistence::test_async_setup_restores_state PASSED [ 86%]
2026-01-03T21:56:47.9343913Z tests/test_thermostat_control.py::TestThermostatControllerPersistence::test_async_shutdown_saves_state PASSED [ 86%]
2026-01-03T21:56:47.9519814Z tests/test_thermostat_control.py::TestThermostatControllerPersistence::test_async_setup_without_store_does_not_fail PASSED [ 87%]
2026-01-03T21:56:47.9708949Z tests/test_thermostat_control.py::TestThermostatControllerPersistence::test_async_shutdown_without_store_does_not_fail PASSED [ 87%]
2026-01-03T21:56:47.9895898Z tests/test_thermostat_control.py::TestStoredTargetTemperatures::test_stored_target_temps_initially_none PASSED [ 87%]
2026-01-03T21:56:48.0083466Z tests/test_thermostat_control.py::TestStoredTargetTemperatures::test_target_temps_stored_when_thermostat_on PASSED [ 88%]
2026-01-03T21:56:48.0272775Z tests/test_thermostat_control.py::TestStoredTargetTemperatures::test_stored_temps_used_when_off_and_we_turned_off PASSED [ 88%]
2026-01-03T21:56:48.0461081Z tests/test_thermostat_control.py::TestStoredTargetTemperatures::test_current_temps_used_when_off_but_user_turned_off PASSED [ 88%]
2026-01-03T21:56:48.0665597Z tests/test_thermostat_control.py::TestStoredTargetTemperatures::test_stored_temps_for_heat_cool_mode PASSED [ 88%]
2026-01-03T21:56:48.0857591Z tests/test_thermostat_control.py::TestStoredTargetTemperatures::test_evaluation_uses_stored_temps_when_off PASSED [ 89%]
2026-01-03T21:56:48.1038875Z tests/test_thermostat_control.py::TestStoredTargetTempsPersistence::test_stored_temps_are_saved PASSED [ 89%]
2026-01-03T21:56:48.1221205Z tests/test_thermostat_control.py::TestStoredTargetTempsPersistence::test_stored_temps_are_restored PASSED [ 89%]
2026-01-03T21:56:48.2398302Z tests/test_vent_control.py::TestVentControllerInit::test_default_values PASSED [ 89%]
2026-01-03T21:56:48.2568952Z tests/test_vent_control.py::TestVentControllerInit::test_custom_values PASSED [ 90%]
2026-01-03T21:56:48.2738134Z tests/test_vent_control.py::TestVentControllerInit::test_setters PASSED  [ 90%]
2026-01-03T21:56:48.2921451Z tests/test_vent_control.py::TestGroupDetection::test_single_vent_not_group PASSED [ 90%]
2026-01-03T21:56:48.3095029Z tests/test_vent_control.py::TestGroupDetection::test_group_detected PASSED [ 90%]
2026-01-03T21:56:48.3266760Z tests/test_vent_control.py::TestGroupDetection::test_none_state_returns_defaults PASSED [ 91%]
2026-01-03T21:56:48.3438858Z tests/test_vent_control.py::TestVentCurrentState::test_open_state PASSED [ 91%]
2026-01-03T21:56:48.3628746Z tests/test_vent_control.py::TestVentCurrentState::test_closed_state PASSED [ 91%]
2026-01-03T21:56:48.3801588Z tests/test_vent_control.py::TestVentCurrentState::test_tilt_position_open PASSED [ 92%]
2026-01-03T21:56:48.3975695Z tests/test_vent_control.py::TestVentCurrentState::test_tilt_position_closed PASSED [ 92%]
2026-01-03T21:56:48.4149057Z tests/test_vent_control.py::TestVentCurrentState::test_unavailable_state PASSED [ 92%]
2026-01-03T21:56:48.4334147Z tests/test_vent_control.py::TestVentCurrentState::test_none_state PASSED [ 92%]
2026-01-03T21:56:48.4523292Z tests/test_vent_control.py::TestDebounce::test_no_previous_command PASSED [ 93%]
2026-01-03T21:56:48.4698949Z tests/test_vent_control.py::TestDebounce::test_within_debounce_period PASSED [ 93%]
2026-01-03T21:56:48.4867676Z tests/test_vent_control.py::TestDebounce::test_after_debounce_period PASSED [ 93%]
2026-01-03T21:56:48.5045687Z tests/test_vent_control.py::TestEvaluateAreaVents::test_critical_room_vents_open PASSED [ 93%]
2026-01-03T21:56:48.5236372Z tests/test_vent_control.py::TestEvaluateAreaVents::test_active_unsatiated_vents_open PASSED [ 94%]
2026-01-03T21:56:48.5412461Z tests/test_vent_control.py::TestEvaluateAreaVents::test_active_satiated_but_occupied_past_delay_vents_open PASSED [ 94%]
2026-01-03T21:56:48.5589183Z tests/test_vent_control.py::TestEvaluateAreaVents::test_satiated_not_occupied_vents_closed PASSED [ 94%]
2026-01-03T21:56:48.5764868Z tests/test_vent_control.py::TestEvaluateAreaVents::test_occupied_past_delay_vents_open PASSED [ 94%]
2026-01-03T21:56:48.5954484Z tests/test_vent_control.py::TestEvaluateAreaVents::test_occupied_before_delay_vents_closed PASSED [ 95%]
2026-01-03T21:56:48.6127737Z tests/test_vent_control.py::TestEvaluateAreaVents::test_inactive_vents_closed PASSED [ 95%]
2026-01-03T21:56:48.6305163Z tests/test_vent_control.py::TestEvaluateAreaVents::test_per_area_vent_delay_override PASSED [ 95%]
2026-01-03T21:56:48.6479768Z tests/test_vent_control.py::TestEvaluateAreaVents::test_vent_group_member_count PASSED [ 96%]
2026-01-03T21:56:48.6697528Z tests/test_vent_control.py::TestMinimumVentsOpen::test_minimum_vents_kept_open PASSED [ 96%]
2026-01-03T21:56:48.6883527Z tests/test_vent_control.py::TestMinimumVentsOpen::test_group_counts_as_multiple_vents PASSED [ 96%]
2026-01-03T21:56:48.7060965Z tests/test_vent_control.py::TestEvaluateAllVents::test_pending_commands_generated PASSED [ 96%]
2026-01-03T21:56:48.7252217Z tests/test_vent_control.py::TestEvaluateAllVents::test_no_commands_when_state_matches PASSED [ 97%]
2026-01-03T21:56:48.7432395Z tests/test_vent_control.py::TestExecuteVentCommands::test_open_command_executed PASSED [ 97%]
2026-01-03T21:56:48.7612885Z tests/test_vent_control.py::TestExecuteVentCommands::test_close_command_executed PASSED [ 97%]
2026-01-03T21:56:48.7797562Z tests/test_vent_control.py::TestExecuteVentCommands::test_multiple_commands_executed PASSED [ 97%]
2026-01-03T21:56:48.7990562Z tests/test_vent_control.py::TestExecuteVentCommands::test_command_error_handled PASSED [ 98%]
2026-01-03T21:56:48.8161934Z tests/test_vent_control.py::TestGetSummary::test_summary_structure PASSED [ 98%]
2026-01-03T21:56:48.8342116Z tests/test_vent_control.py::TestDistanceFromTarget::test_distance_from_target_uses_target_temperature PASSED [ 98%]
2026-01-03T21:56:48.8521593Z tests/test_vent_control.py::TestDistanceFromTarget::test_distance_from_target_zero_when_satiated PASSED [ 98%]
2026-01-03T21:56:48.8713489Z tests/test_vent_control.py::TestDistanceFromTarget::test_distance_from_target_zero_when_no_target PASSED [ 99%]
2026-01-03T21:56:48.8897945Z tests/test_vent_control.py::TestDistanceFromTarget::test_distance_priority_for_minimum_vents PASSED [ 99%]
2026-01-03T21:56:48.9088539Z tests/test_vent_control.py::TestDistanceFromTarget::test_heat_mode_prioritizes_coldest_rooms PASSED [ 99%]
2026-01-03T21:56:49.2257639Z tests/test_vent_control.py::TestDistanceFromTarget::test_cool_mode_prioritizes_hottest_rooms PASSED [100%]
2026-01-03T21:56:49.2258549Z 
2026-01-03T21:56:49.2258713Z ==================================== ERRORS ====================================
2026-01-03T21:56:49.2259578Z _ ERROR at teardown of TestContactSensorEffects.test_contact_close_resumes_thermostat_after_timeout _
2026-01-03T21:56:49.2261569Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/pytest_homeassistant_custom_component/plugins.py:397: in verify_cleanup
2026-01-03T21:56:49.2262856Z     pytest.fail(f"Lingering timer after job {job!r}")
2026-01-03T21:56:49.2272344Z E   Failed: Lingering timer after job <Job track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>> HassJobType.Callback <bound method _TrackTimeInterval._interval_listener of _TrackTimeInterval(hass=<HomeAssistant STOPPED>, seconds=30.0, job_name='track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>>', action=<bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>>, cancel_on_shutdown=None, _track_job=<Job track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>> HassJobType.Callback <bound method _TrackTimeInterval._interval_listener of ...>>, _run_job=<Job track time interval 30.0 HassJobType.Callback <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>>>, _timer_handle=<TimerHandle when=329.61496115 _TrackTimeInterval._interval_listener(<Job track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>> HassJobType.Callback <bound method _TrackTimeInterval._interval_listener of ...>>) created at /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/helpers/event.py:1649>)>>
2026-01-03T21:56:49.2281728Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2282352Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2283225Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2285623Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=None, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>>
2026-01-03T21:56:49.2288687Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=None, new_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>>
2026-01-03T21:56:49.2291257Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_window, old_state=None, new_state=<state binary_sensor.bedroom_window=off; device_class=window @ 2026-01-03T13:56:38.913717-08:00>>
2026-01-03T21:56:49.2293654Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_door, old_state=None, new_state=<state binary_sensor.office_door=off; device_class=window @ 2026-01-03T13:56:38.913832-08:00>>
2026-01-03T21:56:49.2295923Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_motion, old_state=None, new_state=<state binary_sensor.living_room_motion=off; device_class=motion @ 2026-01-03T13:56:38.913942-08:00>>
2026-01-03T21:56:49.2298256Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_motion, old_state=None, new_state=<state binary_sensor.bedroom_motion=off; device_class=motion @ 2026-01-03T13:56:38.914054-08:00>>
2026-01-03T21:56:49.2300703Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_motion, old_state=None, new_state=<state binary_sensor.office_motion=off; device_class=motion @ 2026-01-03T13:56:38.914161-08:00>>
2026-01-03T21:56:49.2316852Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.kitchen_motion, old_state=None, new_state=<state binary_sensor.kitchen_motion=off; device_class=motion @ 2026-01-03T13:56:38.914287-08:00>>
2026-01-03T21:56:49.2326197Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.living_room_temperature, old_state=None, new_state=<state sensor.living_room_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914412-08:00>>
2026-01-03T21:56:49.2334639Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.bedroom_temperature, old_state=None, new_state=<state sensor.bedroom_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914526-08:00>>
2026-01-03T21:56:49.2337250Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.office_temperature, old_state=None, new_state=<state sensor.office_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914635-08:00>>
2026-01-03T21:56:49.2339367Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.kitchen_temperature, old_state=None, new_state=<state sensor.kitchen_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914743-08:00>>
2026-01-03T21:56:49.2340637Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.living_room_vent, old_state=None, new_state=<state cover.living_room_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914850-08:00>>
2026-01-03T21:56:49.2341849Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.bedroom_vent, old_state=None, new_state=<state cover.bedroom_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914960-08:00>>
2026-01-03T21:56:49.2343232Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.office_vent, old_state=None, new_state=<state cover.office_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915065-08:00>>
2026-01-03T21:56:49.2344406Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=None, new_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>>
2026-01-03T21:56:49.2346092Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=None, new_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>>
2026-01-03T21:56:49.2347458Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=None, new_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>>
2026-01-03T21:56:49.2348540Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2349497Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=cover, service=open_cover_tilt>
2026-01-03T21:56:49.2350397Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=cover, service=close_cover_tilt>
2026-01-03T21:56:49.2350912Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2351300Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2351827Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2353409Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=None, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>>
2026-01-03T21:56:49.2355301Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=None, new_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>>
2026-01-03T21:56:49.2356641Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_window, old_state=None, new_state=<state binary_sensor.bedroom_window=off; device_class=window @ 2026-01-03T13:56:38.913717-08:00>>
2026-01-03T21:56:49.2357941Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_door, old_state=None, new_state=<state binary_sensor.office_door=off; device_class=window @ 2026-01-03T13:56:38.913832-08:00>>
2026-01-03T21:56:49.2359259Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_motion, old_state=None, new_state=<state binary_sensor.living_room_motion=off; device_class=motion @ 2026-01-03T13:56:38.913942-08:00>>
2026-01-03T21:56:49.2360598Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_motion, old_state=None, new_state=<state binary_sensor.bedroom_motion=off; device_class=motion @ 2026-01-03T13:56:38.914054-08:00>>
2026-01-03T21:56:49.2361911Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_motion, old_state=None, new_state=<state binary_sensor.office_motion=off; device_class=motion @ 2026-01-03T13:56:38.914161-08:00>>
2026-01-03T21:56:49.2363416Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.kitchen_motion, old_state=None, new_state=<state binary_sensor.kitchen_motion=off; device_class=motion @ 2026-01-03T13:56:38.914287-08:00>>
2026-01-03T21:56:49.2364961Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.living_room_temperature, old_state=None, new_state=<state sensor.living_room_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914412-08:00>>
2026-01-03T21:56:49.2366453Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.bedroom_temperature, old_state=None, new_state=<state sensor.bedroom_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914526-08:00>>
2026-01-03T21:56:49.2367936Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.office_temperature, old_state=None, new_state=<state sensor.office_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914635-08:00>>
2026-01-03T21:56:49.2369389Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.kitchen_temperature, old_state=None, new_state=<state sensor.kitchen_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914743-08:00>>
2026-01-03T21:56:49.2370827Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.living_room_vent, old_state=None, new_state=<state cover.living_room_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914850-08:00>>
2026-01-03T21:56:49.2372102Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.bedroom_vent, old_state=None, new_state=<state cover.bedroom_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914960-08:00>>
2026-01-03T21:56:49.2373518Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.office_vent, old_state=None, new_state=<state cover.office_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915065-08:00>>
2026-01-03T21:56:49.2374752Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=None, new_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>>
2026-01-03T21:56:49.2376130Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=None, new_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>>
2026-01-03T21:56:49.2377539Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=None, new_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>>
2026-01-03T21:56:49.2378668Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2379359Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=cover, service=open_cover_tilt>
2026-01-03T21:56:49.2380045Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=cover, service=close_cover_tilt>
2026-01-03T21:56:49.2380584Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.2381131Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 4 areas with 4 total sensors
2026-01-03T21:56:49.2381772Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.2382814Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2384009Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area bedroom scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2385117Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area office scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2386238Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area kitchen scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2387208Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 4 sensors across 4 areas
2026-01-03T21:56:49.2387953Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.2388770Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.main_thermostat
2026-01-03T21:56:49.2389565Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.2390679Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.2391774Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2394036Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.2396112Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.2396801Z DEBUG:custom_components.thermostat_contact_sensors.vent_control:Executing close_cover_tilt on cover.kitchen_vent: Close vent
2026-01-03T21:56:49.2397592Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.kitchen_vent>
2026-01-03T21:56:49.2398815Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>, new_state=<state cover.kitchen_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920078-08:00>>
2026-01-03T21:56:49.2399996Z DEBUG:custom_components.thermostat_contact_sensors.vent_control:Executing close_cover_tilt on cover.hallway_vents: Close vent
2026-01-03T21:56:49.2400792Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.hallway_vents>
2026-01-03T21:56:49.2402354Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>, new_state=<state cover.hallway_vents=closed; current_tilt_position=0, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.920410-08:00>>
2026-01-03T21:56:49.2403950Z DEBUG:custom_components.thermostat_contact_sensors.vent_control:Executing close_cover_tilt on cover.basement_vent: Close vent
2026-01-03T21:56:49.2404735Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.basement_vent>
2026-01-03T21:56:49.2405977Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>, new_state=<state cover.basement_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920714-08:00>>
2026-01-03T21:56:49.2407123Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Executed 3 vent commands out of 3 pending
2026-01-03T21:56:49.2408293Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>, new_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>>
2026-01-03T21:56:49.2409576Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.2410403Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.living_room_window changed from off to on
2026-01-03T21:56:49.2411129Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor opened: binary_sensor.living_room_window
2026-01-03T21:56:49.2412024Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started open timer for 5 minutes (triggered by binary_sensor.living_room_window)
2026-01-03T21:56:49.2412938Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2413668Z INFO:custom_components.thermostat_contact_sensors.coordinator:Open timeout expired with 1 sensors open. Pausing thermostat.
2026-01-03T21:56:49.2414518Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2416093Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=climate.main_thermostat, old_last_reported=2026-01-03T13:56:38.919348-08:00, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.2417652Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2418306Z INFO:custom_components.thermostat_contact_sensors.coordinator:Thermostat paused. Previous mode: off
2026-01-03T21:56:49.2419383Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>, new_state=<state binary_sensor.living_room_window=off @ 2026-01-03T13:56:38.922494-08:00>>
2026-01-03T21:56:49.2420536Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.living_room_window changed from on to off
2026-01-03T21:56:49.2421269Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor closed: binary_sensor.living_room_window
2026-01-03T21:56:49.2421908Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started close timer for 2 minutes
2026-01-03T21:56:49.2422550Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2423407Z INFO:custom_components.thermostat_contact_sensors.coordinator:Close timeout expired with all sensors closed. Resuming thermostat.
2026-01-03T21:56:49.2424310Z INFO:custom_components.thermostat_contact_sensors.coordinator:Thermostat was off before pause but respect_user_off is disabled. Will resume to last known active mode.
2026-01-03T21:56:49.2425289Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=heat>
2026-01-03T21:56:49.2427400Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>>
2026-01-03T21:56:49.2429363Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.2430263Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.2431312Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2433621Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.924158-08:00>>
2026-01-03T21:56:49.2435569Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.2436221Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2436852Z INFO:custom_components.thermostat_contact_sensors.coordinator:Thermostat resumed to mode: heat
2026-01-03T21:56:49.2437686Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.main_thermostat changed from off to heat (is_paused=False)
2026-01-03T21:56:49.2438427Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Updated last known HVAC mode to: heat
2026-01-03T21:56:49.2439163Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.2439782Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.2440374Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 4 areas with 4 total sensors
2026-01-03T21:56:49.2441117Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.2442083Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2443413Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area bedroom scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2444623Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area office scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2445835Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area kitchen scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2446887Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 4 sensors across 4 areas
2026-01-03T21:56:49.2447777Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.2448730Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.main_thermostat
2026-01-03T21:56:49.2449646Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.2450711Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.2451874Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2454348Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.2456391Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.2457195Z DEBUG    custom_components.thermostat_contact_sensors.vent_control:vent_control.py:593 Executing close_cover_tilt on cover.kitchen_vent: Close vent
2026-01-03T21:56:49.2458072Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.kitchen_vent>
2026-01-03T21:56:49.2459474Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>, new_state=<state cover.kitchen_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920078-08:00>>
2026-01-03T21:56:49.2460767Z DEBUG    custom_components.thermostat_contact_sensors.vent_control:vent_control.py:593 Executing close_cover_tilt on cover.hallway_vents: Close vent
2026-01-03T21:56:49.2461647Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.hallway_vents>
2026-01-03T21:56:49.2463384Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>, new_state=<state cover.hallway_vents=closed; current_tilt_position=0, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.920410-08:00>>
2026-01-03T21:56:49.2464985Z DEBUG    custom_components.thermostat_contact_sensors.vent_control:vent_control.py:593 Executing close_cover_tilt on cover.basement_vent: Close vent
2026-01-03T21:56:49.2465867Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.basement_vent>
2026-01-03T21:56:49.2467165Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>, new_state=<state cover.basement_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920714-08:00>>
2026-01-03T21:56:49.2468429Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:502 Executed 3 vent commands out of 3 pending
2026-01-03T21:56:49.2469689Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>, new_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>>
2026-01-03T21:56:49.2471192Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.2472227Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.living_room_window changed from off to on
2026-01-03T21:56:49.2473175Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:673 Sensor opened: binary_sensor.living_room_window
2026-01-03T21:56:49.2474194Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:693 Started open timer for 5 minutes (triggered by binary_sensor.living_room_window)
2026-01-03T21:56:49.2475122Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2475982Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:744 Open timeout expired with 1 sensors open. Pausing thermostat.
2026-01-03T21:56:49.2476913Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2478552Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=climate.main_thermostat, old_last_reported=2026-01-03T13:56:38.919348-08:00, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.2480211Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2481004Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:778 Thermostat paused. Previous mode: off
2026-01-03T21:56:49.2482178Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>, new_state=<state binary_sensor.living_room_window=off @ 2026-01-03T13:56:38.922494-08:00>>
2026-01-03T21:56:49.2483531Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.living_room_window changed from on to off
2026-01-03T21:56:49.2484377Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:701 Sensor closed: binary_sensor.living_room_window
2026-01-03T21:56:49.2485134Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:725 Started close timer for 2 minutes
2026-01-03T21:56:49.2485911Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2486783Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:794 Close timeout expired with all sensors closed. Resuming thermostat.
2026-01-03T21:56:49.2487795Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:808 Thermostat was off before pause but respect_user_off is disabled. Will resume to last known active mode.
2026-01-03T21:56:49.2488847Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=heat>
2026-01-03T21:56:49.2491026Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>>
2026-01-03T21:56:49.2493209Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.2494273Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.2495551Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2497718Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.924158-08:00>>
2026-01-03T21:56:49.2499868Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.2500667Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.2501438Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:844 Thermostat resumed to mode: heat
2026-01-03T21:56:49.2502277Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.main_thermostat changed from off to heat (is_paused=False)
2026-01-03T21:56:49.2503257Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:608 Updated last known HVAC mode to: heat
2026-01-03T21:56:49.2504416Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.2505108Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.2505511Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.2505937Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.2506369Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.2506814Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.2507201Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2507512Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.2507926Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.2508416Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.2508897Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.2509439Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.2509925Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2510358Z _ ERROR at setup of TestRespectUserOffSwitch.test_switch_default_state_is_off __
2026-01-03T21:56:49.2510726Z tests/test_switch.py:43: in config_entry
2026-01-03T21:56:49.2510966Z     CONF_BINARY_SENSORS: [],
2026-01-03T21:56:49.2511219Z E   NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.2511554Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2511867Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2512247Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2512779Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2513154Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2513786Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2514332Z ________ ERROR at setup of TestRespectUserOffSwitch.test_switch_turn_on ________
2026-01-03T21:56:49.2514674Z tests/test_switch.py:43: in config_entry
2026-01-03T21:56:49.2514913Z     CONF_BINARY_SENSORS: [],
2026-01-03T21:56:49.2515153Z E   NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.2515484Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2515794Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2516169Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2516617Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2516985Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2517596Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2518139Z _______ ERROR at setup of TestRespectUserOffSwitch.test_switch_turn_off ________
2026-01-03T21:56:49.2518486Z tests/test_switch.py:43: in config_entry
2026-01-03T21:56:49.2518713Z     CONF_BINARY_SENSORS: [],
2026-01-03T21:56:49.2518955Z E   NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.2519276Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2519587Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2519961Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2520397Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2520766Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2521270Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2521909Z _ ERROR at setup of TestRespectUserOffBehavior.test_thermostat_off_resumes_when_respect_off_disabled _
2026-01-03T21:56:49.2522341Z tests/test_switch.py:43: in config_entry
2026-01-03T21:56:49.2522573Z     CONF_BINARY_SENSORS: [],
2026-01-03T21:56:49.2522912Z E   NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.2523236Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2523555Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2523929Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2524361Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2524722Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2525229Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2525855Z _ ERROR at setup of TestRespectUserOffBehavior.test_thermostat_stays_off_when_respect_off_enabled _
2026-01-03T21:56:49.2526284Z tests/test_switch.py:43: in config_entry
2026-01-03T21:56:49.2526517Z     CONF_BINARY_SENSORS: [],
2026-01-03T21:56:49.2526750Z E   NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.2527079Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2527385Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2527762Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2528192Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2528552Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2529053Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2529627Z _ ERROR at setup of TestRespectUserOffBehavior.test_active_thermostat_always_resumes _
2026-01-03T21:56:49.2530130Z tests/test_switch.py:43: in config_entry
2026-01-03T21:56:49.2530369Z     CONF_BINARY_SENSORS: [],
2026-01-03T21:56:49.2530621Z E   NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.2530956Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2531271Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2531654Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2532085Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2532467Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2533103Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2533676Z _ ERROR at setup of TestRespectUserOffBehavior.test_switch_extra_state_attributes _
2026-01-03T21:56:49.2534179Z tests/test_switch.py:43: in config_entry
2026-01-03T21:56:49.2534415Z     CONF_BINARY_SENSORS: [],
2026-01-03T21:56:49.2534658Z E   NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.2534994Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2535306Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2535684Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2536117Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2536488Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2536990Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2537442Z =================================== FAILURES ===================================
2026-01-03T21:56:49.2537796Z ______________ TestDiagnostics.test_diagnostics_config_entry_info ______________
2026-01-03T21:56:49.2538215Z tests/test_diagnostics.py:68: in test_diagnostics_config_entry_info
2026-01-03T21:56:49.2538540Z     assert config_entry["version"] == 2
2026-01-03T21:56:49.2538763Z E   assert 3 == 2
2026-01-03T21:56:49.2539004Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2539317Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2539704Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2540991Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:37.747918-08:00>>
2026-01-03T21:56:49.2542902Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:37.748093-08:00>>
2026-01-03T21:56:49.2544424Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:37.748221-08:00>>
2026-01-03T21:56:49.2545959Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:37.748364-08:00>>
2026-01-03T21:56:49.2547040Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2547540Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2548032Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2548544Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2549928Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:37.747918-08:00>>
2026-01-03T21:56:49.2551749Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:37.748093-08:00>>
2026-01-03T21:56:49.2553523Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:37.748221-08:00>>
2026-01-03T21:56:49.2555127Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:37.748364-08:00>>
2026-01-03T21:56:49.2556283Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2556809Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.2557330Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.2558404Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.2559456Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2560001Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.2560557Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.2561291Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.2562278Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.2563355Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.2564003Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.2564869Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2565847Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.2566597Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.2567417Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.2568361Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.2569262Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.2570304Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2572438Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:37.747918-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:37.756943-08:00>>
2026-01-03T21:56:49.2574611Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.2575357Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.2576063Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.2576583Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.2577048Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.2577719Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.2578464Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2578922Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.2579341Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.2579900Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.2580588Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=63220f1bc4e20de81ec26065fff27249>
2026-01-03T21:56:49.2581497Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.2582494Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.2584423Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:37.768711-08:00>>
2026-01-03T21:56:49.2586024Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2586447Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.2586821Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.2587320Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.2588041Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.2589070Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.2591219Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:37.772082-08:00>>
2026-01-03T21:56:49.2593477Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.2594575Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.2597849Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:37.772747-08:00>>
2026-01-03T21:56:49.2601145Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.2602109Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.2604744Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:37.773419-08:00>>
2026-01-03T21:56:49.2607324Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.2608300Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.2611917Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:37.774040-08:00>>
2026-01-03T21:56:49.2614948Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.2615892Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.2617592Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:37.774671-08:00>>
2026-01-03T21:56:49.2619394Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2619883Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.2620372Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.2621268Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.2621977Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.2622555Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.2623403Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.2624216Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.2625234Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.2627192Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:37.778167-08:00>>
2026-01-03T21:56:49.2629012Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.2629747Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.2630612Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.2685749Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.2686943Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.2687740Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.2688672Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.2690249Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.2691439Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2692065Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.2692930Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.2693751Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.2694800Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.2696006Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.2696741Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.2697700Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2698765Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.2699636Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.2700593Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.2701520Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.2702578Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.2703952Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2706134Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:37.747918-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:37.756943-08:00>>
2026-01-03T21:56:49.2708152Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.2708991Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.2709772Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.2710363Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.2711031Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.2711802Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.2712842Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2713396Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.2713881Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.2714546Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.2715320Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=63220f1bc4e20de81ec26065fff27249>
2026-01-03T21:56:49.2716461Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.2717552Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.2719407Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:37.768711-08:00>>
2026-01-03T21:56:49.2721079Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2721597Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.2722055Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.2722837Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.2723711Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.2724709Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.2726902Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:37.772082-08:00>>
2026-01-03T21:56:49.2729167Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.2730205Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.2733801Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:37.772747-08:00>>
2026-01-03T21:56:49.2737186Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.2738350Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.2740933Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:37.773419-08:00>>
2026-01-03T21:56:49.2743774Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.2744844Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.2748469Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:37.774040-08:00>>
2026-01-03T21:56:49.2751460Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.2752483Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.2754607Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:37.774671-08:00>>
2026-01-03T21:56:49.2756199Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.2756695Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.2757197Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.2757842Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.2758478Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.2759069Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.2759783Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.2760662Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.2761684Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.2763644Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:37.778167-08:00>>
2026-01-03T21:56:49.2765380Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.2766132Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.2766883Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.2767690Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.2768479Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.2769028Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.2769595Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.2771167Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:37.799653+00:00'}}
2026-01-03T21:56:49.2773008Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.2774909Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:37.800222+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.2776421Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.2776984Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.2779239Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:37.768711-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:37.802297-08:00>>
2026-01-03T21:56:49.2783777Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:37.772082-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:37.803123-08:00>>
2026-01-03T21:56:49.2789525Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:37.772747-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:37.803668-08:00>>
2026-01-03T21:56:49.2795815Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:37.773419-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:37.804227-08:00>>
2026-01-03T21:56:49.2802367Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:37.774040-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:37.804770-08:00>>
2026-01-03T21:56:49.2807658Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:37.774671-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:37.805321-08:00>>
2026-01-03T21:56:49.2811307Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:37.778167-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:37.806165-08:00>>
2026-01-03T21:56:49.2814480Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:37.806948+00:00'}}
2026-01-03T21:56:49.2816221Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.2817974Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:37.807253+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.2819454Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.2820017Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.2820492Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.2820927Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.2822106Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde482e5d0>>}
2026-01-03T21:56:49.2823869Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde482c200>>}
2026-01-03T21:56:49.2824909Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.2825362Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.2825870Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2826189Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.2826787Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.2828432Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:37.799653+00:00'}}
2026-01-03T21:56:49.2830281Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.2832163Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:37.800222+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.2834277Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.2834954Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.2837288Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:37.768711-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:37.802297-08:00>>
2026-01-03T21:56:49.2841828Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:37.772082-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:37.803123-08:00>>
2026-01-03T21:56:49.2847763Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:37.772747-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:37.803668-08:00>>
2026-01-03T21:56:49.2854269Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:37.773419-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:37.804227-08:00>>
2026-01-03T21:56:49.2860800Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:37.774040-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:37.804770-08:00>>
2026-01-03T21:56:49.2866163Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:37.774671-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:37.805321-08:00>>
2026-01-03T21:56:49.2869927Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:37.778167-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:37.806165-08:00>>
2026-01-03T21:56:49.2873290Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:37.806948+00:00'}}
2026-01-03T21:56:49.2875148Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.2877034Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:37.807253+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.2878614Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.2879287Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.2879848Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.2880337Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.2881473Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde482e5d0>>}
2026-01-03T21:56:49.2883315Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde482c200>>}
2026-01-03T21:56:49.2884416Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.2885006Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.2885501Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2885875Z _________________________ test_multiple_config_entries _________________________
2026-01-03T21:56:49.2886228Z tests/test_init.py:215: in test_multiple_config_entries
2026-01-03T21:56:49.2886512Z     CONF_AREA_ID: "second_area",
2026-01-03T21:56:49.2886763Z E   NameError: name 'CONF_AREA_ID' is not defined
2026-01-03T21:56:49.2887201Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2887531Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2887922Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2889207Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.714343-08:00>>
2026-01-03T21:56:49.2890982Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:38.714510-08:00>>
2026-01-03T21:56:49.2892718Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:38.714638-08:00>>
2026-01-03T21:56:49.2894267Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:38.714754-08:00>>
2026-01-03T21:56:49.2895354Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2895848Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2896221Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2896743Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2898138Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.714343-08:00>>
2026-01-03T21:56:49.2899962Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:38.714510-08:00>>
2026-01-03T21:56:49.2901534Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:38.714638-08:00>>
2026-01-03T21:56:49.2903221Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:38.714754-08:00>>
2026-01-03T21:56:49.2904376Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2904894Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.2905751Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.second_thermostat, old_state=None, new_state=<state climate.second_thermostat=cool; friendly_name=Second Thermostat @ 2026-01-03T13:56:38.717032-08:00>>
2026-01-03T21:56:49.2906590Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.2907605Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.second_thermostat, old_state=None, new_state=<state climate.second_thermostat=cool; friendly_name=Second Thermostat @ 2026-01-03T13:56:38.717032-08:00>>
2026-01-03T21:56:49.2908494Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.2908884Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.2909317Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.2909740Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.2910190Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.2910579Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2910880Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.2911415Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.2911903Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.2912389Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.2913018Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.2913501Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2913943Z _ TestContactSensorEffects.test_contact_close_resumes_thermostat_after_timeout _
2026-01-03T21:56:49.2914425Z tests/test_integration.py:400: in test_contact_close_resumes_thermostat_after_timeout
2026-01-03T21:56:49.2914956Z     assert mock_climate_service_integration["set_hvac_mode"][-1]["hvac_mode"] == HVACMode.HEAT
2026-01-03T21:56:49.2915395Z E   AssertionError: assert 'off' == <HVACMode.HEAT: 'heat'>
2026-01-03T21:56:49.2915680Z E     
2026-01-03T21:56:49.2915842Z E     - heat
2026-01-03T21:56:49.2916009Z E     + off
2026-01-03T21:56:49.2916237Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.2916556Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.2916937Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.2918235Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=None, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>>
2026-01-03T21:56:49.2919906Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=None, new_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>>
2026-01-03T21:56:49.2921188Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_window, old_state=None, new_state=<state binary_sensor.bedroom_window=off; device_class=window @ 2026-01-03T13:56:38.913717-08:00>>
2026-01-03T21:56:49.2922430Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_door, old_state=None, new_state=<state binary_sensor.office_door=off; device_class=window @ 2026-01-03T13:56:38.913832-08:00>>
2026-01-03T21:56:49.2923774Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_motion, old_state=None, new_state=<state binary_sensor.living_room_motion=off; device_class=motion @ 2026-01-03T13:56:38.913942-08:00>>
2026-01-03T21:56:49.2925044Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_motion, old_state=None, new_state=<state binary_sensor.bedroom_motion=off; device_class=motion @ 2026-01-03T13:56:38.914054-08:00>>
2026-01-03T21:56:49.2926410Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_motion, old_state=None, new_state=<state binary_sensor.office_motion=off; device_class=motion @ 2026-01-03T13:56:38.914161-08:00>>
2026-01-03T21:56:49.2927669Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.kitchen_motion, old_state=None, new_state=<state binary_sensor.kitchen_motion=off; device_class=motion @ 2026-01-03T13:56:38.914287-08:00>>
2026-01-03T21:56:49.2929157Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.living_room_temperature, old_state=None, new_state=<state sensor.living_room_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914412-08:00>>
2026-01-03T21:56:49.2930590Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.bedroom_temperature, old_state=None, new_state=<state sensor.bedroom_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914526-08:00>>
2026-01-03T21:56:49.2932110Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.office_temperature, old_state=None, new_state=<state sensor.office_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914635-08:00>>
2026-01-03T21:56:49.2933630Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.kitchen_temperature, old_state=None, new_state=<state sensor.kitchen_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914743-08:00>>
2026-01-03T21:56:49.2934867Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.living_room_vent, old_state=None, new_state=<state cover.living_room_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914850-08:00>>
2026-01-03T21:56:49.2936070Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.bedroom_vent, old_state=None, new_state=<state cover.bedroom_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914960-08:00>>
2026-01-03T21:56:49.2937268Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.office_vent, old_state=None, new_state=<state cover.office_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915065-08:00>>
2026-01-03T21:56:49.2938433Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=None, new_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>>
2026-01-03T21:56:49.2939624Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=None, new_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>>
2026-01-03T21:56:49.2940975Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=None, new_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>>
2026-01-03T21:56:49.2942048Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2942761Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=cover, service=open_cover_tilt>
2026-01-03T21:56:49.2943385Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=cover, service=close_cover_tilt>
2026-01-03T21:56:49.2943878Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.2944259Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.2944768Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.2946277Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=None, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>>
2026-01-03T21:56:49.2948027Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=None, new_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>>
2026-01-03T21:56:49.2949376Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_window, old_state=None, new_state=<state binary_sensor.bedroom_window=off; device_class=window @ 2026-01-03T13:56:38.913717-08:00>>
2026-01-03T21:56:49.2950675Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_door, old_state=None, new_state=<state binary_sensor.office_door=off; device_class=window @ 2026-01-03T13:56:38.913832-08:00>>
2026-01-03T21:56:49.2952109Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_motion, old_state=None, new_state=<state binary_sensor.living_room_motion=off; device_class=motion @ 2026-01-03T13:56:38.913942-08:00>>
2026-01-03T21:56:49.2953578Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.bedroom_motion, old_state=None, new_state=<state binary_sensor.bedroom_motion=off; device_class=motion @ 2026-01-03T13:56:38.914054-08:00>>
2026-01-03T21:56:49.2954887Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.office_motion, old_state=None, new_state=<state binary_sensor.office_motion=off; device_class=motion @ 2026-01-03T13:56:38.914161-08:00>>
2026-01-03T21:56:49.2956204Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.kitchen_motion, old_state=None, new_state=<state binary_sensor.kitchen_motion=off; device_class=motion @ 2026-01-03T13:56:38.914287-08:00>>
2026-01-03T21:56:49.2957728Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.living_room_temperature, old_state=None, new_state=<state sensor.living_room_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914412-08:00>>
2026-01-03T21:56:49.2959219Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.bedroom_temperature, old_state=None, new_state=<state sensor.bedroom_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914526-08:00>>
2026-01-03T21:56:49.2960684Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.office_temperature, old_state=None, new_state=<state sensor.office_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914635-08:00>>
2026-01-03T21:56:49.2962156Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.kitchen_temperature, old_state=None, new_state=<state sensor.kitchen_temperature=20.0; unit_of_measurement=Â°C @ 2026-01-03T13:56:38.914743-08:00>>
2026-01-03T21:56:49.2963559Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.living_room_vent, old_state=None, new_state=<state cover.living_room_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914850-08:00>>
2026-01-03T21:56:49.2964820Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.bedroom_vent, old_state=None, new_state=<state cover.bedroom_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.914960-08:00>>
2026-01-03T21:56:49.2966069Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.office_vent, old_state=None, new_state=<state cover.office_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915065-08:00>>
2026-01-03T21:56:49.2967431Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=None, new_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>>
2026-01-03T21:56:49.2968708Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=None, new_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>>
2026-01-03T21:56:49.2970129Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=None, new_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>>
2026-01-03T21:56:49.2971265Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.2971948Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=cover, service=open_cover_tilt>
2026-01-03T21:56:49.2972864Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=cover, service=close_cover_tilt>
2026-01-03T21:56:49.2973396Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.2973939Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 4 areas with 4 total sensors
2026-01-03T21:56:49.2974589Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.2975441Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2976591Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area bedroom scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2977717Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area office scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2978829Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area kitchen scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.2979792Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 4 sensors across 4 areas
2026-01-03T21:56:49.2980541Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.2981350Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.main_thermostat
2026-01-03T21:56:49.2982138Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.2983132Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.2984176Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.2986303Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.2988370Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.2989062Z DEBUG:custom_components.thermostat_contact_sensors.vent_control:Executing close_cover_tilt on cover.kitchen_vent: Close vent
2026-01-03T21:56:49.2989853Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.kitchen_vent>
2026-01-03T21:56:49.2991081Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>, new_state=<state cover.kitchen_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920078-08:00>>
2026-01-03T21:56:49.2992265Z DEBUG:custom_components.thermostat_contact_sensors.vent_control:Executing close_cover_tilt on cover.hallway_vents: Close vent
2026-01-03T21:56:49.2993260Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.hallway_vents>
2026-01-03T21:56:49.2994816Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>, new_state=<state cover.hallway_vents=closed; current_tilt_position=0, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.920410-08:00>>
2026-01-03T21:56:49.2996321Z DEBUG:custom_components.thermostat_contact_sensors.vent_control:Executing close_cover_tilt on cover.basement_vent: Close vent
2026-01-03T21:56:49.2997109Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.basement_vent>
2026-01-03T21:56:49.2998347Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>, new_state=<state cover.basement_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920714-08:00>>
2026-01-03T21:56:49.2999492Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Executed 3 vent commands out of 3 pending
2026-01-03T21:56:49.3000649Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>, new_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>>
2026-01-03T21:56:49.3001916Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3002828Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.living_room_window changed from off to on
2026-01-03T21:56:49.3003562Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor opened: binary_sensor.living_room_window
2026-01-03T21:56:49.3004340Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started open timer for 5 minutes (triggered by binary_sensor.living_room_window)
2026-01-03T21:56:49.3005113Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3005839Z INFO:custom_components.thermostat_contact_sensors.coordinator:Open timeout expired with 1 sensors open. Pausing thermostat.
2026-01-03T21:56:49.3006691Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3008407Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=climate.main_thermostat, old_last_reported=2026-01-03T13:56:38.919348-08:00, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.3009858Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3010513Z INFO:custom_components.thermostat_contact_sensors.coordinator:Thermostat paused. Previous mode: off
2026-01-03T21:56:49.3011595Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>, new_state=<state binary_sensor.living_room_window=off @ 2026-01-03T13:56:38.922494-08:00>>
2026-01-03T21:56:49.3012872Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.living_room_window changed from on to off
2026-01-03T21:56:49.3013715Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor closed: binary_sensor.living_room_window
2026-01-03T21:56:49.3014349Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started close timer for 2 minutes
2026-01-03T21:56:49.3014985Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3015718Z INFO:custom_components.thermostat_contact_sensors.coordinator:Close timeout expired with all sensors closed. Resuming thermostat.
2026-01-03T21:56:49.3016614Z INFO:custom_components.thermostat_contact_sensors.coordinator:Thermostat was off before pause but respect_user_off is disabled. Will resume to last known active mode.
2026-01-03T21:56:49.3017577Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=heat>
2026-01-03T21:56:49.3019686Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>>
2026-01-03T21:56:49.3021641Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.3022542Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3023686Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3025796Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.924158-08:00>>
2026-01-03T21:56:49.3027742Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.3028393Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3029029Z INFO:custom_components.thermostat_contact_sensors.coordinator:Thermostat resumed to mode: heat
2026-01-03T21:56:49.3029868Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.main_thermostat changed from off to heat (is_paused=False)
2026-01-03T21:56:49.3030612Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Updated last known HVAC mode to: heat
2026-01-03T21:56:49.3031342Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3031957Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.3032544Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 4 areas with 4 total sensors
2026-01-03T21:56:49.3033405Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.3034491Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3035718Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area bedroom scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3036933Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area office scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3038139Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area kitchen scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3039193Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 4 sensors across 4 areas
2026-01-03T21:56:49.3040084Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.3041038Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.main_thermostat
2026-01-03T21:56:49.3041959Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.3043113Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3044276Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3046479Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.913425-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.3048530Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.3049339Z DEBUG    custom_components.thermostat_contact_sensors.vent_control:vent_control.py:593 Executing close_cover_tilt on cover.kitchen_vent: Close vent
2026-01-03T21:56:49.3050336Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.kitchen_vent>
2026-01-03T21:56:49.3051627Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.kitchen_vent, old_state=<state cover.kitchen_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915171-08:00>, new_state=<state cover.kitchen_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920078-08:00>>
2026-01-03T21:56:49.3053013Z DEBUG    custom_components.thermostat_contact_sensors.vent_control:vent_control.py:593 Executing close_cover_tilt on cover.hallway_vents: Close vent
2026-01-03T21:56:49.3053898Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.hallway_vents>
2026-01-03T21:56:49.3055517Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.hallway_vents, old_state=<state cover.hallway_vents=open; current_tilt_position=100, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.915416-08:00>, new_state=<state cover.hallway_vents=closed; current_tilt_position=0, entity_id=['cover.hallway_vent_1', 'cover.hallway_vent_2'] @ 2026-01-03T13:56:38.920410-08:00>>
2026-01-03T21:56:49.3057748Z DEBUG    custom_components.thermostat_contact_sensors.vent_control:vent_control.py:593 Executing close_cover_tilt on cover.basement_vent: Close vent
2026-01-03T21:56:49.3058636Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=cover, service=close_cover_tilt, service_data=entity_id=cover.basement_vent>
2026-01-03T21:56:49.3059948Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=cover.basement_vent, old_state=<state cover.basement_vent=open; current_tilt_position=100 @ 2026-01-03T13:56:38.915292-08:00>, new_state=<state cover.basement_vent=closed; current_tilt_position=0 @ 2026-01-03T13:56:38.920714-08:00>>
2026-01-03T21:56:49.3061211Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:502 Executed 3 vent commands out of 3 pending
2026-01-03T21:56:49.3062469Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=off; device_class=window @ 2026-01-03T13:56:38.913594-08:00>, new_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>>
2026-01-03T21:56:49.3063950Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3064885Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.living_room_window changed from off to on
2026-01-03T21:56:49.3065738Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:673 Sensor opened: binary_sensor.living_room_window
2026-01-03T21:56:49.3066622Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:693 Started open timer for 5 minutes (triggered by binary_sensor.living_room_window)
2026-01-03T21:56:49.3067547Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3068446Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:744 Open timeout expired with 1 sensors open. Pausing thermostat.
2026-01-03T21:56:49.3069383Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3071166Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=climate.main_thermostat, old_last_reported=2026-01-03T13:56:38.919348-08:00, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>>
2026-01-03T21:56:49.3072834Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3073629Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:778 Thermostat paused. Previous mode: off
2026-01-03T21:56:49.3074811Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.living_room_window, old_state=<state binary_sensor.living_room_window=on @ 2026-01-03T13:56:38.920916-08:00>, new_state=<state binary_sensor.living_room_window=off @ 2026-01-03T13:56:38.922494-08:00>>
2026-01-03T21:56:49.3076060Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.living_room_window changed from on to off
2026-01-03T21:56:49.3077044Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:701 Sensor closed: binary_sensor.living_room_window
2026-01-03T21:56:49.3077804Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:725 Started close timer for 2 minutes
2026-01-03T21:56:49.3078587Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3079467Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:794 Close timeout expired with all sensors closed. Resuming thermostat.
2026-01-03T21:56:49.3080477Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:808 Thermostat was off before pause but respect_user_off is disabled. Will resume to last known active mode.
2026-01-03T21:56:49.3081539Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=heat>
2026-01-03T21:56:49.3083847Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.919348-08:00>, new_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>>
2026-01-03T21:56:49.3085930Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.3087003Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.main_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3088155Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.main_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3090329Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.main_thermostat, old_state=<state climate.main_thermostat=heat; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.923525-08:00>, new_state=<state climate.main_thermostat=off; friendly_name=Main Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:38.924158-08:00>>
2026-01-03T21:56:49.3092481Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.3093426Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3094198Z INFO     custom_components.thermostat_contact_sensors.coordinator:coordinator.py:844 Thermostat resumed to mode: heat
2026-01-03T21:56:49.3095040Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.main_thermostat changed from off to heat (is_paused=False)
2026-01-03T21:56:49.3095904Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:608 Updated last known HVAC mode to: heat
2026-01-03T21:56:49.3096756Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.main_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3097607Z _____________ TestRoomOccupancySensor.test_state_becomes_occupied ______________
2026-01-03T21:56:49.3098075Z tests/test_occupancy_and_control_sensors.py:129: in test_state_becomes_occupied
2026-01-03T21:56:49.3098431Z     assert state.state == "occupied"
2026-01-03T21:56:49.3098697Z E   AssertionError: assert 'inactive' == 'occupied'
2026-01-03T21:56:49.3098947Z E     
2026-01-03T21:56:49.3099104Z E     - occupied
2026-01-03T21:56:49.3099265Z E     + inactive
2026-01-03T21:56:49.3099506Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.3099823Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.3100212Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.3101502Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.917702-08:00>>
2026-01-03T21:56:49.3103361Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.917868-08:00>>
2026-01-03T21:56:49.3104867Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:41.917995-08:00>>
2026-01-03T21:56:49.3106403Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:41.918111-08:00>>
2026-01-03T21:56:49.3107496Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3107982Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.3108360Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.3108871Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.3110256Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.917702-08:00>>
2026-01-03T21:56:49.3112210Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.917868-08:00>>
2026-01-03T21:56:49.3113894Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:41.917995-08:00>>
2026-01-03T21:56:49.3115484Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:41.918111-08:00>>
2026-01-03T21:56:49.3116643Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3117290Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.3117807Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.3118861Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.3119912Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3120446Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.3121002Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.3121732Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3122809Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.3123783Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.3124425Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.3125284Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3126264Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.3127008Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.3127825Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.3128605Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.3129510Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3130553Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3132893Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.917702-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.926293-08:00>>
2026-01-03T21:56:49.3134873Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.3135614Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.3136321Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.3136836Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.3137418Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.3138087Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3138824Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3139280Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.3139693Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.3140254Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.3140924Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=05458296b87e8a1aeea55547ce70c376>
2026-01-03T21:56:49.3141834Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.3142940Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.3144726Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>>
2026-01-03T21:56:49.3146322Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3146758Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.3147136Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.3147646Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.3148368Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.3149275Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.3151413Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.941163-08:00>>
2026-01-03T21:56:49.3153784Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.3154731Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.3157986Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:41.941820-08:00>>
2026-01-03T21:56:49.3161372Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.3162332Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.3164944Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:41.942490-08:00>>
2026-01-03T21:56:49.3167500Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.3168491Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.3171938Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:41.943092-08:00>>
2026-01-03T21:56:49.3174940Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.3176027Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.3177701Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:41.943715-08:00>>
2026-01-03T21:56:49.3179192Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3179653Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.3180079Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.3180665Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.3181354Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.3181886Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.3182384Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.3183219Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.3184154Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.3185930Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:41.947180-08:00>>
2026-01-03T21:56:49.3187619Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.3188304Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.3189000Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.3189743Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3190426Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.3191749Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.917868-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:41.949003-08:00>>
2026-01-03T21:56:49.3193257Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.3193984Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.3194752Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.3195533Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3198128Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>>
2026-01-03T21:56:49.3203399Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.941163-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.950031-08:00>>
2026-01-03T21:56:49.3211027Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:41.941820-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:41.941820-08:00>>
2026-01-03T21:56:49.3216383Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:41.942490-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:41.942490-08:00>>
2026-01-03T21:56:49.3221724Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:41.943092-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:41.943092-08:00>>
2026-01-03T21:56:49.3225631Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:41.943715-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:41.943715-08:00>>
2026-01-03T21:56:49.3228486Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:41.947180-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:41.947180-08:00>>
2026-01-03T21:56:49.3230087Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.3230651Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.3231777Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.3233009Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3233637Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.3234280Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.3235089Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3236151Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.3237215Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.3237962Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.3238926Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3240006Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.3240889Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.3241843Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.3242858Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.3244038Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3245199Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3247393Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.917702-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.926293-08:00>>
2026-01-03T21:56:49.3249540Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.3250381Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.3251164Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.3251753Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.3252301Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.3253183Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3254023Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3254560Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.3255053Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.3255723Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.3256497Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=05458296b87e8a1aeea55547ce70c376>
2026-01-03T21:56:49.3257497Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.3258602Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.3260458Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>>
2026-01-03T21:56:49.3262120Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3262730Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.3263195Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.3263922Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.3264792Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.3265792Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.3268019Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.941163-08:00>>
2026-01-03T21:56:49.3270389Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.3271426Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.3274864Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:41.941820-08:00>>
2026-01-03T21:56:49.3278250Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.3279301Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.3281898Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:41.942490-08:00>>
2026-01-03T21:56:49.3284622Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.3285809Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.3289292Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:41.943092-08:00>>
2026-01-03T21:56:49.3292400Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.3293544Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.3295285Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:41.943715-08:00>>
2026-01-03T21:56:49.3296868Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3297372Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.3297874Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.3298521Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.3299164Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.3299760Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.3300362Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.3301234Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.3302285Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.3304224Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:41.947180-08:00>>
2026-01-03T21:56:49.3305959Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.3306708Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.3307584Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.3308403Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3309159Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.3310541Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.917868-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:41.949003-08:00>>
2026-01-03T21:56:49.3312136Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.3313073Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:673 Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.3313951Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:693 Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.3314866Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3317465Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>>
2026-01-03T21:56:49.3322784Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.941163-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.950031-08:00>>
2026-01-03T21:56:49.3329031Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:41.941820-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:41.941820-08:00>>
2026-01-03T21:56:49.3334371Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:41.942490-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:41.942490-08:00>>
2026-01-03T21:56:49.3339758Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:41.943092-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:41.943092-08:00>>
2026-01-03T21:56:49.3343696Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:41.943715-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:41.943715-08:00>>
2026-01-03T21:56:49.3346476Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:41.947180-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:41.947180-08:00>>
2026-01-03T21:56:49.3348117Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.3348680Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3350242Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:41.968176+00:00'}}
2026-01-03T21:56:49.3352085Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3353965Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:41.968532+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3355441Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.3356003Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.3358358Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:41.969692-08:00>>
2026-01-03T21:56:49.3362920Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.950031-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:41.970510-08:00>>
2026-01-03T21:56:49.3368810Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:41.941820-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:41.971019-08:00>>
2026-01-03T21:56:49.3375176Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:41.942490-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:41.971594-08:00>>
2026-01-03T21:56:49.3381633Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:41.943092-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:41.972105-08:00>>
2026-01-03T21:56:49.3386911Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:41.943715-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:41.972654-08:00>>
2026-01-03T21:56:49.3390577Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:41.947180-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:41.973517-08:00>>
2026-01-03T21:56:49.3393704Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:41.974285+00:00'}}
2026-01-03T21:56:49.3395422Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3397285Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:41.974594+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3398777Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.3399331Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.3399814Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.3400239Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.3401307Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde458f290>>}
2026-01-03T21:56:49.3403188Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde458e240>>}
2026-01-03T21:56:49.3404223Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.3404673Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.3405060Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.3405370Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.3405969Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3407610Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:41.968176+00:00'}}
2026-01-03T21:56:49.3409459Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3411331Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:41.968532+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3413026Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.3413694Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.3416034Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:41.937761-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:41.969692-08:00>>
2026-01-03T21:56:49.3420698Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:41.950031-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:41.970510-08:00>>
2026-01-03T21:56:49.3426838Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:41.941820-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:41.971019-08:00>>
2026-01-03T21:56:49.3433169Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:41.942490-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:41.971594-08:00>>
2026-01-03T21:56:49.3439802Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:41.943092-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:41.972105-08:00>>
2026-01-03T21:56:49.3445044Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:41.943715-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:41.972654-08:00>>
2026-01-03T21:56:49.3448888Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:41.947180-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:41.973517-08:00>>
2026-01-03T21:56:49.3452003Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:41.974285+00:00'}}
2026-01-03T21:56:49.3453967Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3455833Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:41.974594+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3457417Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.3458096Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.3458655Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.3459148Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.3460281Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde458f290>>}
2026-01-03T21:56:49.3462026Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde458e240>>}
2026-01-03T21:56:49.3463344Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.3463890Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.3464377Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.3464802Z ___________ TestRoomOccupancySensor.test_occupied_sensors_attribute ____________
2026-01-03T21:56:49.3465270Z tests/test_occupancy_and_control_sensors.py:156: in test_occupied_sensors_attribute
2026-01-03T21:56:49.3465644Z     assert len(occupied_sensors) >= 1
2026-01-03T21:56:49.3465862Z E   assert 0 >= 1
2026-01-03T21:56:49.3466042Z E    +  where 0 = len([])
2026-01-03T21:56:49.3466309Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.3466641Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.3467140Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.3468456Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.993349-08:00>>
2026-01-03T21:56:49.3470241Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.993521-08:00>>
2026-01-03T21:56:49.3471749Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:41.993650-08:00>>
2026-01-03T21:56:49.3473391Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:41.993767-08:00>>
2026-01-03T21:56:49.3474481Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3474986Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.3475373Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.3475893Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.3477275Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.993349-08:00>>
2026-01-03T21:56:49.3479105Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.993521-08:00>>
2026-01-03T21:56:49.3480678Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:41.993650-08:00>>
2026-01-03T21:56:49.3482399Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:41.993767-08:00>>
2026-01-03T21:56:49.3483659Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3484180Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.3484700Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.3485754Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.3486810Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3487463Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.3488020Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.3488757Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3489745Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.3490719Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.3491362Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.3492219Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3493336Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.3494092Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.3494902Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.3495695Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.3496596Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3497636Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3499764Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.993349-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.004847-08:00>>
2026-01-03T21:56:49.3501714Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.3502449Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.3503255Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.3503890Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.3504363Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.3505030Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3505768Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3506222Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.3506645Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.3507205Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.3507888Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=abdf6ce27e27a511fdb4e95fd8189370>
2026-01-03T21:56:49.3508954Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.3509954Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.3511751Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>>
2026-01-03T21:56:49.3513470Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3513897Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.3514278Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.3514773Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.3515498Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.3516405Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.3518535Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.022809-08:00>>
2026-01-03T21:56:49.3520702Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.3521641Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.3525119Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.023652-08:00>>
2026-01-03T21:56:49.3528615Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.3529741Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.3532412Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.024473-08:00>>
2026-01-03T21:56:49.3535099Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.3536076Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.3539886Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.025215-08:00>>
2026-01-03T21:56:49.3542913Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.3543850Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.3545523Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.025953-08:00>>
2026-01-03T21:56:49.3547027Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3547456Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.3548031Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.3548624Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.3549206Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.3549739Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.3550577Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.3551878Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.3552919Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.3554873Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.030181-08:00>>
2026-01-03T21:56:49.3556552Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.3557240Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.3557941Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.3558693Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3559387Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.3560713Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.993521-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.032212-08:00>>
2026-01-03T21:56:49.3562110Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.3562929Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.3563712Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.3564500Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3566973Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>>
2026-01-03T21:56:49.3572285Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.022809-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.033346-08:00>>
2026-01-03T21:56:49.3578600Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.023652-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.023652-08:00>>
2026-01-03T21:56:49.3583848Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.024473-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.024473-08:00>>
2026-01-03T21:56:49.3589040Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.025215-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.025215-08:00>>
2026-01-03T21:56:49.3593073Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.025953-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.025953-08:00>>
2026-01-03T21:56:49.3595810Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.030181-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.030181-08:00>>
2026-01-03T21:56:49.3597415Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.3597983Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.3599217Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.3600349Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3600968Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.3601603Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.3602412Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3603580Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.3604649Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.3605393Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.3606362Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3607432Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.3608314Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.3609279Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.3610210Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.3611271Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3612433Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3614840Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:41.993349-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.004847-08:00>>
2026-01-03T21:56:49.3616887Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.3617728Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.3618517Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.3619109Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.3619768Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.3620528Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3621365Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3621903Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.3622392Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.3623157Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.3623928Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=abdf6ce27e27a511fdb4e95fd8189370>
2026-01-03T21:56:49.3624944Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.3626043Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.3627900Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>>
2026-01-03T21:56:49.3629574Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3630078Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.3630524Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.3631132Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.3631992Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.3633073Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.3635376Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.022809-08:00>>
2026-01-03T21:56:49.3637832Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.3638874Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.3642197Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.023652-08:00>>
2026-01-03T21:56:49.3645812Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.3646278Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.3648339Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.024473-08:00>>
2026-01-03T21:56:49.3648880Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.3649342Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.3652385Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.025215-08:00>>
2026-01-03T21:56:49.3653027Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.3653481Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.3654704Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.025953-08:00>>
2026-01-03T21:56:49.3655109Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3655244Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.3655534Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.3655814Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.3656093Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.3656331Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.3656622Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.3657147Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.3657588Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.3658927Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.030181-08:00>>
2026-01-03T21:56:49.3659269Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.3659602Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.3659964Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.3660338Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3660634Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.3661792Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:41.993521-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.032212-08:00>>
2026-01-03T21:56:49.3662206Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.3662571Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:673 Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.3663119Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:693 Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.3663502Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3665624Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>>
2026-01-03T21:56:49.3668838Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.022809-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.033346-08:00>>
2026-01-03T21:56:49.3671733Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.023652-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.023652-08:00>>
2026-01-03T21:56:49.3674110Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.024473-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.024473-08:00>>
2026-01-03T21:56:49.3677156Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.025215-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.025215-08:00>>
2026-01-03T21:56:49.3678560Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.025953-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.025953-08:00>>
2026-01-03T21:56:49.3679986Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.030181-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.030181-08:00>>
2026-01-03T21:56:49.3680138Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.3680474Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3681625Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.055221+00:00'}}
2026-01-03T21:56:49.3682136Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3683403Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.055982+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3683659Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.3684002Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.3685941Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.058284-08:00>>
2026-01-03T21:56:49.3688423Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.033346-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.059799-08:00>>
2026-01-03T21:56:49.3691873Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.023652-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.060398-08:00>>
2026-01-03T21:56:49.3694605Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.024473-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.060986-08:00>>
2026-01-03T21:56:49.3698493Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.025215-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.061552-08:00>>
2026-01-03T21:56:49.3700362Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.025953-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.062110-08:00>>
2026-01-03T21:56:49.3702209Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.030181-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.063030-08:00>>
2026-01-03T21:56:49.3703461Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.063849+00:00'}}
2026-01-03T21:56:49.3703969Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3705150Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.064191+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3705395Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.3705622Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.3705794Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.3705976Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.3706890Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde48c98e0>>}
2026-01-03T21:56:49.3707698Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde48c9cd0>>}
2026-01-03T21:56:49.3707866Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.3708075Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.3708173Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.3708313Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.3708792Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3709986Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.055221+00:00'}}
2026-01-03T21:56:49.3710576Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3711798Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.055982+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3712106Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.3712391Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.3714503Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.019094-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.058284-08:00>>
2026-01-03T21:56:49.3717142Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.033346-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.059799-08:00>>
2026-01-03T21:56:49.3720520Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.023652-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.060398-08:00>>
2026-01-03T21:56:49.3723374Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.024473-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.060986-08:00>>
2026-01-03T21:56:49.3727199Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.025215-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.061552-08:00>>
2026-01-03T21:56:49.3729107Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.025953-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.062110-08:00>>
2026-01-03T21:56:49.3730983Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.030181-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.063030-08:00>>
2026-01-03T21:56:49.3732180Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.063849+00:00'}}
2026-01-03T21:56:49.3732995Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3734213Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.064191+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3734527Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.3734814Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.3735010Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.3735223Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.3736066Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde48c98e0>>}
2026-01-03T21:56:49.3736902Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde48c9cd0>>}
2026-01-03T21:56:49.3737097Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.3737358Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.3737514Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.3737702Z ___________ TestRoomOccupancySensor.test_time_until_active_attribute ___________
2026-01-03T21:56:49.3737907Z tests/test_occupancy_and_control_sensors.py:183: in test_time_until_active_attribute
2026-01-03T21:56:49.3737996Z     assert time_until_active is not None
2026-01-03T21:56:49.3738074Z E   assert None is not None
2026-01-03T21:56:49.3738230Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.3738440Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.3738661Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.3739653Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.083195-08:00>>
2026-01-03T21:56:49.3740366Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.083380-08:00>>
2026-01-03T21:56:49.3741195Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:42.083508-08:00>>
2026-01-03T21:56:49.3756561Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:42.083624-08:00>>
2026-01-03T21:56:49.3756928Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3757095Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.3757270Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.3757564Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.3758620Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.083195-08:00>>
2026-01-03T21:56:49.3759375Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.083380-08:00>>
2026-01-03T21:56:49.3760129Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:42.083508-08:00>>
2026-01-03T21:56:49.3760905Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:42.083624-08:00>>
2026-01-03T21:56:49.3761213Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3761358Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.3761662Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.3762338Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.3762928Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3763107Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.3763439Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.3763762Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3764354Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.3764671Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.3764914Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.3765579Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3765946Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.3766250Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.3766682Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.3766963Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.3767498Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3767941Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3769582Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.083195-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.091923-08:00>>
2026-01-03T21:56:49.3769858Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.3770254Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.3770495Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.3770699Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.3770890Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.3771289Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3771556Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3771668Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.3771891Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.3772155Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.3772574Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=90e59d9a809b38951f961eacba649864>
2026-01-03T21:56:49.3773202Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.3773645Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.3774927Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>>
2026-01-03T21:56:49.3775284Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3775391Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.3775594Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.3775809Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.3776245Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.3776654Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.3778330Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.107218-08:00>>
2026-01-03T21:56:49.3778787Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.3779197Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.3781996Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.107904-08:00>>
2026-01-03T21:56:49.3782459Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.3783095Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.3785144Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.108585-08:00>>
2026-01-03T21:56:49.3785724Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.3786155Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.3789118Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.109190-08:00>>
2026-01-03T21:56:49.3789566Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.3789981Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.3791169Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.109815-08:00>>
2026-01-03T21:56:49.3791414Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3791519Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.3791769Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.3792016Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.3792262Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.3792462Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.3792774Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.3793221Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.3793747Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.3795054Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.113326-08:00>>
2026-01-03T21:56:49.3795366Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.3795664Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.3796100Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.3796449Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3796713Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.3797682Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.083380-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.115128-08:00>>
2026-01-03T21:56:49.3798028Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.3798329Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.3798736Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.3799038Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3801135Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>>
2026-01-03T21:56:49.3804385Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.107218-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.116138-08:00>>
2026-01-03T21:56:49.3807271Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.107904-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.107904-08:00>>
2026-01-03T21:56:49.3809498Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.108585-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.108585-08:00>>
2026-01-03T21:56:49.3812503Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.109190-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.109190-08:00>>
2026-01-03T21:56:49.3813901Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.109815-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.109815-08:00>>
2026-01-03T21:56:49.3815287Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.113326-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.113326-08:00>>
2026-01-03T21:56:49.3815440Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.3815894Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.3816620Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.3816966Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3817150Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.3817533Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.3817895Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3818613Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.3818985Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.3819281Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.3819861Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3820276Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.3820667Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.3821152Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.3821518Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.3822137Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3822691Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3824356Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.083195-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.091923-08:00>>
2026-01-03T21:56:49.3824692Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.3825128Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.3825413Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.3825766Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.3826003Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.3826459Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3826760Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3826921Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.3827181Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.3827513Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.3827999Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=90e59d9a809b38951f961eacba649864>
2026-01-03T21:56:49.3828560Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.3829023Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.3830353Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>>
2026-01-03T21:56:49.3830637Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3830777Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.3831011Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.3831291Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.3831788Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.3832221Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.3834058Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.107218-08:00>>
2026-01-03T21:56:49.3834584Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.3835032Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.3837981Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.107904-08:00>>
2026-01-03T21:56:49.3838645Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.3839110Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.3841190Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.108585-08:00>>
2026-01-03T21:56:49.3841738Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.3842199Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.3845245Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.109190-08:00>>
2026-01-03T21:56:49.3845762Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.3846213Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.3847558Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.109815-08:00>>
2026-01-03T21:56:49.3847848Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3847986Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.3848279Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.3848560Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.3848841Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.3849178Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.3849467Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.3849983Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.3850420Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.3851771Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.113326-08:00>>
2026-01-03T21:56:49.3852112Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.3852447Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.3852919Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.3853303Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3853600Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.3854618Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.083380-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.115128-08:00>>
2026-01-03T21:56:49.3855025Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.3855378Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:673 Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.3855833Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:693 Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.3856220Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3858478Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>>
2026-01-03T21:56:49.3861546Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.107218-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.116138-08:00>>
2026-01-03T21:56:49.3864667Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.107904-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.107904-08:00>>
2026-01-03T21:56:49.3866834Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.108585-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.108585-08:00>>
2026-01-03T21:56:49.3870035Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.109190-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.109190-08:00>>
2026-01-03T21:56:49.3871359Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.109815-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.109815-08:00>>
2026-01-03T21:56:49.3873160Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.113326-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.113326-08:00>>
2026-01-03T21:56:49.3873328Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.3873666Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3874841Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.134378+00:00'}}
2026-01-03T21:56:49.3875352Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3876526Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.134720+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3876778Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.3877005Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.3878959Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.135903-08:00>>
2026-01-03T21:56:49.3881575Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.116138-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.136727-08:00>>
2026-01-03T21:56:49.3885142Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.107904-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.137242-08:00>>
2026-01-03T21:56:49.3887773Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.108585-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.137825-08:00>>
2026-01-03T21:56:49.3891660Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.109190-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.138366-08:00>>
2026-01-03T21:56:49.3893551Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.109815-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.138909-08:00>>
2026-01-03T21:56:49.3895392Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.113326-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.139773-08:00>>
2026-01-03T21:56:49.3896650Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.140544+00:00'}}
2026-01-03T21:56:49.3897162Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3898332Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.140848+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3898578Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.3898800Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.3898974Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.3899160Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.3899957Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde458fef0>>}
2026-01-03T21:56:49.3900751Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde458c980>>}
2026-01-03T21:56:49.3900915Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.3901119Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.3901226Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.3901472Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.3901848Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3903140Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.134378+00:00'}}
2026-01-03T21:56:49.3903732Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3905060Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.134720+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3905367Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.3905652Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.3907629Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.103714-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.135903-08:00>>
2026-01-03T21:56:49.3910138Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.116138-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.136727-08:00>>
2026-01-03T21:56:49.3913717Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.107904-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.137242-08:00>>
2026-01-03T21:56:49.3916377Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.108585-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.137825-08:00>>
2026-01-03T21:56:49.3920285Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.109190-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.138366-08:00>>
2026-01-03T21:56:49.3922084Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.109815-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.138909-08:00>>
2026-01-03T21:56:49.3924044Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.113326-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.139773-08:00>>
2026-01-03T21:56:49.3925384Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.140544+00:00'}}
2026-01-03T21:56:49.3925974Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.3927186Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.140848+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.3927599Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.3927879Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.3928077Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.3928292Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.3929129Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde458fef0>>}
2026-01-03T21:56:49.3929967Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde458c980>>}
2026-01-03T21:56:49.3930161Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.3930419Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.3930572Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.3930780Z _ TestRoomOccupancySensor.test_active_area_enters_grace_period_when_unoccupied _
2026-01-03T21:56:49.3931037Z tests/test_occupancy_and_control_sensors.py:337: in test_active_area_enters_grace_period_when_unoccupied
2026-01-03T21:56:49.3931182Z     assert state.attributes.get("is_in_grace_period") is True
2026-01-03T21:56:49.3931272Z E   AssertionError: assert False is True
2026-01-03T21:56:49.3931512Z E    +  where False = <built-in method get of ReadOnlyDict object at 0x7efde4594aa0>('is_in_grace_period')
2026-01-03T21:56:49.3933111Z E    +    where <built-in method get of ReadOnlyDict object at 0x7efde4594aa0> = {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'}.get
2026-01-03T21:56:49.3936158Z E    +      where {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'} = <state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>.attributes
2026-01-03T21:56:49.3936405Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.3936504Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.3936725Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.3937709Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.487464-08:00>>
2026-01-03T21:56:49.3938429Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.487635-08:00>>
2026-01-03T21:56:49.3939156Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:42.487761-08:00>>
2026-01-03T21:56:49.3939889Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:42.487877-08:00>>
2026-01-03T21:56:49.3940160Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3940297Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.3940453Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.3940739Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.3941759Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.487464-08:00>>
2026-01-03T21:56:49.3942509Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.487635-08:00>>
2026-01-03T21:56:49.3943362Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:42.487761-08:00>>
2026-01-03T21:56:49.3944252Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:42.487877-08:00>>
2026-01-03T21:56:49.3944564Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.3944701Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.3944994Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.3945672Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.3946084Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3946235Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.3946566Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.3946891Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3947483Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.3947799Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.3948041Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.3948581Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.3948941Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.3949244Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.3949675Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.3949952Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.3950495Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.3950929Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.3952539Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.487464-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.496063-08:00>>
2026-01-03T21:56:49.3952906Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.3953402Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.3953642Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.3953843Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.3954031Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.3954422Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.3954677Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3954793Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.3955117Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.3955372Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.3955719Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=171e280d24dc193b3b5b1290bde08b26>
2026-01-03T21:56:49.3956207Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.3956635Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.3957931Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.3958173Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3958275Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.3958476Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.3958687Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.3959118Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.3959512Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.3961173Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.510978-08:00>>
2026-01-03T21:56:49.3961625Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.3962031Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.3965013Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.3965568Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.3965995Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.3968026Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.512342-08:00>>
2026-01-03T21:56:49.3968519Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.3968945Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.3971831Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.3972272Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.3972793Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.3973979Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.3974339Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.3974446Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.3974697Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.3974941Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.3975183Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.3975387Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.3975596Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.3976031Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.3976550Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.3977859Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.3978168Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.3978469Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.3978794Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.3979136Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.3979401Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.3980372Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.487635-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.518896-08:00>>
2026-01-03T21:56:49.3980724Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.3981025Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.3981419Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.3981726Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3984011Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.3987032Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.510978-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.519914-08:00>>
2026-01-03T21:56:49.3989998Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.511677-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.3992102Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.512342-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.512342-08:00>>
2026-01-03T21:56:49.3995225Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.512959-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.3996612Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.513585-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.3998010Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.517063-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.3998415Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.3999780Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_last_reported=2026-01-03T13:56:42.519697-08:00, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.4001655Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_last_reported=2026-01-03T13:56:42.519914-08:00, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.519914-08:00>>
2026-01-03T21:56:49.4004593Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.520150-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.4008300Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.512342-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>>
2026-01-03T21:56:49.4011302Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.520613-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.4012788Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.520809-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.4014184Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.520949-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.4015087Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.518896-08:00>, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.522639-08:00>>
2026-01-03T21:56:49.4015443Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.front_door_contact changed from on to off
2026-01-03T21:56:49.4015745Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor closed: binary_sensor.front_door_contact
2026-01-03T21:56:49.4016075Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Cancelled open timer - all sensors closed before timeout
2026-01-03T21:56:49.4016384Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4018588Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.4021607Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.519914-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.523547-08:00>>
2026-01-03T21:56:49.4024646Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.521565-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.4026793Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.521793-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>>
2026-01-03T21:56:49.4029784Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.522040-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.4031179Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.522232-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.4032576Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.522392-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.4032928Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.4033275Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4033990Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4034342Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4034529Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4034897Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4035269Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4035882Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4036248Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4036548Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.4037130Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4037546Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4037938Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.4038421Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4038780Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.4039403Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4039973Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4041629Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.487464-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.496063-08:00>>
2026-01-03T21:56:49.4041960Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.4042482Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4042868Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4043104Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4043332Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4043788Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4044087Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4044238Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.4044500Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4044829Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4045199Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=171e280d24dc193b3b5b1290bde08b26>
2026-01-03T21:56:49.4045756Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4046222Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4047543Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.4047833Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4047965Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.4048206Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4048485Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4048976Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4049523Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4051220Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.510978-08:00>>
2026-01-03T21:56:49.4051735Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4052280Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4055216Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.4055750Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4056204Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4058274Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.512342-08:00>>
2026-01-03T21:56:49.4058801Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4059268Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4062299Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.4062921Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4063364Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4064723Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.4065002Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4065129Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.4065423Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4065703Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4065983Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4066220Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4066503Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4067009Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4067450Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4068813Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.4069157Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4069487Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4069837Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4070218Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4070626Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4071638Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.487635-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.518896-08:00>>
2026-01-03T21:56:49.4072044Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.4072398Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:673 Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.4072957Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:693 Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.4073458Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4075575Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.4078642Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.510978-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.519914-08:00>>
2026-01-03T21:56:49.4081629Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.511677-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.4083871Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.512342-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.512342-08:00>>
2026-01-03T21:56:49.4087050Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.512959-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.4088361Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.513585-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.4089773Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.517063-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.4090161Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4091555Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_last_reported=2026-01-03T13:56:42.519697-08:00, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.4093689Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_last_reported=2026-01-03T13:56:42.519914-08:00, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.519914-08:00>>
2026-01-03T21:56:49.4096580Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.520150-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.4100299Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.512342-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>>
2026-01-03T21:56:49.4103424Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.520613-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.4104736Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.520809-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.4106264Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.520949-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.4107214Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.518896-08:00>, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.522639-08:00>>
2026-01-03T21:56:49.4107717Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.front_door_contact changed from on to off
2026-01-03T21:56:49.4108078Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:701 Sensor closed: binary_sensor.front_door_contact
2026-01-03T21:56:49.4108458Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:711 Cancelled open timer - all sensors closed before timeout
2026-01-03T21:56:49.4108833Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4110950Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>>
2026-01-03T21:56:49.4114145Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.519914-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.523547-08:00>>
2026-01-03T21:56:49.4117135Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.521565-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>>
2026-01-03T21:56:49.4119275Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.521793-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>>
2026-01-03T21:56:49.4122409Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.522040-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>>
2026-01-03T21:56:49.4123811Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.522232-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>>
2026-01-03T21:56:49.4125236Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.522392-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>>
2026-01-03T21:56:49.4125392Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.4125725Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4126868Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.541957+00:00'}}
2026-01-03T21:56:49.4127486Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4128716Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.542469+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.521086+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4128963Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4129193Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4131236Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.544095-08:00>>
2026-01-03T21:56:49.4133678Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.523547-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.544925-08:00>>
2026-01-03T21:56:49.4137016Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.545461-08:00>>
2026-01-03T21:56:49.4139735Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.546011-08:00>>
2026-01-03T21:56:49.4143590Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.546536-08:00>>
2026-01-03T21:56:49.4145466Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.547064-08:00>>
2026-01-03T21:56:49.4147317Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.547924-08:00>>
2026-01-03T21:56:49.4148472Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.548698+00:00'}}
2026-01-03T21:56:49.4148976Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4150297Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.549001+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.521086+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4150549Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4150772Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4150943Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4151127Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4151926Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde47e2840>>}
2026-01-03T21:56:49.4152922Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47e15b0>>}
2026-01-03T21:56:49.4153090Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4153299Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4153397Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4153536Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.4153905Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4155099Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.541957+00:00'}}
2026-01-03T21:56:49.4155688Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4156959Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.542469+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.521086+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4157266Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4157551Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4159524Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.507678-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.544095-08:00>>
2026-01-03T21:56:49.4162003Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.523547-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.544925-08:00>>
2026-01-03T21:56:49.4165552Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.511677-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.545461-08:00>>
2026-01-03T21:56:49.4168222Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.546011-08:00>>
2026-01-03T21:56:49.4172139Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.512959-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.546536-08:00>>
2026-01-03T21:56:49.4174040Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.513585-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.547064-08:00>>
2026-01-03T21:56:49.4176050Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.517063-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.547924-08:00>>
2026-01-03T21:56:49.4177250Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.548698+00:00'}}
2026-01-03T21:56:49.4177848Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4179122Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.549001+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.521086+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4179430Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4179722Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4179919Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4180132Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4180971Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde47e2840>>}
2026-01-03T21:56:49.4181802Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47e15b0>>}
2026-01-03T21:56:49.4182105Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4182368Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4182523Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4182838Z _ TestRoomOccupancySensor.test_reoccupancy_during_grace_period_clears_grace_period _
2026-01-03T21:56:49.4183113Z tests/test_occupancy_and_control_sensors.py:374: in test_reoccupancy_during_grace_period_clears_grace_period
2026-01-03T21:56:49.4183249Z     assert state.attributes.get("is_in_grace_period") is True
2026-01-03T21:56:49.4183341Z E   AssertionError: assert False is True
2026-01-03T21:56:49.4183586Z E    +  where False = <built-in method get of ReadOnlyDict object at 0x7efde45dcc80>('is_in_grace_period')
2026-01-03T21:56:49.4185070Z E    +    where <built-in method get of ReadOnlyDict object at 0x7efde45dcc80> = {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'}.get
2026-01-03T21:56:49.4188138Z E    +      where {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'} = <state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.602209-08:00>.attributes
2026-01-03T21:56:49.4188285Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.4188387Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4188600Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.4189593Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.567224-08:00>>
2026-01-03T21:56:49.4190311Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.567407-08:00>>
2026-01-03T21:56:49.4191030Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:42.567533-08:00>>
2026-01-03T21:56:49.4191864Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:42.567650-08:00>>
2026-01-03T21:56:49.4192141Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4192279Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.4192432Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4192807Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.4193825Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.567224-08:00>>
2026-01-03T21:56:49.4194687Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.567407-08:00>>
2026-01-03T21:56:49.4195441Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:42.567533-08:00>>
2026-01-03T21:56:49.4196208Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:42.567650-08:00>>
2026-01-03T21:56:49.4196521Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4196654Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.4196954Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4197631Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4197939Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4198092Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4198414Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4198740Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4199318Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4199633Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4199874Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.4200414Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4200774Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4201186Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.4201625Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4201903Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.4202439Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4202964Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4204692Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.567224-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.575787-08:00>>
2026-01-03T21:56:49.4204968Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.4205359Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4205593Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4205794Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4205987Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4206381Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4206642Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4206754Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.4206973Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4207226Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4207568Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=777673c436efa6749ec04b9c5ebe199a>
2026-01-03T21:56:49.4208068Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4208501Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4209780Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>>
2026-01-03T21:56:49.4210016Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4210122Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.4210321Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4210641Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4211079Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4211476Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4213331Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.590722-08:00>>
2026-01-03T21:56:49.4213901Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4214313Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4217084Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>>
2026-01-03T21:56:49.4217541Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4217965Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4220003Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.592011-08:00>>
2026-01-03T21:56:49.4220469Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4220892Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4223989Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>>
2026-01-03T21:56:49.4224438Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4224952Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4226143Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>>
2026-01-03T21:56:49.4226384Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4226487Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.4226742Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4226995Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4227241Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4227444Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4227655Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4228098Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4228511Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4229814Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>>
2026-01-03T21:56:49.4230125Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4230424Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4230744Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4231093Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4231355Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4232402Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.567407-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.598708-08:00>>
2026-01-03T21:56:49.4232879Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.4233179Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.4233574Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.4233884Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4236089Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>>
2026-01-03T21:56:49.4239106Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.590722-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.599702-08:00>>
2026-01-03T21:56:49.4241974Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.591362-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>>
2026-01-03T21:56:49.4244294Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.592011-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.592011-08:00>>
2026-01-03T21:56:49.4247286Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.592631-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>>
2026-01-03T21:56:49.4248665Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.593403-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>>
2026-01-03T21:56:49.4250054Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.596896-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>>
2026-01-03T21:56:49.4250967Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.598708-08:00>, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.600865-08:00>>
2026-01-03T21:56:49.4251314Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor binary_sensor.front_door_contact changed from on to off
2026-01-03T21:56:49.4251619Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Sensor closed: binary_sensor.front_door_contact
2026-01-03T21:56:49.4251945Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Cancelled open timer - all sensors closed before timeout
2026-01-03T21:56:49.4252242Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4254585Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>>
2026-01-03T21:56:49.4257596Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.599702-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.601749-08:00>>
2026-01-03T21:56:49.4260565Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.599933-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>>
2026-01-03T21:56:49.4264248Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.592011-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.602209-08:00>>
2026-01-03T21:56:49.4267353Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.600387-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>>
2026-01-03T21:56:49.4268664Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.600588-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>>
2026-01-03T21:56:49.4270163Z DEBUG:homeassistant.core:Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.600726-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>>
2026-01-03T21:56:49.4270309Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.4270645Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4271364Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4271709Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4271901Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4272267Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4272723Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4273345Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4273718Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4274019Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.4274599Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4275008Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4275398Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.4275879Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4276353Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.4276979Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4277442Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4279099Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.567224-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:42.575787-08:00>>
2026-01-03T21:56:49.4279531Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.4279961Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4280242Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4280475Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4280697Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4281159Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4281455Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4281605Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.4281866Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4282185Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4282551Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=777673c436efa6749ec04b9c5ebe199a>
2026-01-03T21:56:49.4283206Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4283676Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4285027Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>>
2026-01-03T21:56:49.4285312Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4285447Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.4285799Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4286082Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4286570Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4287005Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4288689Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.590722-08:00>>
2026-01-03T21:56:49.4289300Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4289746Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4292555Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>>
2026-01-03T21:56:49.4293403Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4293871Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4295926Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.592011-08:00>>
2026-01-03T21:56:49.4296587Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4297060Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4300011Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>>
2026-01-03T21:56:49.4300629Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4301071Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4302288Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>>
2026-01-03T21:56:49.4302573Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4302822Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.4303114Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4303393Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4303664Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4303902Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4304183Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4304691Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4305137Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4306473Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>>
2026-01-03T21:56:49.4306810Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4307264Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4307619Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4308001Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4308296Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4309308Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:42.567407-08:00>, new_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.598708-08:00>>
2026-01-03T21:56:49.4309832Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.front_door_contact changed from off to on
2026-01-03T21:56:49.4310188Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:673 Sensor opened: binary_sensor.front_door_contact
2026-01-03T21:56:49.4310640Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:693 Started open timer for 5 minutes (triggered by binary_sensor.front_door_contact)
2026-01-03T21:56:49.4311021Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4313252Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>>
2026-01-03T21:56:49.4316307Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.590722-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.599702-08:00>>
2026-01-03T21:56:49.4319313Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.591362-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>>
2026-01-03T21:56:49.4321474Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_last_reported=2026-01-03T13:56:42.592011-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.592011-08:00>>
2026-01-03T21:56:49.4324704Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.592631-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>>
2026-01-03T21:56:49.4326008Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.593403-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>>
2026-01-03T21:56:49.4327427Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.596896-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>>
2026-01-03T21:56:49.4328376Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=<state binary_sensor.front_door_contact=on; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.598708-08:00>, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Motion Sensor @ 2026-01-03T13:56:42.600865-08:00>>
2026-01-03T21:56:49.4328783Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:650 Sensor binary_sensor.front_door_contact changed from on to off
2026-01-03T21:56:49.4329252Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:701 Sensor closed: binary_sensor.front_door_contact
2026-01-03T21:56:49.4329634Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:711 Cancelled open timer - all sensors closed before timeout
2026-01-03T21:56:49.4330014Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:update_coordinator.py:506 Manually updated thermostat_contact_sensors data
2026-01-03T21:56:49.4332139Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=1, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>>
2026-01-03T21:56:49.4335582Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=1; state_class=measurement, open_sensors=['binary_sensor.front_door_contact'], open_sensor_names=['Motion Sensor'], open_doors=1, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.599702-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.601749-08:00>>
2026-01-03T21:56:49.4338490Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_last_reported=2026-01-03T13:56:42.599933-08:00, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>>
2026-01-03T21:56:49.4342254Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.592011-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.602209-08:00>>
2026-01-03T21:56:49.4345475Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_last_reported=2026-01-03T13:56:42.600387-08:00, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>>
2026-01-03T21:56:49.4346917Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_last_reported=2026-01-03T13:56:42.600588-08:00, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>>
2026-01-03T21:56:49.4348350Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_reported[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_last_reported=2026-01-03T13:56:42.600726-08:00, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>>
2026-01-03T21:56:49.4348503Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.4348833Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4349992Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.620002+00:00'}}
2026-01-03T21:56:49.4350503Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4351726Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.620553+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.600859+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4352082Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4352315Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4354362Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.622675-08:00>>
2026-01-03T21:56:49.4356812Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.601749-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.624146-08:00>>
2026-01-03T21:56:49.4360161Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.625111-08:00>>
2026-01-03T21:56:49.4362865Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.602209-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.626165-08:00>>
2026-01-03T21:56:49.4366751Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.627124-08:00>>
2026-01-03T21:56:49.4368643Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.627733-08:00>>
2026-01-03T21:56:49.4370488Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.628619-08:00>>
2026-01-03T21:56:49.4371651Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.629397+00:00'}}
2026-01-03T21:56:49.4372158Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4373662Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.629708+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.600859+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4373923Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4374146Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4374311Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4374503Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4375426Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde47b0cb0>>}
2026-01-03T21:56:49.4376215Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47b0680>>}
2026-01-03T21:56:49.4376386Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4376589Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4376688Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4376938Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.4377317Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4378505Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.620002+00:00'}}
2026-01-03T21:56:49.4379097Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4380369Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.620553+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.600859+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4380688Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4380972Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4383059Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:42.587436-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:42.622675-08:00>>
2026-01-03T21:56:49.4385545Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:42.601749-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:42.624146-08:00>>
2026-01-03T21:56:49.4388942Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:42.591362-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:42.625111-08:00>>
2026-01-03T21:56:49.4391689Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.602209-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:42.626165-08:00>>
2026-01-03T21:56:49.4395620Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:42.592631-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:42.627124-08:00>>
2026-01-03T21:56:49.4397535Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:42.593403-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:42.627733-08:00>>
2026-01-03T21:56:49.4399432Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:42.596896-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:42.628619-08:00>>
2026-01-03T21:56:49.4400726Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:42.629397+00:00'}}
2026-01-03T21:56:49.4401318Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4402581Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:42.629708+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': True, 'occupancy_start_time': '2026-01-03T21:46:42.600859+00:00', 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4402979Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4403256Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4403452Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4403667Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4404507Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde47b0cb0>>}
2026-01-03T21:56:49.4405342Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47b0680>>}
2026-01-03T21:56:49.4405541Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4405796Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4405948Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4406093Z ________________________ test_options_flow_area_config _________________________
2026-01-03T21:56:49.4406455Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:362: in _async_configure
2026-01-03T21:56:49.4406551Z     user_input = data_schema(user_input)
2026-01-03T21:56:49.4406986Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:205: in __call__
2026-01-03T21:56:49.4407075Z     return self._compiled([], data)
2026-01-03T21:56:49.4407407Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:549: in validate_dict
2026-01-03T21:56:49.4407522Z     return base_validate(path, data.items(), out)
2026-01-03T21:56:49.4407863Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:382: in validate_mapping
2026-01-03T21:56:49.4407949Z     raise er.MultipleInvalid(errors)
2026-01-03T21:56:49.4408175Z E   voluptuous.error.MultipleInvalid: extra keys not allowed @ data['binary_sensors']
2026-01-03T21:56:49.4408183Z 
2026-01-03T21:56:49.4408348Z The above exception was the direct cause of the following exception:
2026-01-03T21:56:49.4408601Z tests/test_options_flow.py:280: in test_options_flow_area_config
2026-01-03T21:56:49.4408750Z     result = await hass.config_entries.options.async_configure(
2026-01-03T21:56:49.4409104Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:341: in async_configure
2026-01-03T21:56:49.4409232Z     result = await self._async_configure(flow_id, user_input)
2026-01-03T21:56:49.4409588Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:375: in _async_configure
2026-01-03T21:56:49.4409663Z     raise InvalidData(
2026-01-03T21:56:49.4409910Z E   homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.4410055Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.4410158Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4410376Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.4411381Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:43.864167-08:00>>
2026-01-03T21:56:49.4412101Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:43.864350-08:00>>
2026-01-03T21:56:49.4412941Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:43.864477-08:00>>
2026-01-03T21:56:49.4413705Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:43.864593-08:00>>
2026-01-03T21:56:49.4413978Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4414231Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4414562Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4414908Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4415318Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4415769Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4416120Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4416529Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4416857Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4417201Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4417603Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4418040Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4418384Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4418784Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4419072Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4419394Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4419778Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4420047Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4420192Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.4420348Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4420632Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.4421657Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:43.864167-08:00>>
2026-01-03T21:56:49.4422406Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:43.864350-08:00>>
2026-01-03T21:56:49.4423265Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:43.864477-08:00>>
2026-01-03T21:56:49.4424035Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:43.864593-08:00>>
2026-01-03T21:56:49.4424339Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4424622Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4425130Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4425518Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4425961Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4426358Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4426736Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4427176Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4427683Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4428057Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4428493Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4428857Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4429222Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4429657Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4430010Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4430366Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4430785Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4431087Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4431228Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.4431526Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4432206Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4432508Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4432758Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4433091Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4433410Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4433985Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4434422Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4434669Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.4435205Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4435573Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4435874Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.4436303Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4436695Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.4437233Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4437666Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4439298Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:43.864167-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:43.876745-08:00>>
2026-01-03T21:56:49.4439568Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.4439958Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4440198Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4440394Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4440588Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4440982Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4441246Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4441366Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.4441588Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4441840Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4442185Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=4e83ae61aa69c7f4f1a6c948fcfe9461>
2026-01-03T21:56:49.4442765Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4443195Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4444602Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:43.888113-08:00>>
2026-01-03T21:56:49.4444842Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4444945Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.4445147Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4445358Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4445792Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4446292Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4447953Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:43.891410-08:00>>
2026-01-03T21:56:49.4448405Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4448829Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4451610Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:43.892037-08:00>>
2026-01-03T21:56:49.4452064Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4452494Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4454737Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:43.892697-08:00>>
2026-01-03T21:56:49.4455210Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4455635Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4458521Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:43.893318-08:00>>
2026-01-03T21:56:49.4459071Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4459477Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4460670Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:43.893924-08:00>>
2026-01-03T21:56:49.4460910Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4461006Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.4461264Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4461510Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4461753Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4461958Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4462174Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4462704Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4463115Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4464410Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:43.897394-08:00>>
2026-01-03T21:56:49.4464832Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4465135Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4465455Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4465797Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4466063Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4466200Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.4466536Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4467354Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4467700Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4467888Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4468278Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4468647Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4469260Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4469632Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4469929Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.4470518Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4470926Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4471312Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.4471807Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4472166Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.4472870Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4473334Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4475094Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:43.864167-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:43.876745-08:00>>
2026-01-03T21:56:49.4475438Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.4475867Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4476147Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4476378Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4476709Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4477158Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4477462Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4477612Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.4477868Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4478195Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4478566Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=4e83ae61aa69c7f4f1a6c948fcfe9461>
2026-01-03T21:56:49.4479125Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4479588Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4480905Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:43.888113-08:00>>
2026-01-03T21:56:49.4481192Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4481330Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.4481565Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4481850Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4482337Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4482859Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4484654Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:43.891410-08:00>>
2026-01-03T21:56:49.4485174Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4485620Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4488419Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:43.892037-08:00>>
2026-01-03T21:56:49.4489055Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4489514Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4491569Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:43.892697-08:00>>
2026-01-03T21:56:49.4492100Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4492560Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4495716Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:43.893318-08:00>>
2026-01-03T21:56:49.4496238Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4496679Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4497902Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:43.893924-08:00>>
2026-01-03T21:56:49.4498326Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4498456Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.4498740Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4499021Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4499291Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4499524Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4499812Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4500317Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4500753Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4502089Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:43.897394-08:00>>
2026-01-03T21:56:49.4502430Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4502869Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4503218Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4503589Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4503890Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4504035Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.4504360Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4505625Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:43.995091+00:00'}}
2026-01-03T21:56:49.4506134Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4507316Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:43.995510+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4507669Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4507895Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4509839Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:43.888113-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:43.996762-08:00>>
2026-01-03T21:56:49.4512171Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:43.891410-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:43.997601-08:00>>
2026-01-03T21:56:49.4515712Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:43.892037-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:43.998132-08:00>>
2026-01-03T21:56:49.4518339Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:43.892697-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:43.998708-08:00>>
2026-01-03T21:56:49.4522206Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:43.893318-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:43.999218-08:00>>
2026-01-03T21:56:49.4524056Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:43.893924-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:43.999767-08:00>>
2026-01-03T21:56:49.4525905Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:43.897394-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.000629-08:00>>
2026-01-03T21:56:49.4527060Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.001398+00:00'}}
2026-01-03T21:56:49.4527678Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4528858Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.001708+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4529107Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4529330Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4529600Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4529786Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4530550Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde46c58e0>>}
2026-01-03T21:56:49.4531355Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde46c4a10>>}
2026-01-03T21:56:49.4532147Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde46c6120>>}
2026-01-03T21:56:49.4532318Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4532528Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4532736Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4532879Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.4533254Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4534437Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:43.995091+00:00'}}
2026-01-03T21:56:49.4535036Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4536241Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:43.995510+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4536546Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4536834Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4538916Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:43.888113-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:43.996762-08:00>>
2026-01-03T21:56:49.4541300Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:43.891410-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:43.997601-08:00>>
2026-01-03T21:56:49.4544872Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:43.892037-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:43.998132-08:00>>
2026-01-03T21:56:49.4547532Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:43.892697-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:43.998708-08:00>>
2026-01-03T21:56:49.4551442Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:43.893318-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:43.999218-08:00>>
2026-01-03T21:56:49.4553432Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:43.893924-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:43.999767-08:00>>
2026-01-03T21:56:49.4555318Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:43.897394-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.000629-08:00>>
2026-01-03T21:56:49.4556511Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.001398+00:00'}}
2026-01-03T21:56:49.4557105Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4558320Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.001708+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4558631Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4558913Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4559109Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4559324Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4560237Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde46c58e0>>}
2026-01-03T21:56:49.4561077Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde46c4a10>>}
2026-01-03T21:56:49.4561907Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde46c6120>>}
2026-01-03T21:56:49.4562203Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4562458Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4562703Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4562844Z ________________________ test_options_flow_disable_area ________________________
2026-01-03T21:56:49.4563205Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:362: in _async_configure
2026-01-03T21:56:49.4563297Z     user_input = data_schema(user_input)
2026-01-03T21:56:49.4563605Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:205: in __call__
2026-01-03T21:56:49.4563689Z     return self._compiled([], data)
2026-01-03T21:56:49.4564011Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:549: in validate_dict
2026-01-03T21:56:49.4564127Z     return base_validate(path, data.items(), out)
2026-01-03T21:56:49.4564465Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:382: in validate_mapping
2026-01-03T21:56:49.4564549Z     raise er.MultipleInvalid(errors)
2026-01-03T21:56:49.4564773Z E   voluptuous.error.MultipleInvalid: extra keys not allowed @ data['binary_sensors']
2026-01-03T21:56:49.4564779Z 
2026-01-03T21:56:49.4564938Z The above exception was the direct cause of the following exception:
2026-01-03T21:56:49.4565090Z tests/test_options_flow.py:325: in test_options_flow_disable_area
2026-01-03T21:56:49.4565235Z     result = await hass.config_entries.options.async_configure(
2026-01-03T21:56:49.4565586Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:341: in async_configure
2026-01-03T21:56:49.4565717Z     result = await self._async_configure(flow_id, user_input)
2026-01-03T21:56:49.4566072Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:375: in _async_configure
2026-01-03T21:56:49.4566145Z     raise InvalidData(
2026-01-03T21:56:49.4566390Z E   homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.4566536Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.4566631Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4566848Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.4567849Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.020590-08:00>>
2026-01-03T21:56:49.4568707Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.020760-08:00>>
2026-01-03T21:56:49.4569441Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.020893-08:00>>
2026-01-03T21:56:49.4570179Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.021010-08:00>>
2026-01-03T21:56:49.4570447Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4570812Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4571139Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4571485Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4571900Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4572227Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4572573Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4573108Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4573434Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4573777Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4574184Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4574474Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4574810Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4575213Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4575501Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4575823Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4576213Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4576475Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4576612Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.4576771Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4577049Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.4578225Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.020590-08:00>>
2026-01-03T21:56:49.4578983Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.020760-08:00>>
2026-01-03T21:56:49.4579736Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.020893-08:00>>
2026-01-03T21:56:49.4580616Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.021010-08:00>>
2026-01-03T21:56:49.4580913Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4581195Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4581597Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4581972Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4582420Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4582914Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4583293Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4583733Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4584130Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4584514Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4584951Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4585315Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4585683Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4586118Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4586467Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4586935Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4587362Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4587660Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4587800Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.4588100Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4588779Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4589189Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4589343Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4589667Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4589986Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4590564Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4590883Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4591124Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.4591669Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4592028Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4592370Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.4592965Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4593244Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.4593783Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4594219Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4595839Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.020590-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.033119-08:00>>
2026-01-03T21:56:49.4596111Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.4596614Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4596857Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4597059Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4597247Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4597639Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4597901Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4598012Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.4598231Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4598593Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4598937Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=b31a1cffdf07672a8d8221dd378139f5>
2026-01-03T21:56:49.4599423Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4599855Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4601137Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.046106-08:00>>
2026-01-03T21:56:49.4601382Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4601486Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.4601690Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4601902Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4602330Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4603083Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4604759Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.049448-08:00>>
2026-01-03T21:56:49.4605213Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4605621Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4608508Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.050085-08:00>>
2026-01-03T21:56:49.4608976Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4609505Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4611521Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.050762-08:00>>
2026-01-03T21:56:49.4611993Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4612417Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4615473Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.051392-08:00>>
2026-01-03T21:56:49.4615923Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4616334Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4617519Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.051995-08:00>>
2026-01-03T21:56:49.4617874Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4617977Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.4618229Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4618473Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4618721Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4618921Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4619131Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4619578Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4620091Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4621383Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.055472-08:00>>
2026-01-03T21:56:49.4621695Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4621999Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4622325Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4622773Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4623044Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4623188Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.4623526Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4624242Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4624589Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4624789Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4625159Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4625518Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4626138Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4626508Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4626810Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.4627511Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4627929Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4628323Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.4628805Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4629168Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.4629892Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4630354Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4632016Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.020590-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.033119-08:00>>
2026-01-03T21:56:49.4632358Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.4632883Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4633166Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4633398Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4633622Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4634078Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4634385Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4634539Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.4634801Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4635125Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4635499Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=b31a1cffdf07672a8d8221dd378139f5>
2026-01-03T21:56:49.4636056Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4636521Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4637942Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.046106-08:00>>
2026-01-03T21:56:49.4638233Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4638364Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.4638604Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4638991Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4639486Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4639919Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4641607Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.049448-08:00>>
2026-01-03T21:56:49.4642123Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4642571Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4645652Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.050085-08:00>>
2026-01-03T21:56:49.4646187Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4646641Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4648847Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.050762-08:00>>
2026-01-03T21:56:49.4649383Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4649847Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4653031Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.051392-08:00>>
2026-01-03T21:56:49.4653564Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4654007Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4655222Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.051995-08:00>>
2026-01-03T21:56:49.4655503Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4655636Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.4655934Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4656212Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4656484Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4656723Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4657006Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4657512Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4658108Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4659458Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.055472-08:00>>
2026-01-03T21:56:49.4659800Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4660133Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4660587Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4660967Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4661264Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4661412Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.4661743Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4662994Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.150443+00:00'}}
2026-01-03T21:56:49.4663505Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4664679Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.150819+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4664928Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4665164Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4667106Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.046106-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.152049-08:00>>
2026-01-03T21:56:49.4669589Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.049448-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.152875-08:00>>
2026-01-03T21:56:49.4673033Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.050085-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.153406-08:00>>
2026-01-03T21:56:49.4675765Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.050762-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.153960-08:00>>
2026-01-03T21:56:49.4679527Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.051392-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.154488-08:00>>
2026-01-03T21:56:49.4681392Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.051995-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.155020-08:00>>
2026-01-03T21:56:49.4683464Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.055472-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.155875-08:00>>
2026-01-03T21:56:49.4684756Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.156645+00:00'}}
2026-01-03T21:56:49.4685264Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4686436Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.156950+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4686686Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4686912Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4687085Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4687268Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4688029Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde47d8230>>}
2026-01-03T21:56:49.4688834Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47d8650>>}
2026-01-03T21:56:49.4689620Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde797d370>>}
2026-01-03T21:56:49.4689790Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4689993Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4690093Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4690239Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.4690722Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4691913Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.150443+00:00'}}
2026-01-03T21:56:49.4692507Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4693922Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.150819+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4694237Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4694520Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4696490Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.046106-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.152049-08:00>>
2026-01-03T21:56:49.4698866Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.049448-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.152875-08:00>>
2026-01-03T21:56:49.4702340Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.050085-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.153406-08:00>>
2026-01-03T21:56:49.4705095Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.050762-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.153960-08:00>>
2026-01-03T21:56:49.4709036Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.051392-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.154488-08:00>>
2026-01-03T21:56:49.4710838Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.051995-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.155020-08:00>>
2026-01-03T21:56:49.4712812Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.055472-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.155875-08:00>>
2026-01-03T21:56:49.4714122Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.156645+00:00'}}
2026-01-03T21:56:49.4714721Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4715936Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.156950+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4716348Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4716627Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4716823Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4717044Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4717849Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde47d8230>>}
2026-01-03T21:56:49.4718690Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47d8650>>}
2026-01-03T21:56:49.4719535Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde797d370>>}
2026-01-03T21:56:49.4719729Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4719984Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4720147Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4720316Z _____________ test_options_flow_sensor_count_updates_after_adding ______________
2026-01-03T21:56:49.4720680Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:362: in _async_configure
2026-01-03T21:56:49.4720774Z     user_input = data_schema(user_input)
2026-01-03T21:56:49.4721082Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:205: in __call__
2026-01-03T21:56:49.4721164Z     return self._compiled([], data)
2026-01-03T21:56:49.4721497Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:549: in validate_dict
2026-01-03T21:56:49.4721603Z     return base_validate(path, data.items(), out)
2026-01-03T21:56:49.4721940Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:382: in validate_mapping
2026-01-03T21:56:49.4722037Z     raise er.MultipleInvalid(errors)
2026-01-03T21:56:49.4722335Z E   voluptuous.error.MultipleInvalid: extra keys not allowed @ data['binary_sensors']
2026-01-03T21:56:49.4722344Z 
2026-01-03T21:56:49.4722508Z The above exception was the direct cause of the following exception:
2026-01-03T21:56:49.4722879Z tests/test_options_flow.py:408: in test_options_flow_sensor_count_updates_after_adding
2026-01-03T21:56:49.4723071Z     result = await hass.config_entries.options.async_configure(
2026-01-03T21:56:49.4723428Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:341: in async_configure
2026-01-03T21:56:49.4723566Z     result = await self._async_configure(flow_id, user_input)
2026-01-03T21:56:49.4723917Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:375: in _async_configure
2026-01-03T21:56:49.4723988Z     raise InvalidData(
2026-01-03T21:56:49.4724232Z E   homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.4724519Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.4724614Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4724831Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.4725830Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.238392-08:00>>
2026-01-03T21:56:49.4726541Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.238560-08:00>>
2026-01-03T21:56:49.4727278Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.238695-08:00>>
2026-01-03T21:56:49.4728014Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.238810-08:00>>
2026-01-03T21:56:49.4728283Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4728540Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4728865Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4729219Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4729634Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4729961Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4730311Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4730726Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4731049Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4731512Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4731929Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4732224Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4732560Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4733096Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4733381Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4733704Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4734264Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4734532Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4734671Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.4734832Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4735110Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.4736139Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.238392-08:00>>
2026-01-03T21:56:49.4736892Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.238560-08:00>>
2026-01-03T21:56:49.4737647Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.238695-08:00>>
2026-01-03T21:56:49.4738418Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.238810-08:00>>
2026-01-03T21:56:49.4738722Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4739014Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4739413Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4739792Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4740236Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4740631Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4741120Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4741568Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4741959Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4742334Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4742871Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4743342Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4743708Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4744149Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4744496Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4744850Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4745273Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4745581Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4745718Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.4746020Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4746698Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4747001Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4747155Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4747478Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4747805Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4748386Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4748704Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4748945Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.4749494Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4749854Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4750271Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.4750703Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4750982Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.4751521Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4751946Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4753664Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.238392-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.251616-08:00>>
2026-01-03T21:56:49.4754057Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.4754442Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4754679Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4754884Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4755075Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4755469Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4755733Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4755844Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.4756063Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4756318Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4756663Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=3cadde9df196c46bfdddf6cde6c671e6>
2026-01-03T21:56:49.4757158Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4757594Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4758874Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.263168-08:00>>
2026-01-03T21:56:49.4759121Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4759217Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.4759422Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4759744Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4760176Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4760572Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4762242Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.266501-08:00>>
2026-01-03T21:56:49.4762856Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4763268Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4766041Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.267126-08:00>>
2026-01-03T21:56:49.4766511Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4766928Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4768998Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.267782-08:00>>
2026-01-03T21:56:49.4769472Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4769897Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4773031Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.268397-08:00>>
2026-01-03T21:56:49.4773479Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4774000Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4775181Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.268994-08:00>>
2026-01-03T21:56:49.4775426Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4775524Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.4775776Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4776031Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4776278Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4776478Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4776690Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4777132Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4777539Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4778836Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.272485-08:00>>
2026-01-03T21:56:49.4779141Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4779439Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4779763Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4780100Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4780362Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4780586Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.4780922Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4781632Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4781982Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4782165Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4782530Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4783083Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4783697Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4784061Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4784362Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.4784947Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4785361Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4785757Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.4786239Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4786601Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.4787219Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4787681Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4789357Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.238392-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.251616-08:00>>
2026-01-03T21:56:49.4789690Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.4790123Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4790515Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4790750Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4790976Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4791431Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4791729Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4791884Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.4792142Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4792585Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4793064Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=3cadde9df196c46bfdddf6cde6c671e6>
2026-01-03T21:56:49.4793620Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4794083Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4795403Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.263168-08:00>>
2026-01-03T21:56:49.4795684Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4795815Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.4796057Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4796339Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4796828Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4797267Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4798973Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.266501-08:00>>
2026-01-03T21:56:49.4799488Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4800044Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4802944Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.267126-08:00>>
2026-01-03T21:56:49.4803573Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4804031Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4806089Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.267782-08:00>>
2026-01-03T21:56:49.4806624Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4807082Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4809996Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.268397-08:00>>
2026-01-03T21:56:49.4810513Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4810956Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4812290Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.268994-08:00>>
2026-01-03T21:56:49.4812577Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4812826Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.4813119Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4813399Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4813818Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4814055Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4814334Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4814838Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4815281Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4816611Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.272485-08:00>>
2026-01-03T21:56:49.4816976Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4817306Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4817654Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4818035Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4818337Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4818483Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.4818817Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4819974Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.368135+00:00'}}
2026-01-03T21:56:49.4820494Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4821767Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.368539+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4827639Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4827914Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4829900Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.263168-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.369756-08:00>>
2026-01-03T21:56:49.4832436Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.266501-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.370584-08:00>>
2026-01-03T21:56:49.4835948Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.267126-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.371100-08:00>>
2026-01-03T21:56:49.4838703Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.267782-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.371671-08:00>>
2026-01-03T21:56:49.4842539Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.268397-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.372190-08:00>>
2026-01-03T21:56:49.4844556Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.268994-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.372738-08:00>>
2026-01-03T21:56:49.4846407Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.272485-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.373597-08:00>>
2026-01-03T21:56:49.4847558Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.374369+00:00'}}
2026-01-03T21:56:49.4848077Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4849250Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.374680+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4849610Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4849845Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4850012Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4850200Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4850967Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde4975880>>}
2026-01-03T21:56:49.4851756Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde48ac980>>}
2026-01-03T21:56:49.4852771Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde49761e0>>}
2026-01-03T21:56:49.4852942Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4853145Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4853252Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4853400Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.4853772Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4854970Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.368135+00:00'}}
2026-01-03T21:56:49.4855574Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4856805Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.368539+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4857115Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4857397Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4859491Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.263168-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.369756-08:00>>
2026-01-03T21:56:49.4861878Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.266501-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.370584-08:00>>
2026-01-03T21:56:49.4865437Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.267126-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.371100-08:00>>
2026-01-03T21:56:49.4868086Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.267782-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.371671-08:00>>
2026-01-03T21:56:49.4872060Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.268397-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.372190-08:00>>
2026-01-03T21:56:49.4873945Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.268994-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.372738-08:00>>
2026-01-03T21:56:49.4875920Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.272485-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.373597-08:00>>
2026-01-03T21:56:49.4877125Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.374369+00:00'}}
2026-01-03T21:56:49.4877717Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4878934Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.374680+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4879236Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.4879521Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.4879723Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.4879932Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.4880727Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde4975880>>}
2026-01-03T21:56:49.4881566Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde48ac980>>}
2026-01-03T21:56:49.4882501Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde49761e0>>}
2026-01-03T21:56:49.4882800Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.4883056Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.4883213Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4883384Z ____________ test_options_flow_sensor_count_updates_after_removing _____________
2026-01-03T21:56:49.4883745Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:362: in _async_configure
2026-01-03T21:56:49.4883947Z     user_input = data_schema(user_input)
2026-01-03T21:56:49.4884263Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:205: in __call__
2026-01-03T21:56:49.4884347Z     return self._compiled([], data)
2026-01-03T21:56:49.4884670Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:549: in validate_dict
2026-01-03T21:56:49.4884773Z     return base_validate(path, data.items(), out)
2026-01-03T21:56:49.4885112Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:382: in validate_mapping
2026-01-03T21:56:49.4885196Z     raise er.MultipleInvalid(errors)
2026-01-03T21:56:49.4885414Z E   voluptuous.error.MultipleInvalid: extra keys not allowed @ data['binary_sensors']
2026-01-03T21:56:49.4885421Z 
2026-01-03T21:56:49.4885588Z The above exception was the direct cause of the following exception:
2026-01-03T21:56:49.4885793Z tests/test_options_flow.py:464: in test_options_flow_sensor_count_updates_after_removing
2026-01-03T21:56:49.4885937Z     result = await hass.config_entries.options.async_configure(
2026-01-03T21:56:49.4886291Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:341: in async_configure
2026-01-03T21:56:49.4886423Z     result = await self._async_configure(flow_id, user_input)
2026-01-03T21:56:49.4886775Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:375: in _async_configure
2026-01-03T21:56:49.4886854Z     raise InvalidData(
2026-01-03T21:56:49.4887100Z E   homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.4887247Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.4887350Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.4887566Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.4888564Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.395972-08:00>>
2026-01-03T21:56:49.4889284Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.396179-08:00>>
2026-01-03T21:56:49.4890004Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.396345-08:00>>
2026-01-03T21:56:49.4890853Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.396482-08:00>>
2026-01-03T21:56:49.4891130Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4891382Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4891713Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4892068Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4892476Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4893013Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4893364Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4893773Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4894101Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4894444Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4894846Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4895149Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4895482Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4895880Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4896170Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4896494Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4896879Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4897149Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4897298Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.4897452Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.4897736Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.4898758Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.395972-08:00>>
2026-01-03T21:56:49.4899505Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.396179-08:00>>
2026-01-03T21:56:49.4900415Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.396345-08:00>>
2026-01-03T21:56:49.4901186Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.396482-08:00>>
2026-01-03T21:56:49.4901494Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.4901780Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.4902275Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.4902753Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.4903196Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4903590Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.4903971Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.4904408Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4904806Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.4905187Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.4905621Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.4905987Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.4906352Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.4906787Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.4907142Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.4907496Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.4907909Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.4908215Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.4908356Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.4908654Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4909490Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4909811Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4909966Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4910305Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4910627Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4911205Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4911637Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4911880Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.4912417Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4912984Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4913492Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.4914044Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4914343Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.4914879Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4915308Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4916931Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.395972-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.410004-08:00>>
2026-01-03T21:56:49.4917203Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.4917597Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4917835Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4918033Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4918230Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4918628Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4919030Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4919156Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.4919377Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4919632Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4919979Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=66c132d59b36d24638a159895218cd32>
2026-01-03T21:56:49.4920466Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4920896Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4922292Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.422066-08:00>>
2026-01-03T21:56:49.4922537Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4922769Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.4922990Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4923208Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4923637Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4924054Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4925727Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.425531-08:00>>
2026-01-03T21:56:49.4926179Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4926598Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4929489Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.426210-08:00>>
2026-01-03T21:56:49.4929952Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4930372Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4932396Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.426954-08:00>>
2026-01-03T21:56:49.4933074Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4933508Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4936414Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.427603-08:00>>
2026-01-03T21:56:49.4936870Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4937281Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4938475Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.428215-08:00>>
2026-01-03T21:56:49.4938716Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4938810Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.4939067Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4939314Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4939563Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4939772Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4940098Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4940544Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4940955Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4942259Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.431756-08:00>>
2026-01-03T21:56:49.4942768Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4943078Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4943398Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4943736Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4944006Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4944148Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.4944484Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.4945209Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.4945558Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4945747Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.4946124Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.4946486Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4947101Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.4947475Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.4947781Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.4948367Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.4948775Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.4949162Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.4949769Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.4950137Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.4950754Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.4951222Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.4952974Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.395972-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.410004-08:00>>
2026-01-03T21:56:49.4953424Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.4953853Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.4954131Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.4954373Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.4954601Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.4955050Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.4955355Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4955505Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.4955763Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.4956091Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.4956455Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=66c132d59b36d24638a159895218cd32>
2026-01-03T21:56:49.4957013Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.4957482Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.4958789Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.422066-08:00>>
2026-01-03T21:56:49.4959079Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4959317Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.4959566Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.4959854Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.4960343Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.4960771Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.4962466Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.425531-08:00>>
2026-01-03T21:56:49.4963161Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.4963616Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.4966414Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.426210-08:00>>
2026-01-03T21:56:49.4966947Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.4967406Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.4969495Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.426954-08:00>>
2026-01-03T21:56:49.4970137Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.4970603Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.4973661Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.427603-08:00>>
2026-01-03T21:56:49.4974288Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.4974738Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.4975956Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.428215-08:00>>
2026-01-03T21:56:49.4976246Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.4976377Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.4976665Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.4976948Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.4977221Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.4977456Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.4977745Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.4978252Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.4978691Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.4980022Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.431756-08:00>>
2026-01-03T21:56:49.4980499Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.4980842Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.4981191Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.4981565Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4981867Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.4982015Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.4982418Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.4983679Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.537936+00:00'}}
2026-01-03T21:56:49.4984189Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.4985363Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.538388+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.4985617Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.4985842Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.4987793Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.422066-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.539683-08:00>>
2026-01-03T21:56:49.4990139Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.425531-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.540551-08:00>>
2026-01-03T21:56:49.4993684Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.426210-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.541081-08:00>>
2026-01-03T21:56:49.4996409Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.426954-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.541679-08:00>>
2026-01-03T21:56:49.5000203Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.427603-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.542211-08:00>>
2026-01-03T21:56:49.5002358Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.428215-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.542779-08:00>>
2026-01-03T21:56:49.5005137Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.431756-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.543666-08:00>>
2026-01-03T21:56:49.5006317Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.544466+00:00'}}
2026-01-03T21:56:49.5006945Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.5008122Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.544785+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.5008380Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.5008608Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.5008780Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.5008974Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.5009746Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde497daf0>>}
2026-01-03T21:56:49.5010544Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde497ca10>>}
2026-01-03T21:56:49.5011344Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde497e480>>}
2026-01-03T21:56:49.5011517Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.5011725Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.5011824Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.5011970Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.5012350Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.5013793Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.537936+00:00'}}
2026-01-03T21:56:49.5014396Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.5015609Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.538388+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.5015920Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.5016315Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.5018294Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.422066-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.539683-08:00>>
2026-01-03T21:56:49.5020684Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.425531-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.540551-08:00>>
2026-01-03T21:56:49.5024144Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.426210-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.541081-08:00>>
2026-01-03T21:56:49.5026916Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.426954-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.541679-08:00>>
2026-01-03T21:56:49.5030781Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.427603-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.542211-08:00>>
2026-01-03T21:56:49.5032791Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.428215-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.542779-08:00>>
2026-01-03T21:56:49.5034674Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.431756-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.543666-08:00>>
2026-01-03T21:56:49.5035882Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.544466+00:00'}}
2026-01-03T21:56:49.5036471Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.5037795Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.544785+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.5038108Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.5038395Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.5038593Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.5038906Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.5039720Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde497daf0>>}
2026-01-03T21:56:49.5040564Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde497ca10>>}
2026-01-03T21:56:49.5041398Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde497e480>>}
2026-01-03T21:56:49.5041608Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.5041864Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.5042021Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.5042195Z __________ test_options_flow_enable_disable_areas_shows_correct_count __________
2026-01-03T21:56:49.5042559Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:362: in _async_configure
2026-01-03T21:56:49.5042741Z     user_input = data_schema(user_input)
2026-01-03T21:56:49.5043057Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:205: in __call__
2026-01-03T21:56:49.5043142Z     return self._compiled([], data)
2026-01-03T21:56:49.5043475Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:549: in validate_dict
2026-01-03T21:56:49.5043588Z     return base_validate(path, data.items(), out)
2026-01-03T21:56:49.5043929Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/voluptuous/schema_builder.py:382: in validate_mapping
2026-01-03T21:56:49.5044015Z     raise er.MultipleInvalid(errors)
2026-01-03T21:56:49.5044239Z E   voluptuous.error.MultipleInvalid: extra keys not allowed @ data['binary_sensors']
2026-01-03T21:56:49.5044245Z 
2026-01-03T21:56:49.5044408Z The above exception was the direct cause of the following exception:
2026-01-03T21:56:49.5044630Z tests/test_options_flow.py:517: in test_options_flow_enable_disable_areas_shows_correct_count
2026-01-03T21:56:49.5044777Z     result = await hass.config_entries.options.async_configure(
2026-01-03T21:56:49.5045126Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:341: in async_configure
2026-01-03T21:56:49.5045263Z     result = await self._async_configure(flow_id, user_input)
2026-01-03T21:56:49.5045738Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/data_entry_flow.py:375: in _async_configure
2026-01-03T21:56:49.5045816Z     raise InvalidData(
2026-01-03T21:56:49.5046070Z E   homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.5046216Z ---------------------------- Captured stderr setup -----------------------------
2026-01-03T21:56:49.5046310Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.5046531Z DEBUG:homeassistant.helpers.restore_state:Not creating cache - no saved states found
2026-01-03T21:56:49.5047531Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.564077-08:00>>
2026-01-03T21:56:49.5048353Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.564253-08:00>>
2026-01-03T21:56:49.5049086Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.564401-08:00>>
2026-01-03T21:56:49.5049823Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.564518-08:00>>
2026-01-03T21:56:49.5050098Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.5050353Z DEBUG:homeassistant.core:Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.5050680Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.5051031Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.5051439Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.5051772Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.5052129Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.5052546Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.5053001Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.5053352Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.5053757Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.5054052Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.5054392Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.5054907Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.5055197Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.5055524Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.5055911Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.5056179Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.5056325Z ------------------------------ Captured log setup ------------------------------
2026-01-03T21:56:49.5056479Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.5056903Z DEBUG    homeassistant.helpers.restore_state:restore_state.py:147 Not creating cache - no saved states found
2026-01-03T21:56:49.5057939Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=None, new_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.564077-08:00>>
2026-01-03T21:56:49.5058686Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.front_door_contact, old_state=None, new_state=<state binary_sensor.front_door_contact=off; friendly_name=Front Door Contact, device_class=door @ 2026-01-03T13:56:44.564253-08:00>>
2026-01-03T21:56:49.5059442Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.back_window_contact, old_state=None, new_state=<state binary_sensor.back_window_contact=off; friendly_name=Back Window Contact, device_class=window @ 2026-01-03T13:56:44.564401-08:00>>
2026-01-03T21:56:49.5060222Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.garage_door_contact, old_state=None, new_state=<state binary_sensor.garage_door_contact=off; friendly_name=Garage Door Contact, device_class=garage_door @ 2026-01-03T13:56:44.564518-08:00>>
2026-01-03T21:56:49.5060520Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=living_room>
2026-01-03T21:56:49.5060810Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event area_registry_updated[L]: action=create, area_id=bedroom>
2026-01-03T21:56:49.5061205Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.front_door_contact_2
2026-01-03T21:56:49.5061581Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.front_door_contact_2>
2026-01-03T21:56:49.5062034Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.front_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.5062426Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.back_window_contact_2
2026-01-03T21:56:49.5062904Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.back_window_contact_2>
2026-01-03T21:56:49.5063350Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.back_window_contact_2, changes=area_id=None>
2026-01-03T21:56:49.5063739Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.test entity: binary_sensor.garage_door_contact_2
2026-01-03T21:56:49.5064229Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.garage_door_contact_2>
2026-01-03T21:56:49.5064678Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=binary_sensor.garage_door_contact_2, changes=area_id=None>
2026-01-03T21:56:49.5065040Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_temperature
2026-01-03T21:56:49.5065405Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_temperature>
2026-01-03T21:56:49.5065840Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_temperature, changes=area_id=None>
2026-01-03T21:56:49.5066192Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.test entity: sensor.living_room_humidity
2026-01-03T21:56:49.5066662Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.living_room_humidity>
2026-01-03T21:56:49.5067079Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=update, entity_id=sensor.living_room_humidity, changes=area_id=None>
2026-01-03T21:56:49.5067377Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=climate, service=set_hvac_mode>
2026-01-03T21:56:49.5067522Z ----------------------------- Captured stderr call -----------------------------
2026-01-03T21:56:49.5067816Z INFO:homeassistant.loader:Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.5068524Z WARNING:homeassistant.loader:We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.5068843Z DEBUG:homeassistant.loader:Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5068993Z INFO:homeassistant.setup:Setting up thermostat_contact_sensors
2026-01-03T21:56:49.5069316Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.5069643Z DEBUG:custom_components.thermostat_contact_sensors:Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.5070219Z DEBUG:custom_components.thermostat_contact_sensors:Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.5070541Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.5070792Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:No stored occupancy state found
2026-01-03T21:56:49.5071331Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.5071693Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.5072001Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:No stored thermostat controller state found
2026-01-03T21:56:49.5072430Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.5072795Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Contact sensor pause state: False
2026-01-03T21:56:49.5073337Z INFO:custom_components.thermostat_contact_sensors.thermostat_control:Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.5073881Z DEBUG:homeassistant.core:Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.5075518Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.564077-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.576682-08:00>>
2026-01-03T21:56:49.5075901Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat action executed: turn_off
2026-01-03T21:56:49.5076294Z DEBUG:homeassistant.loader:Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.5076534Z INFO:homeassistant.loader:Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.5076731Z INFO:homeassistant.loader:Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.5076920Z INFO:homeassistant.loader:Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.5077317Z DEBUG:custom_components.thermostat_contact_sensors.coordinator:Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.5077578Z DEBUG:homeassistant.loader:Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5077689Z INFO:homeassistant.setup:Setting up binary_sensor
2026-01-03T21:56:49.5077922Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.5078181Z INFO:homeassistant.components.binary_sensor:Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.5078525Z DEBUG:homeassistant.core:Bus:Handling <Event device_registry_updated[L]: action=create, device_id=7907024809dbdee0fa1cd92f8b78e4b2>
2026-01-03T21:56:49.5079019Z INFO:homeassistant.helpers.entity_registry:Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.5079452Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.5080748Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.588371-08:00>>
2026-01-03T21:56:49.5080996Z DEBUG:homeassistant.loader:Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5081094Z INFO:homeassistant.setup:Setting up sensor
2026-01-03T21:56:49.5081297Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.5081513Z INFO:homeassistant.components.sensor:Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.5081939Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.5082333Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.5084217Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.591724-08:00>>
2026-01-03T21:56:49.5084669Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.5085085Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.5087858Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.592385-08:00>>
2026-01-03T21:56:49.5088422Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.5088852Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.5090887Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.593042-08:00>>
2026-01-03T21:56:49.5091352Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.5091779Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.5094916Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.593677-08:00>>
2026-01-03T21:56:49.5095370Z INFO:homeassistant.helpers.entity_registry:Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.5095786Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.5096971Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.594304-08:00>>
2026-01-03T21:56:49.5097323Z DEBUG:homeassistant.loader:Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5097418Z INFO:homeassistant.setup:Setting up switch
2026-01-03T21:56:49.5097674Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.5097929Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.5098171Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.5098372Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.5098589Z INFO:homeassistant.components.switch:Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.5099026Z INFO:homeassistant.helpers.entity_registry:Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.5099435Z DEBUG:homeassistant.core:Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.5100749Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.597875-08:00>>
2026-01-03T21:56:49.5101057Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.5101357Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.5101688Z DEBUG:homeassistant.core:Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.5102027Z INFO:custom_components.thermostat_contact_sensors:Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.5102290Z DEBUG:homeassistant.core:Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.5102437Z ------------------------------ Captured log call -------------------------------
2026-01-03T21:56:49.5102874Z INFO     homeassistant.loader:loader.py:774 Loaded thermostat_contact_sensors from custom_components.thermostat_contact_sensors
2026-01-03T21:56:49.5103590Z WARNING  homeassistant.loader:loader.py:688 We found a custom integration thermostat_contact_sensors which has not been tested by Home Assistant. This component might cause stability problems, be sure to disable it if you experience issues with Home Assistant
2026-01-03T21:56:49.5103946Z DEBUG    homeassistant.loader:loader.py:1005 Component thermostat_contact_sensors import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5104248Z INFO     homeassistant.setup:setup.py:384 Setting up thermostat_contact_sensors
2026-01-03T21:56:49.5104619Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['config_flow'] took 0.00s
2026-01-03T21:56:49.5104991Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:138 Setting up Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.5105601Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:157 Monitoring 3 contact sensors for pause feature: ['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact']
2026-01-03T21:56:49.5105972Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:413 Built occupancy tracking for 1 areas with 1 total sensors
2026-01-03T21:56:49.5106372Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:509 No stored occupancy state found
2026-01-03T21:56:49.5106960Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:573 Area living_room scan starting: was_occupied=False, had_restored_occupancy_start=False, is_active=False, occupancy_start_time=None
2026-01-03T21:56:49.5107377Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:455 Occupancy tracker setup complete. Monitoring 1 sensors across 1 areas
2026-01-03T21:56:49.5107767Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1239 No stored thermostat controller state found
2026-01-03T21:56:49.5108255Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:393 Coordinator setup complete. Monitoring 3 sensors for thermostat climate.test_thermostat
2026-01-03T21:56:49.5108621Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:452 Contact sensor pause state: False
2026-01-03T21:56:49.5109243Z INFO     custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1166 Executing thermostat TURN_OFF action: setting climate.test_thermostat to off. Reason: No active or critical rooms (idle)
2026-01-03T21:56:49.5109706Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event call_service[L]: domain=climate, service=set_hvac_mode, service_data=entity_id=climate.test_thermostat, hvac_mode=off>
2026-01-03T21:56:49.5111377Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=climate.test_thermostat, old_state=<state climate.test_thermostat=heat; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.564077-08:00>, new_state=<state climate.test_thermostat=off; friendly_name=Test Thermostat, hvac_modes=[<HVACMode.OFF: 'off'>, <HVACMode.HEAT: 'heat'>, <HVACMode.COOL: 'cool'>, <HVACMode.AUTO: 'auto'>], current_temperature=20, temperature=22 @ 2026-01-03T13:56:44.576682-08:00>>
2026-01-03T21:56:49.5111712Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:303 Thermostat action executed: turn_off
2026-01-03T21:56:49.5112143Z DEBUG    homeassistant.loader:loader.py:1193 Importing platforms for thermostat_contact_sensors executor=[] loop=['binary_sensor', 'sensor', 'switch'] took 0.00s
2026-01-03T21:56:49.5112419Z INFO     homeassistant.loader:loader.py:774 Loaded binary_sensor from homeassistant.components.binary_sensor
2026-01-03T21:56:49.5112747Z INFO     homeassistant.loader:loader.py:774 Loaded sensor from homeassistant.components.sensor
2026-01-03T21:56:49.5112985Z INFO     homeassistant.loader:loader.py:774 Loaded switch from homeassistant.components.switch
2026-01-03T21:56:49.5113439Z DEBUG    custom_components.thermostat_contact_sensors.coordinator:coordinator.py:597 Thermostat climate.test_thermostat changed from heat to off (is_paused=False)
2026-01-03T21:56:49.5113854Z DEBUG    homeassistant.loader:loader.py:1005 Component binary_sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5114018Z INFO     homeassistant.setup:setup.py:384 Setting up binary_sensor
2026-01-03T21:56:49.5114277Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=binary_sensor>
2026-01-03T21:56:49.5114600Z INFO     homeassistant.components.binary_sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.binary_sensor
2026-01-03T21:56:49.5114978Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event device_registry_updated[L]: action=create, device_id=7907024809dbdee0fa1cd92f8b78e4b2>
2026-01-03T21:56:49.5115530Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new binary_sensor.thermostat_contact_sensors entity: binary_sensor.test_thermostat_contact_sensors_thermostat_paused
2026-01-03T21:56:49.5116099Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused>
2026-01-03T21:56:49.5117418Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=None, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.588371-08:00>>
2026-01-03T21:56:49.5117698Z DEBUG    homeassistant.loader:loader.py:1005 Component sensor import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5117835Z INFO     homeassistant.setup:setup.py:384 Setting up sensor
2026-01-03T21:56:49.5118071Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=sensor>
2026-01-03T21:56:49.5118360Z INFO     homeassistant.components.sensor:entity_platform.py:351 Setting up thermostat_contact_sensors.sensor
2026-01-03T21:56:49.5118859Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_open_sensors
2026-01-03T21:56:49.5119292Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_open_sensors>
2026-01-03T21:56:49.5120981Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.591724-08:00>>
2026-01-03T21:56:49.5121503Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_thermostat_control
2026-01-03T21:56:49.5121948Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_thermostat_control>
2026-01-03T21:56:49.5124979Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.592385-08:00>>
2026-01-03T21:56:49.5125514Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_occupancy
2026-01-03T21:56:49.5125973Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy>
2026-01-03T21:56:49.5128138Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.593042-08:00>>
2026-01-03T21:56:49.5128675Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_living_room_temperature
2026-01-03T21:56:49.5129143Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature>
2026-01-03T21:56:49.5132075Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.593677-08:00>>
2026-01-03T21:56:49.5132703Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new sensor.thermostat_contact_sensors entity: sensor.test_thermostat_contact_sensors_bedroom_occupancy
2026-01-03T21:56:49.5133153Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy>
2026-01-03T21:56:49.5134378Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=None, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.594304-08:00>>
2026-01-03T21:56:49.5134657Z DEBUG    homeassistant.loader:loader.py:1005 Component switch import took 0.000 seconds (loaded_executor=False)
2026-01-03T21:56:49.5134909Z INFO     homeassistant.setup:setup.py:384 Setting up switch
2026-01-03T21:56:49.5135201Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_off>
2026-01-03T21:56:49.5135479Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=turn_on>
2026-01-03T21:56:49.5135758Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=switch, service=toggle>
2026-01-03T21:56:49.5135990Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=switch>
2026-01-03T21:56:49.5136273Z INFO     homeassistant.components.switch:entity_platform.py:351 Setting up thermostat_contact_sensors.switch
2026-01-03T21:56:49.5136784Z INFO     homeassistant.helpers.entity_registry:entity_registry.py:918 Registered new switch.thermostat_contact_sensors entity: switch.test_thermostat_contact_sensors_respect_user_off
2026-01-03T21:56:49.5137372Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event entity_registry_updated[L]: action=create, entity_id=switch.test_thermostat_contact_sensors_respect_user_off>
2026-01-03T21:56:49.5138710Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=None, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.597875-08:00>>
2026-01-03T21:56:49.5139053Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=pause>
2026-01-03T21:56:49.5139384Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=resume>
2026-01-03T21:56:49.5139742Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event service_registered[L]: domain=thermostat_contact_sensors, service=recalculate>
2026-01-03T21:56:49.5140124Z INFO     custom_components.thermostat_contact_sensors:__init__.py:184 Thermostat Contact Sensors setup complete: Test Thermostat Contact Sensors
2026-01-03T21:56:49.5140423Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event component_loaded[L]: component=thermostat_contact_sensors>
2026-01-03T21:56:49.5140573Z --------------------------- Captured stderr teardown ---------------------------
2026-01-03T21:56:49.5140902Z DEBUG:custom_components.thermostat_contact_sensors:Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.5142057Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.694024+00:00'}}
2026-01-03T21:56:49.5142570Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.5143835Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.694440+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.5144089Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.5144430Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.5146375Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.588371-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.695670-08:00>>
2026-01-03T21:56:49.5148726Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.591724-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.696496-08:00>>
2026-01-03T21:56:49.5152185Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.592385-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.697010-08:00>>
2026-01-03T21:56:49.5154909Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.593042-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.697574-08:00>>
2026-01-03T21:56:49.5158787Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.593677-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.698089-08:00>>
2026-01-03T21:56:49.5160664Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.594304-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.698649-08:00>>
2026-01-03T21:56:49.5162509Z DEBUG:homeassistant.core:Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.597875-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.699532-08:00>>
2026-01-03T21:56:49.5163753Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.700310+00:00'}}
2026-01-03T21:56:49.5164266Z DEBUG:custom_components.thermostat_contact_sensors.thermostat_control:Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.5165438Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.700616+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.5165683Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Saved occupancy state for 1 areas
2026-01-03T21:56:49.5165913Z DEBUG:custom_components.thermostat_contact_sensors.occupancy:Occupancy tracker shut down
2026-01-03T21:56:49.5166080Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.5166263Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.5167140Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde47c06b0>>}
2026-01-03T21:56:49.5167946Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47c0890>>}
2026-01-03T21:56:49.5168771Z DEBUG:pytest_homeassistant_custom_component.common:Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde47c3f20>>}
2026-01-03T21:56:49.5168938Z DEBUG:homeassistant.core:Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.5169140Z DEBUG:asyncio:Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.5169345Z DEBUG:asyncio:Using selector: EpollSelector
2026-01-03T21:56:49.5169488Z ---------------------------- Captured log teardown -----------------------------
2026-01-03T21:56:49.5169867Z DEBUG    custom_components.thermostat_contact_sensors:__init__.py:248 Unloading Thermostat Contact Sensors: Test Thermostat Contact Sensors
2026-01-03T21:56:49.5171055Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.694024+00:00'}}
2026-01-03T21:56:49.5171643Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.5172973Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.694440+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.5173286Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.5173567Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.5175554Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=binary_sensor.test_thermostat_contact_sensors_thermostat_paused, old_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=off; thermostat=climate.test_thermostat, previous_mode=None, open_count=0, device_class=running, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Paused @ 2026-01-03T13:56:44.588371-08:00>, new_state=<state binary_sensor.test_thermostat_contact_sensors_thermostat_paused=unavailable; restored=True, device_class=running, icon=mdi:thermostat, friendly_name=Thermostat Paused, supported_features=0 @ 2026-01-03T13:56:44.695670-08:00>>
2026-01-03T21:56:49.5178053Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_open_sensors, old_state=<state sensor.test_thermostat_contact_sensors_open_sensors=0; state_class=measurement, open_sensors=[], open_sensor_names=[], open_doors=0, open_windows=0, monitored_sensors=['binary_sensor.front_door_contact', 'binary_sensor.back_window_contact', 'binary_sensor.garage_door_contact'], total_monitored=3, unit_of_measurement=sensors, icon=mdi:door-open, friendly_name=Test Thermostat Contact Sensors Open Sensors @ 2026-01-03T13:56:44.591724-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_open_sensors=unavailable; restored=True, state_class=measurement, icon=mdi:door-open, friendly_name=Open Sensors, supported_features=0, unit_of_measurement=sensors @ 2026-01-03T13:56:44.696496-08:00>>
2026-01-03T21:56:49.5181437Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_thermostat_control, old_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=idle; thermostat_entity_id=climate.test_thermostat, paused_by_contact_sensors=False, thermostat_name=Test Thermostat, hvac_mode=heat, is_on=True, target_temperature=22.0, target_temp_high=None, target_temp_low=None, active_room_count=0, satiated_room_count=0, all_active_rooms_satiated=False, recommended_action=turn_off, action_reason=No active or critical rooms (idle), can_turn_on=True, can_turn_on_reason=No previous off time recorded, can_turn_off=True, can_turn_off_reason=No previous on time recorded, room_summary=living_room=area_name=living_room, is_satiated=False, satiation_reason=no_temp_sensors, has_valid_readings=False, sensor_readings=, icon=mdi:thermostat, friendly_name=Test Thermostat Contact Sensors Thermostat Control @ 2026-01-03T13:56:44.592385-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_thermostat_control=unavailable; restored=True, icon=mdi:thermostat, friendly_name=Thermostat Control, supported_features=0 @ 2026-01-03T13:56:44.697010-08:00>>
2026-01-03T21:56:49.5184605Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=inactive; is_occupied=False, is_active=False, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:44.593042-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Living Room Occupancy, supported_features=0 @ 2026-01-03T13:56:44.697574-08:00>>
2026-01-03T21:56:49.5188456Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_living_room_temperature, old_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unknown; state_class=measurement, area_id=living_room, area_name=Living Room, is_satiated=False, satiation_reason=no_temp_sensors, is_active=False, is_critical=False, critical_reason=None, has_valid_readings=False, sensor_readings=, determining_sensor=None, determining_temperature=None, target_temperature=None, distance_from_target=None, sensor_names=sensor.living_room_temperature=sensor.living_room_temperature, hvac_mode=heat, thermostat_target=22.0, unit_of_measurement=Â°, icon=mdi:thermometer, friendly_name=Test Thermostat Contact Sensors Living Room Temperature @ 2026-01-03T13:56:44.593677-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_living_room_temperature=unavailable; restored=True, state_class=measurement, icon=mdi:thermometer, friendly_name=Living Room Temperature, supported_features=0, unit_of_measurement=Â° @ 2026-01-03T13:56:44.698089-08:00>>
2026-01-03T21:56:49.5190390Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=sensor.test_thermostat_contact_sensors_bedroom_occupancy, old_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unknown; is_occupied=False, is_active=False, area_id=bedroom, area_name=Bedroom, icon=mdi:home-outline, friendly_name=Test Thermostat Contact Sensors Bedroom Occupancy @ 2026-01-03T13:56:44.594304-08:00>, new_state=<state sensor.test_thermostat_contact_sensors_bedroom_occupancy=unavailable; restored=True, icon=mdi:home-outline, friendly_name=Bedroom Occupancy, supported_features=0 @ 2026-01-03T13:56:44.698649-08:00>>
2026-01-03T21:56:49.5192286Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event state_changed[L]: entity_id=switch.test_thermostat_contact_sensors_respect_user_off, old_state=<state switch.test_thermostat_contact_sensors_respect_user_off=off; description=When ON: Respects user's choice to keep thermostat off. When OFF: Always resumes thermostat when windows close., icon=mdi:account-cog, friendly_name=Test Thermostat Contact Sensors Respect User Off @ 2026-01-03T13:56:44.597875-08:00>, new_state=<state switch.test_thermostat_contact_sensors_respect_user_off=unavailable; restored=True, icon=mdi:account-cog, friendly_name=Respect User Off, supported_features=0 @ 2026-01-03T13:56:44.699532-08:00>>
2026-01-03T21:56:49.5193703Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.thermostat_controller.test_entry_id: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.thermostat_controller.test_entry_id', 'data': {'we_turned_off': True, 'previous_hvac_mode': 'heat', 'stored_target_temp': 22.0, 'stored_target_temp_low': None, 'stored_target_temp_high': None, 'saved_at': '2026-01-03T21:56:44.700310+00:00'}}
2026-01-03T21:56:49.5194297Z DEBUG    custom_components.thermostat_contact_sensors.thermostat_control:thermostat_control.py:1222 Saved thermostat controller state: we_turned_off=True, previous_hvac_mode=heat, target_temps=(22.0, None, None)
2026-01-03T21:56:49.5195504Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to thermostat_contact_sensors.test_entry_id.occupancy: {'version': 1, 'minor_version': 1, 'key': 'thermostat_contact_sensors.test_entry_id.occupancy', 'data': {'version': 1, 'saved_at': '2026-01-03T21:56:44.700616+00:00', 'areas': {'living_room': {'area_id': 'living_room', 'is_active': False, 'occupancy_start_time': None, 'was_active_before_unoccupied': False, 'unoccupancy_start_time': None}}}}
2026-01-03T21:56:49.5195822Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:500 Saved occupancy state for 1 areas
2026-01-03T21:56:49.5196106Z DEBUG    custom_components.thermostat_contact_sensors.occupancy:occupancy.py:483 Occupancy tracker shut down
2026-01-03T21:56:49.5196308Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_stop[L]>
2026-01-03T21:56:49.5196524Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_final_write[L]>
2026-01-03T21:56:49.5197336Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.area_registry: {'version': 1, 'minor_version': 7, 'key': 'core.area_registry', 'data_func': <bound method AreaRegistry._data_to_save of <homeassistant.helpers.area_registry.AreaRegistry object at 0x7efde47c06b0>>}
2026-01-03T21:56:49.5198184Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.entity_registry: {'version': 1, 'minor_version': 15, 'key': 'core.entity_registry', 'data_func': <bound method EntityRegistry._data_to_save of <homeassistant.helpers.entity_registry.EntityRegistry object at 0x7efde47c0890>>}
2026-01-03T21:56:49.5199017Z DEBUG    pytest_homeassistant_custom_component.common:common.py:1423 Writing data to core.device_registry: {'version': 1, 'minor_version': 8, 'key': 'core.device_registry', 'data_func': <bound method DeviceRegistry._data_to_save of <homeassistant.helpers.device_registry.DeviceRegistry object at 0x7efde47c3f20>>}
2026-01-03T21:56:49.5199210Z DEBUG    homeassistant.core:core.py:1548 Bus:Handling <Event homeassistant_close[L]>
2026-01-03T21:56:49.5199470Z DEBUG    asyncio:base_events.py:714 Close <_UnixSelectorEventLoop running=False closed=False debug=True>
2026-01-03T21:56:49.5199626Z DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
2026-01-03T21:56:49.5199632Z 
2026-01-03T21:56:49.5199900Z ---------- coverage: platform linux, python 3.12.12-final-0 ----------
2026-01-03T21:56:49.5200002Z Coverage XML written to file coverage.xml
2026-01-03T21:56:49.5200007Z 
2026-01-03T21:56:49.5200121Z =========================== short test summary info ============================
2026-01-03T21:56:49.5200410Z FAILED tests/test_diagnostics.py::TestDiagnostics::test_diagnostics_config_entry_info - assert 3 == 2
2026-01-03T21:56:49.5200672Z FAILED tests/test_init.py::test_multiple_config_entries - NameError: name 'CONF_AREA_ID' is not defined
2026-01-03T21:56:49.5201150Z FAILED tests/test_integration.py::TestContactSensorEffects::test_contact_close_resumes_thermostat_after_timeout - AssertionError: assert 'off' == <HVACMode.HEAT: 'heat'>
2026-01-03T21:56:49.5201217Z   
2026-01-03T21:56:49.5201287Z   - heat
2026-01-03T21:56:49.5201452Z   + off
2026-01-03T21:56:49.5201891Z FAILED tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_state_becomes_occupied - AssertionError: assert 'inactive' == 'occupied'
2026-01-03T21:56:49.5201956Z   
2026-01-03T21:56:49.5202022Z   - occupied
2026-01-03T21:56:49.5202087Z   + inactive
2026-01-03T21:56:49.5202437Z FAILED tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_occupied_sensors_attribute - assert 0 >= 1
2026-01-03T21:56:49.5202514Z  +  where 0 = len([])
2026-01-03T21:56:49.5202983Z FAILED tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_time_until_active_attribute - assert None is not None
2026-01-03T21:56:49.5203454Z FAILED tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_active_area_enters_grace_period_when_unoccupied - AssertionError: assert False is True
2026-01-03T21:56:49.5203704Z  +  where False = <built-in method get of ReadOnlyDict object at 0x7efde4594aa0>('is_in_grace_period')
2026-01-03T21:56:49.5205192Z  +    where <built-in method get of ReadOnlyDict object at 0x7efde4594aa0> = {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'}.get
2026-01-03T21:56:49.5208123Z  +      where {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'} = <state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.521793-08:00>.attributes
2026-01-03T21:56:49.5208614Z FAILED tests/test_occupancy_and_control_sensors.py::TestRoomOccupancySensor::test_reoccupancy_during_grace_period_clears_grace_period - AssertionError: assert False is True
2026-01-03T21:56:49.5208853Z  +  where False = <built-in method get of ReadOnlyDict object at 0x7efde45dcc80>('is_in_grace_period')
2026-01-03T21:56:49.5210442Z  +    where <built-in method get of ReadOnlyDict object at 0x7efde45dcc80> = {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'}.get
2026-01-03T21:56:49.5213771Z  +      where {'is_occupied': False, 'is_active': True, 'area_id': 'living_room', 'area_name': 'Living Room', 'occupied_sensor_count': 0, 'total_sensor_count': 1, 'min_occupancy_minutes': 5, 'grace_period_minutes': 5, 'occupied_sensors': [], 'occupancy_duration_minutes': 0, 'occupied_since': None, 'time_until_active_minutes': None, 'is_in_grace_period': False, 'time_until_inactive_minutes': None, 'unoccupied_since': None, 'icon': 'mdi:home-account', 'friendly_name': 'Test Thermostat Contact Sensors Living Room Occupancy'} = <state sensor.test_thermostat_contact_sensors_living_room_occupancy=active; is_occupied=False, is_active=True, area_id=living_room, area_name=Living Room, occupied_sensor_count=0, total_sensor_count=1, min_occupancy_minutes=5, grace_period_minutes=5, occupied_sensors=[], occupancy_duration_minutes=0, occupied_since=None, time_until_active_minutes=None, is_in_grace_period=False, time_until_inactive_minutes=None, unoccupied_since=None, icon=mdi:home-account, friendly_name=Test Thermostat Contact Sensors Living Room Occupancy @ 2026-01-03T13:56:42.602209-08:00>.attributes
2026-01-03T21:56:49.5214775Z FAILED tests/test_options_flow.py::test_options_flow_area_config - homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.5215304Z FAILED tests/test_options_flow.py::test_options_flow_disable_area - homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.5215810Z FAILED tests/test_options_flow.py::test_options_flow_sensor_count_updates_after_adding - homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.5216308Z FAILED tests/test_options_flow.py::test_options_flow_sensor_count_updates_after_removing - homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.5216817Z FAILED tests/test_options_flow.py::test_options_flow_enable_disable_areas_shows_correct_count - homeassistant.data_entry_flow.InvalidData: Schema validation failed @ data['binary_sensors']
2026-01-03T21:56:49.5222851Z ERROR tests/test_integration.py::TestContactSensorEffects::test_contact_close_resumes_thermostat_after_timeout - Failed: Lingering timer after job <Job track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>> HassJobType.Callback <bound method _TrackTimeInterval._interval_listener of _TrackTimeInterval(hass=<HomeAssistant STOPPED>, seconds=30.0, job_name='track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>>', action=<bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>>, cancel_on_shutdown=None, _track_job=<Job track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>> HassJobType.Callback <bound method _TrackTimeInterval._interval_listener of ...>>, _run_job=<Job track time interval 30.0 HassJobType.Callback <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>>>, _timer_handle=<TimerHandle when=329.61496115 _TrackTimeInterval._interval_listener(<Job track time interval 30.0 <bound method RoomOccupancyTracker._async_periodic_update of <custom_components.thermostat_contact_sensors.occupancy.RoomOccupancyTracker object at 0x7efde47f34a0>> HassJobType.Callback <bound method _TrackTimeInterval._interval_listener of ...>>) created at /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/homeassistant/helpers/event.py:1649>)>>
2026-01-03T21:56:49.5223277Z ERROR tests/test_switch.py::TestRespectUserOffSwitch::test_switch_default_state_is_off - NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.5223618Z ERROR tests/test_switch.py::TestRespectUserOffSwitch::test_switch_turn_on - NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.5223954Z ERROR tests/test_switch.py::TestRespectUserOffSwitch::test_switch_turn_off - NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.5224521Z ERROR tests/test_switch.py::TestRespectUserOffBehavior::test_thermostat_off_resumes_when_respect_off_disabled - NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.5224958Z ERROR tests/test_switch.py::TestRespectUserOffBehavior::test_thermostat_stays_off_when_respect_off_enabled - NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.5225361Z ERROR tests/test_switch.py::TestRespectUserOffBehavior::test_active_thermostat_always_resumes - NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.5225756Z ERROR tests/test_switch.py::TestRespectUserOffBehavior::test_switch_extra_state_attributes - NameError: name 'CONF_BINARY_SENSORS' is not defined
2026-01-03T21:56:49.5225890Z ================== 13 failed, 356 passed, 8 errors in 35.21s ===================
2026-01-03T21:56:49.6643004Z ##[error]Process completed with exit code 1.
2026-01-03T21:56:49.6743452Z Post job cleanup.
2026-01-03T21:56:49.7672501Z [command]/usr/bin/git version
2026-01-03T21:56:49.7708294Z git version 2.52.0
2026-01-03T21:56:49.7749537Z Temporarily overriding HOME='/home/runner/work/_temp/027eb460-eb75-4099-b67c-f98fc81241be' before making global git config changes
2026-01-03T21:56:49.7750821Z Adding repository directory to the temporary git global config as a safe directory
2026-01-03T21:56:49.7762517Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/ha-thermostat-contact-sensors/ha-thermostat-contact-sensors
2026-01-03T21:56:49.7796600Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-03T21:56:49.7827814Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-03T21:56:49.8050591Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-03T21:56:49.8070608Z http.https://github.com/.extraheader
2026-01-03T21:56:49.8082309Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2026-01-03T21:56:49.8112533Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-03T21:56:49.8331246Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-03T21:56:49.8361430Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-03T21:56:49.8701079Z Cleaning up orphan processes